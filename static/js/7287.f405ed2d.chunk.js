"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[7287],{57287:(t,e,n)=>{n.d(e,{previewSymbol2D:()=>V});var i=n(89379),o=n(69539),a=n(59784),s=n(50076),l=n(85504),r=n(76931),h=n(76279),c=n(10484),u=n(51235),d=n(52796),p=n(19393),v=n(83658),m=n(64241);const g={maxSegmentLength:1/0,maxDeviation:1/0,maxSegmentsPerCurve:12e3,minSegmentsPerCurve:1},f=1e-6,y=[0,0];function S(t){var e,n,i,o;return{maxSegmentLength:null!==(e=t.maxSegmentLength)&&void 0!==e?e:g.maxSegmentLength,maxDeviation:null!==(n=t.maxDeviation)&&void 0!==n?n:g.maxDeviation,maxSegmentsPerCurve:null!==(i=t.maxSegmentsPerCurve)&&void 0!==i?i:g.maxSegmentsPerCurve,minSegmentsPerCurve:Math.max(null!==(o=t.minSegmentsPerCurve)&&void 0!==o?o:g.minSegmentsPerCurve,1)}}class x{constructor(t,e){this.curveStart=t,this.curveEnd=e,this.tStart=0,this.tEnd=0,this.tEndStack=[],this.arcEndStack=[]}get stackSize(){return this.tEndStack.length}initialize(t,e){this.tStart=0,this.arcStart=t,this.tEndStack.push(1),this.arcEndStack.push(e)}splitAt(t){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(t),this.arcEndStack.push(this.interpolate(t))}splitInHalf(){return this.splitAt((this.tStart+this.tEnd)/2)}pop(){this.tEnd=this.tEndStack.pop(),this.arcEnd=this.arcEndStack.pop()}next(){this.tStart=this.tEnd,this.arcStart=this.arcEnd}densify(t,e){let{maxDeviation:n,maxSegmentLength:i,maxSegmentsPerCurve:o,minSegmentsPerCurve:a}=e;const s=i*i,l=n*n,r=1/o,h=this.interpolate(0),c=this.interpolate(1);(0,m.kb)(this.curveStart,h)>f&&t.push(h),this.initialize(h,c);const u=1/a;for(let d=a-1;d>0;d--){const t=d*u;this.pop(),this.splitAt(t)}for(;this.stackSize>0;)this.pop(),this.tStart===this.tEnd||this.tEnd-this.tStart<r||(0===s||!isFinite(s)||(0,m.kb)(this.arcStart,this.arcEnd)<s)&&(0===l||!isFinite(l)||this.getDeviation2()<l)?(t.push(this.arcEnd),this.next()):this.splitInHalf();return(0,m.kb)(this.curveEnd,c)>f&&t.push([...this.curveEnd]),t}}class M extends x{constructor(t,e){const[n,i,o]=e.b;super(t,n),this._controlPointsStack=[],this._curveControlPoints=[i,o],this._arcControlPoints=[i,o],this._controlPointsStack.push(this._arcControlPoints)}splitAt(t){const{arcStart:e,arcEnd:n,tStart:i,tEnd:o}=this,[a,s]=this._arcControlPoints,l=(t-i)/(o-i),r=(0,m.RS)([],e,a,l),h=(0,m.RS)(y,a,s,l),c=(0,m.RS)([],s,n,l),u=(0,m.RS)([],r,h,l),d=(0,m.RS)([],h,c,l),p=(0,m.RS)([],u,d,l);this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this._controlPointsStack.push([d,c]),this.tEndStack.push(t),this.arcEndStack.push(p),this._arcControlPoints[0]=r,this._arcControlPoints[1]=u,this._controlPointsStack.push(this._arcControlPoints)}pop(){super.pop(),this._arcControlPoints=this._controlPointsStack.pop()}interpolate(t){const{curveStart:e,curveEnd:n}=this,[i,o]=this._curveControlPoints;return(0,u.B4)(e,i,o,n,t)}getDeviation2(){const{arcStart:t,arcEnd:e}=this,[n,i]=this._arcControlPoints;return Math.max((0,m.yE)(n,t,e),(0,m.yE)(i,t,e))}}class k extends x{constructor(t,e){const[n]=e.a;super(t,n),this._derivedEllipse=(0,v.SW)(t,e)}pop(){super.pop(),this._tMid=(this.tStart+this.tEnd)/2,this._arcMid=this.interpolate(this._tMid)}splitInHalf(){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(this._tMid),this.arcEndStack.push(this._arcMid)}interpolate(t){return(0,v.Uk)(this._derivedEllipse,t)}getDeviation2(){return(0,m.yE)(this._arcMid,this.arcStart,this.arcEnd)}}function E(t,e,n,i,o){let{cx:a,cy:s,radius:l,thetaStart:r,thetaEnd:h,isInvalid:c}=i,{maxDeviation:u,maxSegmentLength:d,maxSegmentsPerCurve:p,minSegmentsPerCurve:v}=o;if(c)return t.push([...n]),t;const g=2*l,y=[a+l*Math.cos(r),s+l*Math.sin(r)],S=[a+l*Math.cos(h),s+l*Math.sin(h)];(0,m.kb)(e,y)>f&&t.push(y);const x=Math.abs(h-r),M=d<g?2*Math.asin(d/g):x,k=u<=l?2*Math.acos(1-u/l):x,E=Math.min(M,k),w=Math.min(p,Math.max(v,Math.ceil(Math.abs(x/E)))),b=1/w;for(let m=1;m<w;m++){const e=m*b,n=r*(1-e)+h*e;t.push([a+l*Math.cos(n),s+l*Math.sin(n)])}return t.push(S),(0,m.kb)(n,S)>f&&t.push([...n]),t}function w(t,e,n,i){return new M(e,n).densify(t,i)}function b(t,e,n,i){const o=(0,d.pM)(e,n),[a]=n.c;return E(t,e,a,o,i)}function L(t,e,n,i){const o=(0,p.i)(e,n),[a]=n.a;return E(t,e,a,o,i)}function C(t,e,n,i){const[o,a,s,l,r,h,c]=n.a;return 0===h||0===c?(t.push([...o]),t):new k(e,n).densify(t,i)}function z(t,e,n,i){return(0,c.Xq)(n)?(t.push([...n]),t):(0,c.n1)(n)?w(t,e,n,i):(0,c.aO)(n)?b(t,e,n,i):(0,c.DA)(n)?L(t,e,n,i):C(t,e,n,i)}function P(t,e){if(!(0,c.Ed)(t))return t;const n=S(e),o=(0,c.FD)(t),a=[];for(const i of o){const t=[];for(let e=0;e<i.length-1;e++){const o=e+1,a=[...(0,c.yP)(i[e])];0===e&&t.push(a),z(t,a,i[o],n)}a.push(t)}return"curvePaths"in t?(0,i.A)((0,i.A)((0,i.A)({},void 0!==t.hasZ?{hasZ:t.hasZ}:{}),void 0!==t.hasM?{hasM:t.hasM}:{}),{},{paths:a,spatialReference:t.spatialReference}):(0,i.A)((0,i.A)((0,i.A)({},void 0!==t.hasZ?{hasZ:t.hasZ}:{}),void 0!==t.hasM?{hasM:t.hasM}:{}),{},{rings:a,spatialReference:t.spatialReference})}var A=n(87840),_=n(65709),D=n(26291),B=n(27790);const R="picture-fill",Z="picture-marker",F="simple-fill",j="simple-line",H="simple-marker",I="text",q="Aa",O=22,W=120,Q=80,T=50,N=225,$=document.createElement("canvas");function U(t,e,n){const{extent:i}=t;if(!i)return"";const o=i.width||1,a=i.height||1;if("polygon"===t.type){const s=t.clone();(0,c.Ed)(s)&&(s.rings=P(s,{minSegmentsPerCurve:128}).rings),(0,h.wp)({originPosition:"upperLeft",scale:[o/e,a/n],translate:[i.xmin,i.ymax]},s,s);let l="";for(let t=0;t<s.rings.length;t++){const e=s.rings[t];for(let t=0;t<e.length;t++){const n=e[t][0],i=e[t][1],o=0===t?"M":"l",a=t===e.length-1?" Z":"";l+="".concat(""!==l?" ":"").concat(o).concat(n.toString()," ").concat(i.toString()).concat(a)}}return l}if("polyline"===t.type){const s=t.clone();(0,c.Ed)(s)&&(s.paths=P(s,{minSegmentsPerCurve:128}).paths),(0,h.QE)({originPosition:"upperLeft",scale:[o/e,a/n],translate:[i.xmin,i.ymax]},s,s);let l="";for(let t=0;t<s.paths.length;t++){const e=s.paths[t];for(let t=0;t<e.length;t++){const n=e[t][0],i=e[t][1];l+="".concat(""!==l?" ":"").concat(0===t?"M":"l").concat(n.toString()," ").concat(i.toString())}}return l}return""}function X(t,e){const n=$.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),n.font=i.join(" ");const{width:o,actualBoundingBoxLeft:a,actualBoundingBoxRight:s,actualBoundingBoxAscent:l,actualBoundingBoxDescent:r}=n.measureText(t);return{width:Math.ceil(Math.max(o,a+s)),height:Math.ceil(l+r),x:Math.floor(a),y:Math.floor((l-r)/2)}}function G(t){const e=null===t||void 0===t?void 0:t.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,r.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,r.Lz)(e.height):null}}function J(t,e){return t>e?"dark":"light"}function K(t,e){var n,s;const l="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null,h=null!=l?(0,r.Lz)(l):null,c=null!=(null===e||void 0===e?void 0:e.maxSize)?(0,r.Lz)(e.maxSize):null;let u="angle"in t?t.angle:null;null!=(null===e||void 0===e?void 0:e.rotation)&&(u=(null!==u&&void 0!==u?u:0)+e.rotation);const d=(0,A.eH)(t);let p=(0,A.$4)(t);"dark"!==function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;const n=(0,A.eH)(t),i=(0,A.$4)(t),s=!n||"type"in n?null:new o.A(n),l=null!==i&&void 0!==i&&i.color?new o.A(null===i||void 0===i?void 0:i.color):null,r=s?J((0,a.Ws)(s),e):null,h=l?J((0,a.Ws)(l),e):null;return h?r?r===h?r:e>=N?"light":"dark":h:r}(t,245)||(null===e||void 0===e?void 0:e.ignoreWhiteSymbols)||(p=(0,i.A)((0,i.A)({width:.75},p),{},{color:"#bdc3c7"}));let v=null;const m={shape:null,fill:d,stroke:p,offset:[0,0]};(null===(n=p)||void 0===n?void 0:n.width)&&(p.width=Math.min(p.width,Q));const g=(null===(s=p)||void 0===s?void 0:s.width)||0;let f=null!=(null===e||void 0===e?void 0:e.size)&&(null==(null===e||void 0===e?void 0:e.scale)||(null===e||void 0===e?void 0:e.scale)),y=0,S=0,x=!1;switch(t.type){case H:{const n=t.style,{width:i,height:o}=G(e);let a=i===o&&null!=i?i:null!=h?h:Math.min((0,r.Lz)(t.size),c||W);if(!0===(null===e||void 0===e?void 0:e.useMarkerSymbolSize)&&null!==i&&null!==o){const e=Math.min((0,r.Lz)(t.size),c||W);a=e>i&&e>o?Math.min(i,o):e}switch(y=a,S=a,n){case"circle":m.shape={type:"circle",cx:0,cy:0,r:.5*a},f||(y+=g,S+=g);break;case"cross":m.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[y,.5*S]},{command:"M",values:[.5*y,0]},{command:"L",values:[.5*y,S]}]};break;case"diamond":m.shape={type:"path",path:[{command:"M",values:[0,.5*S]},{command:"L",values:[.5*y,0]},{command:"L",values:[y,.5*S]},{command:"L",values:[.5*y,S]},{command:"Z",values:[]}]},f||(y+=g,S+=g);break;case"square":m.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[y,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},f||(y+=g,S+=g),u&&(x=!0);break;case"triangle":m.shape={type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,S]},{command:"L",values:[0,S]},{command:"Z",values:[]}]},f||(y+=g,S+=g),u&&(x=!0);break;case"x":m.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,S]},{command:"M",values:[y,0]},{command:"L",values:[0,S]}]},u&&(x=!0);break;case"path":m.shape={type:"path",path:t.path||""},f||(y+=g,S+=g),u&&(x=!0),f=!0}break}case j:{var M,k,E;const{width:t,height:n}=G(e),i=(0,A.O0)(p).reduce((t,e)=>t+e,0),o=i&&Math.ceil(T/i),a=null!==(M=null!==n&&void 0!==n?n:h)&&void 0!==M?M:g,s=null!==t&&void 0!==t?t:i*o||T;if(f=!0,"polyline"===(null===e||void 0===e||null===(k=e.geometry)||void 0===k?void 0:k.type)&&null!==e&&void 0!==e&&null!==(E=e.geometry)&&void 0!==E&&E.extent){var w;y=s,S=null!==n&&void 0!==n?n:y;const t=1e3,i=.15*t;v=[y,S],S=v[0]>v[1]?t*v[1]/v[0]:t,y=v[0]>v[1]?t:t*v[0]/v[1],null!==(w=p)&&void 0!==w&&w.width&&(p.width=p.width*t/(v[1]>v[0]?v[1]:v[0]),p.width>i&&(p.width=i)),m.shape={type:"path",path:U(e.geometry,y,S)}}else y=null!=(null===e||void 0===e?void 0:e.maxSize)?Math.min(s,e.maxSize):s,S=a,p&&(p.width=a),m.shape={type:"path",path:[{command:"M",values:[a/2,S/2]},{command:"L",values:[y-a/2,S/2]}]};break}case R:case F:{var b,L,C;const t="object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&!(null===e||void 0===e||null===(b=e.symbolConfig)||void 0===b||!b.isSquareFill),{width:n,height:i}=G(e);y=!t&&n!==i||null==n?null!=h?h:O:n,S=!t&&n!==i||null==i?y:i,f||(y+=g,S+=g),f=!0,null!==e&&void 0!==e&&null!==(L=e.geometry)&&void 0!==L&&L.extent&&"polygon"===(null===e||void 0===e||null===(C=e.geometry)||void 0===C?void 0:C.type)?(v=[y,S],S=v[0]>v[1]?1e3*v[1]/v[0]:1e3,y=v[0]>v[1]?1e3:1e3*v[0]/v[1],m.shape={type:"path",path:U(e.geometry,y,S)}):m.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[y,S]},{command:"L",values:[0,S]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:_.nq.fill[0];break}case Z:{const n=Math.min((0,r.Lz)(t.width),c||W),i=Math.min((0,r.Lz)(t.height),c||W),{width:o,height:a}=G(e),s=o===a&&null!=o?o:null!=h?h:Math.max(n,i),l=t.width/t.height;y=l<=1?Math.ceil(s*l):s,S=l<=1?s:Math.ceil(s/l),m.shape={type:"image",x:-Math.round(y/2),y:-Math.round(S/2),width:y,height:S,src:t.url||""},u&&(x=!0);break}case I:{const n=t,i=(null===e||void 0===e?void 0:e.overrideText)||n.text||q,o=n.font,{width:a,height:s}=G(e),l=null!=s?s:null!=h?h:Math.min((0,r.Lz)(o.size),c||W),{width:u,height:d}=X(i,{weight:o.weight,size:l,family:o.family}),p=/[\uE600-\uE6FF]/.test(i);y=null!==a&&void 0!==a?a:p?l:u,S=p?l:d;let v=.5*(p?l:d);p&&(v+=5),m.shape={type:"text",text:i,x:n.xoffset||0,y:n.yoffset||v,align:"middle",alignBaseline:n.verticalAlignment,decoration:o&&o.decoration,rotated:n.rotated,kerning:n.kerning},m.font=o&&{size:l,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:m,size:[y,S],outputSize:v,renderOptions:{node:null===e||void 0===e?void 0:e.node,scale:f,opacity:null===e||void 0===e?void 0:e.opacity,rotations:[u],useRotationSize:x,cssEffectFilter:null===e||void 0===e?void 0:e.cssEffectFilter,ariaLabel:null===e||void 0===e?void 0:e.ariaLabel,clipBloomEffect:null===e||void 0===e?void 0:e.clipBloomEffect}}}async function V(t,e){var n;const{shapeDescriptor:o,size:a,renderOptions:h,outputSize:c}=K(t,e);if(!o.shape)throw new s.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const n=e.fill,i=t.color;if("pattern"===(null===n||void 0===n?void 0:n.type)&&i&&t.type!==R){const t=await(0,A.rc)(n.src,i.toCss(!0));n.src=t,e.fill=n}}(t,o),await async function(t,e,n,i){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,l.Al)(t.font)}catch(c){}const{width:o,height:a}=G(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){var s,r,h;const{width:l,height:c,x:u,y:d}=X(e.shape.text,{weight:null===(s=e.font)||void 0===s?void 0:s.weight,size:null===(r=e.font)||void 0===r?void 0:r.size,family:null===(h=e.font)||void 0===h?void 0:h.family});n[0]=null!==o&&void 0!==o?o:l,n[1]=null!==a&&void 0!==a?a:c,e.shape.x=u,e.shape.y=d;let p="angle"in t?t.angle:null;if(null!=(null===i||void 0===i?void 0:i.rotation)&&(p=(null!==p&&void 0!==p?p:0)+i.rotation),p){const t=p*(Math.PI/180),e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));n[1]=n[0]*e+n[1]*i}}}(t,o,a,e);const u=[[o]];if("object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&null!==e&&void 0!==e&&null!==(n=e.symbolConfig)&&void 0!==n&&n.applyColorModulation){const t=.6*a[0];u.unshift([(0,i.A)((0,i.A)({},o),{},{offset:[-t,0],fill:(0,_.QC)(o.fill,-.3)})]),u.push([(0,i.A)((0,i.A)({},o),{},{offset:[t,0],fill:(0,_.QC)(o.fill,.3)})]),a[0]+=2*t,h.scale=!1}"text"===t.type&&function(t,e,n,o,a){var s;if(null!=t.haloColor&&null!=t.haloSize){var l;null!==(l=a.masking)&&void 0!==l||(a.masking=n.map(()=>[]));const s=(0,r.Lz)(t.haloSize);o[0]+=s,o[1]+=s,n.unshift([(0,i.A)((0,i.A)({},e),{},{fill:null,stroke:{color:t.haloColor,width:2*s,join:"round",cap:"round"}})]),a.masking.unshift([{shape:{type:"rect",x:0,y:0,width:o[0]+2*B.y7,height:o[1]+2*B.y7},fill:[255,255,255],stroke:null},(0,i.A)((0,i.A)({},e),{},{fill:[0,0,0,0],stroke:null})])}null==t.backgroundColor&&null==t.borderLineColor||(o[0]+=2*B.y7,o[1]+=2*B.y7,n.unshift([{shape:{type:"rect",x:0,y:0,width:o[0],height:o[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,r.Lz)(t.borderLineSize)}}]),null===(s=a.masking)||void 0===s||s.unshift([]))}(t,o,u,a,h);const d=(0,D.fz)(u,a,h);if(c&&d){var p,v,m,g;const t="img"===d.nodeName.toLowerCase()?d:d.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox","0 0 ".concat(a[0].toString()," ").concat(a[1].toString())),t.setAttribute("width",c[0].toString()),t.setAttribute("height",c[1].toString()),c.length>2&&(t.style.setProperty("padding-left",(null===(p=c[2])||void 0===p?void 0:p.toString())+"px"),t.style.setProperty("padding-right",(null===(v=c[2])||void 0===v?void 0:v.toString())+"px"),t.style.setProperty("padding-top",(null===(m=c[3])||void 0===m?void 0:m.toString())+"px"),t.style.setProperty("padding-bottom",(null===(g=c[3])||void 0===g?void 0:g.toString())+"px"),t.style.setProperty("box-sizing","border-box"))}return d}}}]);
//# sourceMappingURL=7287.f405ed2d.chunk.js.map