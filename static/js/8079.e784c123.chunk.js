"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[4429,8079],{3532:(e,t,r)=>{r.d(t,{K:()=>X});var s=r(97255),n=r(61196);function i(e,t){if(!(this instanceof i))return new i(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}function o(e,t,r){if(!r)return t.indexOf(e);for(var s=0;s<t.length;s++)if(r(e,t[s]))return s;return-1}function a(e,t){u(e,0,e.children.length,t,e)}function u(e,t,r,s,n){n||(n=y(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var i,o=t;o<r;o++)i=e.children[o],l(n,e.leaf?s(i):i);return n}function l(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function d(e,t){return e.minX-t.minX}function _(e,t){return e.minY-t.minY}function c(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function p(e,t){var r=Math.max(e.minX,t.minX),s=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),i=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,i-s)}function g(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function m(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function y(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(e,t,r,s,i){for(var o,a=[t,r];a.length;)(r=a.pop())-(t=a.pop())<=s||(o=t+Math.ceil((r-t)/s/2)*s,(0,n.q)(e,o,t,r,i),a.push(t,o,o,r))}i.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],s=this.toBBox;if(!m(e,t))return r;for(var n,i,o,a,u=[];t;){for(n=0,i=t.children.length;n<i;n++)o=t.children[n],m(e,a=t.leaf?s(o):o)&&(t.leaf?r.push(o):g(e,a)?this._all(o,r):u.push(o));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!m(e,t))return!1;for(var s,n,i,o,a=[];t;){for(s=0,n=t.children.length;s<n;s++)if(i=t.children[s],m(e,o=t.leaf?r(i):i)){if(t.leaf||g(e,o))return!0;a.push(i)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var s=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===s.height)this._splitRoot(this.data,s);else{if(this.data.height<s.height){var n=this.data;this.data=s,s=n}this._insert(s,this.data.height-s.height-1,!0)}else this.data=s;return this},insert:function(e){return null!=e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(e,t){if(null==e)return this;for(var r,s,n,i,a=this.data,u=this.toBBox(e),l=[],d=[];a||l.length;){if(a||(a=l.pop(),s=l[l.length-1],r=d.pop(),i=!0),a.leaf&&-1!==(n=o(e,a.children,t)))return a.children.splice(n,1),l.push(a),this._condense(l),this;i||a.leaf||!g(a,u)?s?(r++,a=s.children[r],i=!1):a=null:(l.push(a),d.push(r),r=0,s=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:d,compareMinY:_,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,s){var n,i=r-t+1,o=this._maxEntries;if(i<=o)return a(n=y(e.slice(t,r+1)),this.toBBox),n;s||(s=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/Math.pow(o,s-1))),(n=y([])).leaf=!1,n.height=s;var u,l,d,_,c=Math.ceil(i/o),h=c*Math.ceil(Math.sqrt(o));for(b(e,t,r,h,this.compareMinX),u=t;u<=r;u+=h)for(b(e,u,d=Math.min(u+h-1,r),c,this.compareMinY),l=u;l<=d;l+=c)_=Math.min(l+c-1,d),n.children.push(this._build(e,l,_,s-1));return a(n,this.toBBox),n},_chooseSubtree:function(e,t,r,s){for(var n,i,o,a,u,l,d,_;s.push(t),!t.leaf&&s.length-1!==r;){for(d=_=1/0,n=0,i=t.children.length;n<i;n++)u=c(o=t.children[n]),(l=f(e,o)-u)<_?(_=l,d=u<d?u:d,a=o):l===_&&u<d&&(d=u,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var s=this.toBBox,n=r?e:s(e),i=[],o=this._chooseSubtree(n,this.data,t,i);for(o.children.push(e),l(o,n);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(n,i,t)},_split:function(e,t){var r=e[t],s=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,s);var i=this._chooseSplitIndex(r,n,s),o=y(r.children.splice(i,r.children.length-i));o.height=r.height,o.leaf=r.leaf,a(r,this.toBBox),a(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=y([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var s,n,i,o,a,l,d,_;for(l=d=1/0,s=t;s<=r-t;s++)o=p(n=u(e,0,s,this.toBBox),i=u(e,s,r,this.toBBox)),a=c(n)+c(i),o<l?(l=o,_=s,d=a<d?a:d):o===l&&a<d&&(d=a,_=s);return _},_chooseSplitAxis:function(e,t,r){var s=e.leaf?this.compareMinX:d,n=e.leaf?this.compareMinY:_;this._allDistMargin(e,t,r,s)<this._allDistMargin(e,t,r,n)&&e.children.sort(s)},_allDistMargin:function(e,t,r,s){e.children.sort(s);var n,i,o=this.toBBox,a=u(e,0,t,o),d=u(e,r-t,r,o),_=h(a)+h(d);for(n=t;n<r-t;n++)i=e.children[n],l(a,e.leaf?o(i):i),_+=h(a);for(n=r-t-1;n>=t;n--)i=e.children[n],l(d,e.leaf?o(i):i),_+=h(d);return _},_adjustParentBBoxes:function(e,t,r){for(var s=r;s>=0;s--)l(t[s],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():a(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var w=r(42294);class v{static fromReader(e){const t=[],r=e.copy(),s=(0,w.vt)();for(;r.next();)r.getBounds(s)&&t.push(r.getIndex());const n=i(9,e=>(r.setIndex(e),{minX:r.getBoundsXMin(),minY:r.getBoundsYMin(),maxX:r.getBoundsXMax(),maxY:r.getBoundsYMax()}));return n.load(t),new v(n,t.length)}constructor(e,t){this._index=e,this._size=t}get usedMemory(){return this._size*s.RS}search(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this._index.search(t)}}r(81806);var x=r(15941),I=(r(19555),r(72745)),F=r(65215),T=r(13312),A=r(2413),M=r(14556),S=r(98618),k=r(1484),C=r(24586);(0,I.vt)(),(0,I.vt)();function B(e,t,r,s){if(s.isWebMercator){const s=(0,x.KJ)(e/M.$O.radius),n=s-360*Math.floor((s+180)/360),i=[0,0];return O(i,0,(0,x.KJ)(Math.PI/2-2*Math.atan(Math.exp(-t/M.$O.radius))),n,r),i}const n=(0,C.Cv)({x:e,y:t},s,T.A.WGS84);if(!n)return null;const i=[0,0];return O(i,0,n.y,n.x,r),i}function O(e,t,r,s,n){n%2&&(n+=1);let i=0,o=0,a=-90,u=90,l=-180,d=180;for(let _=0;_<n/2;_++){for(let e=0;e<5;e++){const t=(l+d)/2,r=s>t?1:0;i|=r<<29-(e+5*_),l=(1-r)*l+r*t,d=(1-r)*t+r*d}for(let e=0;e<5;e++){const t=(a+u)/2,s=r>t?1:0;o|=s<<29-(e+5*_),a=(1-s)*a+s*t,u=(1-s)*t+s*u}}e[2*t]=i,e[2*t+1]=o}var W=r(36794),G=r(35495);class D extends W.B{static create(e,t,r,s){const n=G.o.create(e),i=new Array(32);for(let o=0;o<i.length;o++)i[o]=null;return new D(n,t,r,s,i)}constructor(e,t,r,s,n){super(e),this.xNode=t,this.yNode=r,this.depth=s,this.children=n,this._objectIds=new Set,this._count=0,this._xWorldTotal=0,this._yWorldTotal=0,this._xGeohashTotal=0,this._yGeohashTotal=0,this.next=null}static get estimatedMemory(){let e=0;return e+=2*s.qK,e+=32*s.RS,e+=G.o.estimatedMemory,e}get id(){return"".concat(this.xNode,".").concat(this.yNode)}get containedObjectIds(){return this._objectIds}get count(){return this._count}clone(){const e=new D(this._statistics.clone(),this.xNode,this.yNode,this.depth,this.children);return e._count=this._count,e._xWorldTotal=this._xWorldTotal,e._yWorldTotal=this._yWorldTotal,e._xGeohashTotal=this._xGeohashTotal,e._yGeohashTotal=this._yGeohashTotal,e.next=this.next,e._objectIds=new Set(this._objectIds),e}insert(e,t,r,s,n,i){this._count+=1,this._xWorldTotal+=t,this._yWorldTotal+=r,this._xGeohashTotal+=s,this._yGeohashTotal+=n,this._statistics.insert(e,i),this._objectIds.add(e.getObjectId())}merge(e){if(0!==e._count){this._count+=e._count,this._xWorldTotal+=e._xWorldTotal,this._yWorldTotal+=e._yWorldTotal,this._xGeohashTotal+=e._xWorldTotal,this._yGeohashTotal+=e._yWorldTotal,this._statistics.merge(e._statistics);for(const t of e._objectIds.values())this._objectIds.add(t)}}getCentroid(e){throw new Error("getCentroid not supported for GeohashNode")}getGeometry(e,t){const r=this._getLngLatBounds(),[s,n,i,o]=r,a=(0,C.Cv)({rings:[[[s,n],[s,o],[i,o],[i,n],[s,n]]]},T.A.WGS84,e),u=(0,S.Ye)(new k.A,a,!1,!1);return null!=t?(0,S.Nl)(new k.A,u,!1,!1,"esriGeometryPolygon",t,!1,!1):u}getGeometricCentroid(e,t){const r=this._getLngLatBounds(),[s,n,i,o]=r,a=(0,C.Cv)({x:(s+i)/2,y:(n+o)/2},T.A.WGS84,e),u=(0,S.qN)(new k.A,a);return null!=t?(0,S.Nl)(new k.A,u,!1,!1,"esriGeometryPoint",t,!1,!1):u}getAttributes(){const e={aggregateId:this.id};for(const t of this._statistics.values())e[t.field.name]=t.value;return e.aggregateCount=this._count,e}find(e,t,r,s,n,i){if(s>=r)return this;const o=1-s%2,a=3*o+2*(1-o),u=2*o+3*(1-o),l=30-n-a,d=30-i-u,_=((e&7*o+3*(1-o)<<l)>>l)+((t&3*o+7*(1-o)<<d)>>d)*(8*o+4*(1-o)),c=this.children[_];return null==c?null:c.find(e,t,r,s+1,n+a,i+u)}_getLngLatBounds(){const e=this.depth,t=Math.ceil(e/2),r=Math.floor(e/2),s=30-(3*t+2*r),n=30-(2*t+3*r);return function(e,t){let r=-90,s=90,n=-180,i=180;for(let o=0;o<t;o++){const t=Math.ceil((o+1)/2),a=Math.floor((o+1)/2),u=1-o%2,l=30-(3*t+2*a),d=30-(2*t+3*a),_=3*u+2*(1-u),c=2*u+3*(1-u),h=3*u+7*(1-u)<<d,f=(7*u+3*(1-u)<<l&e.geohashX)>>l,p=(h&e.geohashY)>>d;for(let e=_-1;e>=0;e--){const t=(n+i)/2,r=f&1<<e?1:0;n=(1-r)*n+r*t,i=(1-r)*t+r*i}for(let e=c-1;e>=0;e--){const t=(r+s)/2,n=p&1<<e?1:0;r=(1-n)*r+n*t,s=(1-n)*t+n*s}}return[n,r,i,s]}({geohashX:this.xNode<<s,geohashY:this.yNode<<n},this.depth)}}class z{constructor(e){this._fields=e,this._size=0,this._depth=0,this._root=D.create(this._fields,0,0,0)}destroy(){}get size(){return this._size}get depth(){return this._depth}get usedMemory(){return this._size*D.estimatedMemory}find(e,t,r){return this._root.find(e,t,r,0,0,0)}insert(e,t,r,s,n,i,o){let a=this._root,u=0,l=0,d=0;for(;null!==a;){if(a.insert(e,t,r,s,n,o),u>=i)return;const _=Math.ceil((u+1)/2),c=Math.floor((u+1)/2),h=1-u%2,f=30-(3*_+2*c),p=30-(2*_+3*c),g=(s&7*h+3*(1-h)<<f)>>f,m=(n&3*h+7*(1-h)<<p)>>p,y=g+m*(8*h+4*(1-h));l=l<<3*h+2*(1-h)|g,d=d<<2*h+3*(1-h)|m,null==a.children[y]&&(a.children[y]=D.create(this._fields,l,d,u+1),this._depth=Math.max(this._depth,u+1),this._size+=1),u+=1,a=a.children[y]}}putBins(e,t){for(const r of this.getNodes(t)){const t=e.get(r.id);t?t.merge(r):e.set(r.id,r.clone())}}getNodes(e){const t=[],{geohashBounds:r,level:s}=e;let n=this._root;for(;null!==n;){const e=n.depth,i=n.xNode,o=n.yNode;if(e>=s){t.push(n),n=n.next;continue}const a=Math.ceil((e+1)/2),u=Math.floor((e+1)/2),l=1-e%2,d=30-(3*a+2*u),_=30-(2*a+3*u),c=~((1<<d)-1),h=~((1<<_)-1),f=(r.xLL&c)>>d,p=(r.yLL&h)>>_,g=(r.xTR&c)>>d,m=(r.yTR&h)>>_,y=i<<3*l+2*(1-l),b=o<<2*l+3*(1-l),w=y+8*l+4*(1-l),v=b+4*l+8*(1-l),x=Math.max(y,f),I=Math.max(b,p),F=Math.min(w,g),T=Math.min(v,m);let A=null,M=null;for(let t=I;t<=T;t++)for(let e=x;e<=F;e++){const r=e-y+(t-b)*(8*l+4*(1-l)),s=n.children[r];s&&(A||(A=s,A.next=n.next),M&&(M.next=s),M=s,s.next=n.next)}n=A||n.next}return t}}var R=r(77350);class q extends R.n{constructor(e){super(e),this._tree=new z(this._options.fields)}get usedMemory(){return this._tree.usedMemory}put(e){throw new Error("Geohash tree does not support put")}putBounded(e,t,r){const{geohashLevel:s,spatialReference:n}=this._options,i=function(e,t,r,s){const n=[e.xmin,e.ymin,e.xmax,e.ymax],i=F.A.fromExtent((0,A.w1)(n,s)),o=(0,C.Cv)(i,s,T.A.WGS84,{extendedParams:{densificationStep:64*t}});if(!o)return null;const a=(0,S.Ye)(new k.A,o,!1,!1),u=a.coords.filter((e,t)=>!(t%2)),l=a.coords.filter((e,t)=>t%2),d=Math.min(...u),_=Math.min(...l),c=Math.max(...u),h=Math.max(...l),f=B(d,_,r,T.A.WGS84),p=B(c,h,r,T.A.WGS84);return f&&p?{bounds:n,geohashBounds:{xLL:f[0],yLL:f[1],xTR:p[0],yTR:p[1]},level:r}:null}(t,r,s,n);null!=i&&this._tree.putBins(e,i)}_insert(e,t,r,s){const{geohashLevel:n,spatialReference:i}=this._options,o=B(t,r,n,i);o&&this._tree.insert(e,t,r,o[0],o[1],n,s)}}var Y=r(91996),j=r(30248);class X{size(){return this.reader.getSize()}get fields(){return this.reader.fields}invalidate(){this._aggregateIndex=null,this._aggregateIndexHash=null,this._spatialIndex=null}get usedMemory(){let e=0;return e+=this.reader.underlyingMemory,this._aggregateIndex&&(e+=this._aggregateIndex.usedMemory),this._spatialIndex&&(e+=this._spatialIndex.usedMemory),e}registerOverrides(e){this.reader.registerOverrides(e),this.invalidate()}queryFeaturesInBounds(e){const t=this._getSpatialIndex().search(e);return j.e.from(this.reader,t)}getAggregateIndex(e){const t=JSON.stringify(e);if(t!==this._aggregateIndexHash){switch(this._aggregateIndexHash=t,e.type){case"grid":this._aggregateIndex=new Y.H(e);break;case"geohash":this._aggregateIndex=new q(e)}this._aggregateIndex.insert(this.reader,this.isTiled)}return this._aggregateIndex}_getSpatialIndex(){return this._spatialIndex||(this._spatialIndex=v.fromReader(this.reader)),this._spatialIndex}}},21666:(e,t,r)=>{r.d(t,{I:()=>u});var s=r(54099),n=r(81806),i=r(42294),o=r(77859),a=r(80332);class u{constructor(){this._chunks=new Map,this._chunksToRemove=[],this.events=new s.bk,this.featureAdapter=new o.Z}destroy(){this.clear()}clear(){var e;for(const t of this._chunks.values())this._chunksToRemove.push(t);this._chunks.clear(),null===(e=this._overrides)||void 0===e||e.clearWeakOverrides()}get usedMemory(){let e=0;for(const t of this._chunks.values())e+=t.usedMemory;return e}async update(e){if(this._overrides){const t=await a.HJ.create(e);this._overrides.update(t)}this._schema=e}*chunks(){this._overrides&&(yield this._overrides.asChunk()),yield*this._chunks.values()}insert(e){var t;(0,n.A)("esri-2d-update-debug")&&console.debug("Chunk[".concat(e.chunkId,"] SourceChunkStore.insert")),null!==(t=this._overrides)&&void 0!==t&&t.onChunkInsert(e),this._chunks.set(e.chunkId,e),this.events.emit("changed")}remove(e){(0,n.A)("esri-2d-update-debug")&&console.debug("Chunk[".concat(e.chunkId,"] SourceChunkStore.remove")),this._chunks.delete(e.chunkId),this._chunksToRemove.push(e)}removeById(e){(0,n.A)("esri-2d-update-debug")&&console.debug("Chunk[".concat(e,"] SourceChunkStore.remove"));const t=this._chunks.get(e);this._chunks.delete(e),t&&this._chunksToRemove.push(t)}cleanup(){var e;const t=this._chunksToRemove;return this._chunksToRemove=[],null!==(e=this._overrides)&&void 0!==e&&e.cleanup(this._chunks.values()),t}async applyOverride(e){if(null==this._overrides){const e=await a.HJ.create(this._schema);this._overrides=new a.Im(e);for(const t of this._chunks.values())this._overrides.onChunkInsert(t)}this._overrides.apply(e,this),this.events.emit("changed");for(const t of this._chunks.values())t.invalidate()}takeOverrideUpdate(){var e;return null===(e=this._overrides)||void 0===e?void 0:e.takeOverrideUpdate()}refresh(){this.events.emit("refresh")}forEach(e){const t=new Set;for(const r of this.chunks()){const s=r.reader.getCursor();for(;s.next();){const r=s.getObjectId();t.has(r)||(e(s.copy()),t.add(r))}}}forEachUnsafe(e){const t=new Set;for(const r of this.chunks()){const s=r.reader.getCursor();for(;s.next();){const r=s.getObjectId();t.has(r)||(e(s),t.add(r))}}}mapObjectIdsFromGlobalIds(e,t){var r;const s=new Map,n=new Set(e);return null!==(r=this._overrides)&&void 0!==r&&r.putWeakObjectIdsFromGlobalIds(s,n,t),this._forEachUnsafeIgnoreOverrides(e=>{const r=e.readAttribute(t);if(r&&n.has(r)&&!s.has(r)){const t=e.getObjectId();s.set(r,t)}}),s}forEachInBounds(e,t){const r=new Set;for(const s of this.chunks()){const n=s.queryFeaturesInBounds(e);for(;n.next();){const e=n.getObjectId();r.has(e)||(t(n.copy()),r.add(e))}}}forEachBounds(e,t){const r=(0,i.vt)();for(const s of e)s.getBounds(r)&&t(r)}_forEachUnsafeIgnoreOverrides(e){const t=new Set;for(const r of this._chunks.values()){const s=r.reader.withoutOverrides().getCursor();for(;s.next();){const r=s.getObjectId();t.has(r)||(e(s),t.add(r))}}}}},25655:(e,t,r)=>{let s;function n(e){const t=s.__externref_table_alloc();return s.__wbindgen_export_2.set(t,e),t}function i(e,t){try{return e.apply(this,t)}catch(a){const t=n(a);s.__wbindgen_exn_store(t)}}r.r(t),r.d(t,{ColumnDescriptor:()=>j,FieldMetadata:()=>E,GeometryInfo:()=>N,GeometryType:()=>R,MultiscaleGeometryField:()=>U,PageEncodingDescriptor:()=>V,ParquetChunk:()=>J,ParquetFile:()=>K,PrimaryGeometryField:()=>ee,QuantizedGeometryBuffer:()=>re,RangeProviderJs:()=>ne,RowGroup:()=>oe,default:()=>_e,enableTracing:()=>M,initSync:()=>de});let o=null;function a(){return null!==o&&0!==o.byteLength||(o=new Uint8Array(s.memory.buffer)),o}let u=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});u.decode();const l=2146435072;let d=0;function _(e,t){return function(e,t){return d+=t,d>=l&&(u=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),u.decode(),d=t),u.decode(a().subarray(e,e+t))}(e>>>=0,t)}function c(e,t){return e>>>=0,a().subarray(e/1,e/1+t)}let h=null;function f(){return null!==h&&0!==h.byteLength||(h=new Uint32Array(s.memory.buffer)),h}function p(e,t){return e>>>=0,f().subarray(e/4,e/4+t)}let g=0;const m=new TextEncoder;function y(e,t,r){if(void 0===r){const r=m.encode(e),s=t(r.length,1)>>>0;return a().subarray(s,s+r.length).set(r),g=r.length,s}let s=e.length,n=t(s,1)>>>0;const i=a();let o=0;for(;o<s;o++){const t=e.charCodeAt(o);if(t>127)break;i[n+o]=t}if(o!==s){0!==o&&(e=e.slice(o)),n=r(n,s,s=o+3*e.length,1)>>>0;const t=a().subarray(n+o,n+s);o+=m.encodeInto(e,t).written,n=r(n,s,o,1)>>>0}return g=o,n}"encodeInto"in m||(m.encodeInto=function(e,t){const r=m.encode(e);return t.set(r),{read:e.length,written:r.length}});let b=null;function w(){return(null===b||!0===b.buffer.detached||void 0===b.buffer.detached&&b.buffer!==s.memory.buffer)&&(b=new DataView(s.memory.buffer)),b}function v(e){return null==e}const x="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>{s.__wbindgen_export_6.get(e.dtor)(e.a,e.b)});function I(e,t,r,n){const i={a:e,b:t,cnt:1,dtor:r},o=function(){i.cnt++;const e=i.a;i.a=0;try{for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n(e,i.b,...r)}finally{0===--i.cnt?(s.__wbindgen_export_6.get(i.dtor)(e,i.b),x.unregister(i)):i.a=e}};return o.original=i,x.register(o,i,i),o}function F(e,t){e>>>=0;const r=w(),n=[];for(let i=e;i<e+4*t;i+=4)n.push(s.__wbindgen_export_2.get(r.getUint32(i,!0)));return s.__externref_drop_slice(e,t),n}let T=null;function A(){return null!==T&&0!==T.byteLength||(T=new Int16Array(s.memory.buffer)),T}function M(){s.enableTracing()}let S=null;function k(){return null!==S&&0!==S.byteLength||(S=new Float64Array(s.memory.buffer)),S}function C(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name))}function B(e,t){const r=t(8*e.length,8)>>>0;return k().set(e,r/8),g=e.length,r}function O(e,t){const r=t(4*e.length,4)>>>0;for(let s=0;s<e.length;s++){const t=n(e[s]);w().setUint32(r+4*s,t,!0)}return g=e.length,r}function W(e,t){const r=t(1*e.length,1)>>>0;return a().set(e,r/1),g=e.length,r}function G(e,t){const r=t(4*e.length,4)>>>0;return f().set(e,r/4),g=e.length,r}function D(e,t,r){s.closure86_externref_shim(e,t,r)}function z(e,t,r,n){s.closure12_externref_shim(e,t,r,n)}const R=Object.freeze({Point:0,0:"Point",Polygon:1,1:"Polygon",Polyline:2,2:"Polyline",Multipoint:3,3:"Multipoint"}),q=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeBigInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],Y="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_columndescriptor_free(e>>>0,1));class j{static __wrap(e){e>>>=0;const t=Object.create(j.prototype);return t.__wbg_ptr=e,Y.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Y.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_columndescriptor_free(e,0)}name(){let e,t;try{const r=s.columndescriptor_name(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}physicalType(){let e,t;try{const r=s.columndescriptor_physicalType(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}logicalType(){const e=s.columndescriptor_logicalType(this.__wbg_ptr);let t;return 0!==e[0]&&(t=_(e[0],e[1]).slice(),s.__wbindgen_free(e[0],1*e[1],1)),t}encodings(){const e=s.columndescriptor_encodings(this.__wbg_ptr);var t=F(e[0],e[1]).slice();return s.__wbindgen_free(e[0],4*e[1],4),t}pageEncodings(){const e=s.columndescriptor_pageEncodings(this.__wbg_ptr);let t;return 0!==e[0]&&(t=F(e[0],e[1]).slice(),s.__wbindgen_free(e[0],4*e[1],4)),t}numValues(){return s.columndescriptor_numValues(this.__wbg_ptr)}compression(){let e,t;try{const r=s.columndescriptor_compression(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}compressedSize(){return s.columndescriptor_compressedSize(this.__wbg_ptr)}uncompressedSize(){return s.columndescriptor_uncompressedSize(this.__wbg_ptr)}nullCount(){const e=s.columndescriptor_nullCount(this.__wbg_ptr);return 0===e[0]?void 0:e[1]}distinctCount(){const e=s.columndescriptor_distinctCount(this.__wbg_ptr);return 0===e[0]?void 0:e[1]}minValue(){return s.columndescriptor_minValue(this.__wbg_ptr)}maxValue(){return s.columndescriptor_maxValue(this.__wbg_ptr)}}Symbol.dispose&&(j.prototype[Symbol.dispose]=j.prototype.free);const X="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_fieldmetadata_free(e>>>0,1));class E{static __wrap(e){e>>>=0;const t=Object.create(E.prototype);return t.__wbg_ptr=e,X.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,X.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_fieldmetadata_free(e,0)}get column(){return s.__wbg_get_fieldmetadata_column(this.__wbg_ptr)>>>0}set column(e){s.__wbg_set_fieldmetadata_column(this.__wbg_ptr,e)}get name(){let e,t;try{const r=s.fieldmetadata_name(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}get type(){const e=s.fieldmetadata_esri_type(this.__wbg_ptr);return q[e]}get physicalType(){const e=s.fieldmetadata_physical_type(this.__wbg_ptr);let t;return 0!==e[0]&&(t=_(e[0],e[1]).slice(),s.__wbindgen_free(e[0],1*e[1],1)),t}get logicalType(){const e=s.fieldmetadata_logical_type(this.__wbg_ptr);let t;return 0!==e[0]&&(t=_(e[0],e[1]).slice(),s.__wbindgen_free(e[0],1*e[1],1)),t}}Symbol.dispose&&(E.prototype[Symbol.dispose]=E.prototype.free);const P="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_geometryinfo_free(e>>>0,1));class N{static __wrap(e){e>>>=0;const t=Object.create(N.prototype);return t.__wbg_ptr=e,P.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,P.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_geometryinfo_free(e,0)}static new(e,t,r,n,i){C(n,ee);var o=n.__destroy_into_raw();const a=O(i,s.__wbindgen_malloc),u=g,l=s.geometryinfo_new(e,t,r,o,a,u);return N.__wrap(l)}}Symbol.dispose&&(N.prototype[Symbol.dispose]=N.prototype.free);const L="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_multiscalegeometryfield_free(e>>>0,1));class U{static __wrap(e){e>>>=0;const t=Object.create(U.prototype);return t.__wbg_ptr=e,L.register(t,t.__wbg_ptr,t),t}static __unwrap(e){return e instanceof U?e.__destroy_into_raw():0}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,L.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_multiscalegeometryfield_free(e,0)}get level(){return s.__wbg_get_multiscalegeometryfield_level(this.__wbg_ptr)}set level(e){s.__wbg_set_multiscalegeometryfield_level(this.__wbg_ptr,e)}static new(e,t,r,n){const i=y(t,s.__wbindgen_malloc,s.__wbindgen_realloc),o=g,a=B(r,s.__wbindgen_malloc),u=g,l=B(n,s.__wbindgen_malloc),d=g,_=s.multiscalegeometryfield_new(e,i,o,a,u,l,d);return U.__wrap(_)}has_field(e){const t=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=g;return 0!==s.multiscalegeometryfield_has_field(this.__wbg_ptr,t,r)}}Symbol.dispose&&(U.prototype[Symbol.dispose]=U.prototype.free);const Z="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_pageencodingdescriptor_free(e>>>0,1));class V{static __wrap(e){e>>>=0;const t=Object.create(V.prototype);return t.__wbg_ptr=e,Z.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Z.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_pageencodingdescriptor_free(e,0)}pageType(){let e,t;try{const r=s.pageencodingdescriptor_pageType(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}encoding(){let e,t;try{const r=s.pageencodingdescriptor_encoding(this.__wbg_ptr);return e=r[0],t=r[1],_(r[0],r[1])}finally{s.__wbindgen_free(e,t,1)}}count(){return s.pageencodingdescriptor_count(this.__wbg_ptr)}}Symbol.dispose&&(V.prototype[Symbol.dispose]=V.prototype.free);const Q="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_parquetchunk_free(e>>>0,1));class J{static __wrap(e){e>>>=0;const t=Object.create(J.prototype);return t.__wbg_ptr=e,Q.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Q.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_parquetchunk_free(e,0)}size(){return s.parquetchunk_size(this.__wbg_ptr)>>>0}isEmpty(e){return 0!==s.parquetchunk_isEmpty(this.__wbg_ptr,e)}rowId(e){return s.parquetchunk_rowId(this.__wbg_ptr,e)}readX(e){const t=s.parquetchunk_readX(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}readY(e){const t=s.parquetchunk_readY(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}readCoords(e){const t=s.parquetchunk_readCoords(this.__wbg_ptr,e);let r;return 0!==t[0]&&(r=function(e,t){return e>>>=0,k().subarray(e/8,e/8+t)}(t[0],t[1]).slice(),s.__wbindgen_free(t[0],8*t[1],8)),r}readLengths(e){const t=s.parquetchunk_readLengths(this.__wbg_ptr,e);let r;return 0!==t[0]&&(r=p(t[0],t[1]).slice(),s.__wbindgen_free(t[0],4*t[1],4)),r}transformGeometry(e,t,r,n,i,o){C(e,re);const a=s.parquetchunk_transformGeometry(this.__wbg_ptr,e.__wbg_ptr,t,r,n,i,o);return 16777215===a?void 0:0!==a}boundsXMin(e){const t=s.parquetchunk_boundsXMin(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}boundsYMin(e){const t=s.parquetchunk_boundsYMin(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}boundsXMax(e){const t=s.parquetchunk_boundsXMax(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}boundsYMax(e){const t=s.parquetchunk_boundsYMax(this.__wbg_ptr,e);return 0===t[0]?void 0:t[1]}readAttribute(e,t){return s.parquetchunk_readAttribute(this.__wbg_ptr,e,t)}}Symbol.dispose&&(J.prototype[Symbol.dispose]=J.prototype.free);const H="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_parquetfile_free(e>>>0,1));class K{static __wrap(e){e>>>=0;const t=Object.create(K.prototype);return t.__wbg_ptr=e,H.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,H.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_parquetfile_free(e,0)}static fromUrl(e,t,r,n){const i=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),o=g;let a=0;return v(n)||(C(n,N),a=n.__destroy_into_raw()),s.parquetfile_fromUrl(i,o,t,r,a)}static fromBinary(e,t){const r=W(e,s.__wbindgen_malloc),n=g;let i=0;return v(t)||(C(t,N),i=t.__destroy_into_raw()),s.parquetfile_fromBinary(r,n,i)}version(){return s.parquetfile_version(this.__wbg_ptr)}byteLength(){return s.parquetfile_byteLength(this.__wbg_ptr)}numRows(){return s.parquetfile_numRows(this.__wbg_ptr)>>>0}numFields(){return s.parquetfile_numFields(this.__wbg_ptr)>>>0}numColumns(){return s.parquetfile_numColumns(this.__wbg_ptr)>>>0}createdBy(){const e=s.parquetfile_createdBy(this.__wbg_ptr);let t;return 0!==e[0]&&(t=_(e[0],e[1]).slice(),s.__wbindgen_free(e[0],1*e[1],1)),t}keyValueMetadata(e){const t=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=g,n=s.parquetfile_keyValueMetadata(this.__wbg_ptr,t,r);let i;return 0!==n[0]&&(i=_(n[0],n[1]).slice(),s.__wbindgen_free(n[0],1*n[1],1)),i}keys(){const e=s.parquetfile_keys(this.__wbg_ptr);let t;return 0!==e[0]&&(t=F(e[0],e[1]).slice(),s.__wbindgen_free(e[0],4*e[1],4)),t}columnForFieldName(e){const t=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=g,n=s.parquetfile_columnForFieldName(this.__wbg_ptr,t,r);return 4294967297===n?void 0:n}fields(){const e=s.parquetfile_fields(this.__wbg_ptr);var t=F(e[0],e[1]).slice();return s.__wbindgen_free(e[0],4*e[1],4),t}rowGroups(){const e=s.parquetfile_rowGroups(this.__wbg_ptr);var t=F(e[0],e[1]).slice();return s.__wbindgen_free(e[0],4*e[1],4),t}ensureFields(e){const t=G(e,s.__wbindgen_malloc),r=g;return s.parquetfile_ensureFields(this.__wbg_ptr,t,r)}readFirstChunk(e){const t=G(e,s.__wbindgen_malloc),r=g;return s.parquetfile_readFirstChunk(this.__wbg_ptr,t,r)}readChunk(e,t,r,n,i){const o=G(r,s.__wbindgen_malloc),a=g;return s.parquetfile_readChunk(this.__wbg_ptr,e,t,o,a,n,i)}readChunksByRowId(e,t,r,n){const i=G(e,s.__wbindgen_malloc),o=g,a=G(t,s.__wbindgen_malloc),u=g;return s.parquetfile_readChunksByRowId(this.__wbg_ptr,i,o,a,u,r,n)}readAllChunks(e,t,r){const n=G(e,s.__wbindgen_malloc),i=g;return s.parquetfile_readAllChunks(this.__wbg_ptr,n,i,t,r)}queryZChunks(e,t,r,n){const i=G(t,s.__wbindgen_malloc),o=g;return s.parquetfile_queryZChunks(this.__wbg_ptr,e,i,o,r,n)}queryXZChunks(e,t,r){return s.parquetfile_queryXZChunks(this.__wbg_ptr,e,t,r)}}Symbol.dispose&&(K.prototype[Symbol.dispose]=K.prototype.free);const $="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_primarygeometryfield_free(e>>>0,1));class ee{static __wrap(e){e>>>=0;const t=Object.create(ee.prototype);return t.__wbg_ptr=e,$.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,$.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_primarygeometryfield_free(e,0)}static fromNative(e){const t=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=g,n=s.primarygeometryfield_fromNative(t,r);return ee.__wrap(n)}static fromWkb(e){const t=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),r=g,n=s.primarygeometryfield_fromWkb(t,r);return ee.__wrap(n)}static fromLocation(e,t){const r=y(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=g,i=y(t,s.__wbindgen_malloc,s.__wbindgen_realloc),o=g,a=s.primarygeometryfield_fromLocation(r,n,i,o);return ee.__wrap(a)}}Symbol.dispose&&(ee.prototype[Symbol.dispose]=ee.prototype.free);const te="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_quantizedgeometrybuffer_free(e>>>0,1));class re{static __wrap(e){e>>>=0;const t=Object.create(re.prototype);return t.__wbg_ptr=e,te.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,te.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_quantizedgeometrybuffer_free(e,0)}static new(){const e=s.quantizedgeometrybuffer_new();return re.__wrap(e)}readCoordsUnsafe(){return s.quantizedgeometrybuffer_readCoordsUnsafe(this.__wbg_ptr)}readLengthsUnsafe(){return s.quantizedgeometrybuffer_readLengthsUnsafe(this.__wbg_ptr)}}Symbol.dispose&&(re.prototype[Symbol.dispose]=re.prototype.free);const se="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_rangeproviderjs_free(e>>>0,1));class ne{static __wrap(e){e>>>=0;const t=Object.create(ne.prototype);return t.__wbg_ptr=e,se.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,se.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_rangeproviderjs_free(e,0)}static new(e,t){const r=s.rangeproviderjs_new(e,t);return ne.__wrap(r)}static withFetch(){const e=s.rangeproviderjs_withFetch();return ne.__wrap(e)}}Symbol.dispose&&(ne.prototype[Symbol.dispose]=ne.prototype.free);const ie="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>s.__wbg_rowgroup_free(e>>>0,1));class oe{static __wrap(e){e>>>=0;const t=Object.create(oe.prototype);return t.__wbg_ptr=e,ie.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ie.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_rowgroup_free(e,0)}columnDescriptorForAttribute(e){const t=s.rowgroup_columnDescriptorForAttribute(this.__wbg_ptr,e);return j.__wrap(t)}}Symbol.dispose&&(oe.prototype[Symbol.dispose]=oe.prototype.free);const ae=new Set(["basic","cors","default"]);function ue(){const e={wbg:{}};return e.wbg.__wbg_aborted_bbd6fc8f83561eda=function(e){return e.aborted},e.wbg.__wbg_apply_dc50eb58583d2a57=function(){return i(function(e,t,r){return e.apply(t,r)},arguments)},e.wbg.__wbg_call_13410aac570ffff7=function(){return i(function(e,t){return e.call(t)},arguments)},e.wbg.__wbg_call_a5400b25a865cfd8=function(){return i(function(e,t,r){return e.call(t,r)},arguments)},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let r,n;try{r=e,n=t,console.error(_(e,t))}finally{s.__wbindgen_free(r,n,1)}},e.wbg.__wbg_fieldmetadata_new=function(e){return E.__wrap(e)},e.wbg.__wbg_get_458e874b43b18b25=function(){return i(function(e,t){return Reflect.get(e,t)},arguments)},e.wbg.__wbg_length_555ae304a7c78975=function(e){return e.length},e.wbg.__wbg_length_6bb7e81f9d7713e4=function(e){return e.length},e.wbg.__wbg_multiscalegeometryfield_unwrap=function(e){return U.__unwrap(e)},e.wbg.__wbg_new_2e3c58a15f39f5f9=function(e,t){try{var r={a:e,b:t};return new Promise((e,t)=>{const s=r.a;r.a=0;try{return z(s,r.b,e,t)}finally{r.a=s}})}finally{r.a=r.b=0}},e.wbg.__wbg_new_638ebfaedbf32a5e=function(e){return new Uint8Array(e)},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_newnoargs_254190557c45b4ec=function(e,t){return new Function(_(e,t))},e.wbg.__wbg_newwithlength_c2868113efe93526=function(e){return new Array(e>>>0)},e.wbg.__wbg_pageencodingdescriptor_new=function(e){return V.__wrap(e)},e.wbg.__wbg_parquetchunk_new=function(e){return J.__wrap(e)},e.wbg.__wbg_parquetfile_new=function(e){return K.__wrap(e)},e.wbg.__wbg_prototypesetcall_3d4a26c1ed734349=function(e,t,r){Uint8Array.prototype.set.call(c(e,t),r)},e.wbg.__wbg_prototypesetcall_c805289d23423a87=function(e,t,r){Uint32Array.prototype.set.call(p(e,t),r)},e.wbg.__wbg_queueMicrotask_25d0739ac89e8c88=function(e){queueMicrotask(e)},e.wbg.__wbg_queueMicrotask_4488407636f5bf24=function(e){return e.queueMicrotask},e.wbg.__wbg_resolve_4055c623acdd6a1b=function(e){return Promise.resolve(e)},e.wbg.__wbg_rowgroup_new=function(e){return oe.__wrap(e)},e.wbg.__wbg_set_90f6c0f7bd8c0415=function(e,t,r){e[t>>>0]=r},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){const r=y(t.stack,s.__wbindgen_malloc,s.__wbindgen_realloc),n=g;w().setInt32(e+4,n,!0),w().setInt32(e+0,r,!0)},e.wbg.__wbg_static_accessor_GLOBAL_8921f820c2ce3f12=function(){const e="undefined"==typeof global?null:global;return v(e)?0:n(e)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_f0a4409105898184=function(){const e="undefined"==typeof globalThis?null:globalThis;return v(e)?0:n(e)},e.wbg.__wbg_static_accessor_SELF_995b214ae681ff99=function(){const e="undefined"==typeof self?null:self;return v(e)?0:n(e)},e.wbg.__wbg_static_accessor_WINDOW_cde3890479c675ea=function(){const e="undefined"==typeof window?null:window;return v(e)?0:n(e)},e.wbg.__wbg_then_b33a773d723afa3e=function(e,t,r){return e.then(t,r)},e.wbg.__wbg_then_e22500defe16819f=function(e,t){return e.then(t)},e.wbg.__wbg_valueOf_f1ef20623c7bdd1c=function(e){return e.valueOf()},e.wbg.__wbg_wbindgencbdrop_eb10308566512b88=function(e){const t=e.original;return 1==t.cnt--&&(t.a=0,!0)},e.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(e){return"function"==typeof e},e.wbg.__wbg_wbindgenisundefined_c4b71d073b92f3c5=function(e){return void 0===e},e.wbg.__wbg_wbindgennumberget_f74b4c7525ac05cb=function(e,t){const r="number"==typeof t?t:void 0;w().setFloat64(e+8,v(r)?0:r,!0),w().setInt32(e+0,!v(r),!0)},e.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(e,t){throw new Error(_(e,t))},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return _(e,t)},e.wbg.__wbindgen_cast_59b536ec5375efa9=function(e,t){return I(e,t,85,D)},e.wbg.__wbindgen_cast_77bc3e92745e9a35=function(e,t){var r=c(e,t).slice();return s.__wbindgen_free(e,1*t,1),r},e.wbg.__wbindgen_cast_7c316abdc43840a3=function(e,t){return p(e,t)},e.wbg.__wbindgen_cast_9ae0607507abb057=function(e){return e},e.wbg.__wbindgen_cast_b4c60c1010b00353=function(e,t){var r=F(e,t).slice();return s.__wbindgen_free(e,4*t,4),r},e.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},e.wbg.__wbindgen_cast_e47ceb6027f5c92c=function(e,t){return function(e,t){return e>>>=0,A().subarray(e/2,e/2+t)}(e,t)},e.wbg.__wbindgen_init_externref_table=function(){const e=s.__wbindgen_export_2,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},e}function le(e,t){return s=e.exports,_e.__wbindgen_wasm_module=t,b=null,S=null,T=null,h=null,o=null,s.__wbindgen_start(),s}function de(e){if(void 0!==s)return s;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module:e}=e):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const t=ue();return e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e)),le(new WebAssembly.Instance(e,t),e)}async function _e(e){if(void 0!==s)return s;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead"));const t=ue();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:r,module:n}=await async function(e,r){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,r)}catch(t){if(!e.ok||!ae.has(e.type)||"application/wasm"===e.headers.get("Content-Type"))throw t;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t)}const s=await e.arrayBuffer();return await WebAssembly.instantiate(s,r)}{const t=await WebAssembly.instantiate(e,r);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}(await e,t);return le(r,n)}},27428:(e,t,r)=>{r.d(t,{s:()=>u});r(81806);var s=r(97255),n=r(1484),i=r(25655),o=r(93210);let a;class u extends o.Y{constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Uint32Array(r.size());super(e),this._fields=t,this._inner=r,this._chunkId=n,this._fileIndex=i,this._displayIds=o,this._index=-1,this.usedMemory=s.qK,this._size=this._inner.size(),e.featureIdInfo.type,this._chunkId>65535&&console.error("Exceeded max allowed parquet reader size")}destroy(){super.destroy(),this._inner.free()}get fields(){return this._fields}get geometryType(){return this.metadata.geometryType}get hasFeatures(){return!0}get hasNext(){throw new Error("Method not implemented.")}get exceededTransferLimit(){return!1}get hasZ(){return!1}get hasM(){return!1}getInTransform(){return null}getSize(){return this._size}getCursor(){return this.copy()}getAttributeHash(){let e="";for(const t of this.fields.fields)e+=this._readAttribute(t.name,!1)+".";return e}getObjectId(){return this._fileIndex<<24|this._inner.rowId(this._index)}getDisplayId(){return this._displayIds[this._index]}setDisplayId(e){this._displayIds[this._index]=e}setIndex(e){this._index=e}getBoundsXMin(){return this._inner.boundsXMin(this._index)}getBoundsYMin(){return this._inner.boundsYMin(this._index)}getBoundsXMax(){return this._inner.boundsXMax(this._index)}getBoundsYMax(){return this._inner.boundsYMax(this._index)}setBoundsXMin(e){throw new Error("InternalError: Setting bounds is unsupported")}setBoundsYMin(e){throw new Error("InternalError: Setting bounds is unsupported")}setBoundsXMax(e){throw new Error("InternalError: Setting bounds is unsupported")}setBoundsYMax(e){throw new Error("InternalError: Setting bounds is unsupported")}getIndex(){return this._index}next(){for(;++this._index<this._size&&!this._getExists(););return this._index<this._size}readGeometryArea(){var e,t;return null!==(e=null===(t=this.readGeometryForDisplay())||void 0===t?void 0:t.area())&&void 0!==e?e:0}copy(){const e=new u(this.metadata,this._fields,this._inner,this._chunkId,this._fileIndex,this._displayIds);return this.copyInto(e),e}copyInto(e){super.copyInto(e),e._index=this._index}readGeometryForDisplayTransformed(e){const[t,r]=e.translate,[s,o]=e.scale;return a||(a=i.QuantizedGeometryBuffer.new()),this._inner.transformGeometry(a,t,r,s,o,this._index)?new n.A(a.readLengthsUnsafe(),a.readCoordsUnsafe()):null}_readGeometry(e){const t=this._inner.readCoords(this._index),r=this._inner.readLengths(this._index);return t&&r?new n.A(r,t):null}_readX(){return this._inner.readX(this._index)}_readY(){return this._inner.readY(this._index)}_readServerCentroid(){return null}_readAttribute(e,t){const r=this.fields.get(e);if(!r)return;if(null==r.column)return this.getObjectId();const s=this._inner.readAttribute(this._index,r.column);if(null==s)return s;const n=this.fields.isDateField(r.name);return t?null==s?s:n?new Date(s):s:s}_readAttributes(){const e={};for(const t of this._fields.fields)null!=t.column&&(this._inner.isEmpty(t.column)||(e[t.name]=this._readAttribute(t.name,!1)));return e.__OBJECTID=this.getObjectId(),e}}},30248:(e,t,r)=>{r.d(t,{e:()=>u});var s=r(89379),n=r(97255),i=r(76279),o=r(98618),a=r(93210);class u extends a.Y{static from(e,t){if(e instanceof this){const r=new Set(t),s=e._indices.filter(e=>r.has(e));return new u(e._reader,s)}return new u(e.copy(),t)}constructor(e,t){super(e.metadata),this._currentIndex=-1,this._displayTransform=null,this._reader=e,this._indices=t}setTransformForDisplay(e){const t=this._reader.getInTransform();if(null==t)return void(this._displayTransform=(0,i.Q1)(e));const r=(0,i.Q1)(t),s=(0,i.Q1)(e),[n,o]=r.scale,[a,u]=r.translate,[l,d]=s.scale,[_,c]=s.translate,h=n/l,f=o/d,p=(a-_)/l,g=(u-c)/d;this._displayTransform={originPosition:"lowerLeft",scale:[1/h,1/f,1,1],translate:[-p/h,-g/f,0,0]}}getInTransform(){return this._reader.getInTransform()}get fields(){return this._reader.fields}get hasNext(){return this._currentIndex+1<this._indices.length}getSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new u(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e._displayTransform=this._displayTransform,e._processorAttributes=this._processorAttributes,e}get contextTimeZone(){return this._reader.contextTimeZone}set contextTimeZone(e){this._reader.contextTimeZone=e}get usedMemory(){return n.qK+this._reader.usedMemory}setProcessorAttributes(e){var t;this._processorAttributes=Object.assign(null!==(t=this._processorAttributes)&&void 0!==t?t:{},e)}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}next(){for(;this._nextIndex()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}readXForDisplay(){return this._displayTransform?(0,i.IE)(this._displayTransform,this._reader.readXForDisplay()):this._reader.readXForDisplay()}readYForDisplay(){return this._displayTransform?(0,i.B2)(this._displayTransform,this._reader.readYForDisplay()):this._reader.readYForDisplay()}readGeometryForDisplay(){return this._displayTransform?this._reader.readGeometryForDisplayTransformed(this._displayTransform):this._reader.readGeometryForDisplay()}readCentroidForDisplay(){var e;const t=null===(e=this._reader.readCentroidForDisplay())||void 0===e?void 0:e.clone();if(t){const[e,r]=t.coords;this._displayTransform?(t.coords[0]=(0,i.IE)(this._displayTransform,e),t.coords[1]=(0,i.B2)(this._displayTransform,r)):(t.coords[0]=e,t.coords[1]=r)}return t}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}readAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._reader.readAttribute(e,t);return null==r&&this._processorAttributes?this._processorAttributes[e]:r}readAttributes(){return(0,s.A)((0,s.A)({},this._processorAttributes),this._reader.readAttributes())}joinAttributes(e){return this._reader.joinAttributes(e)}getBounds(e){return this._reader.getBounds(e)}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readXWorldSpace(){return this._reader.readXWorldSpace()}readYWorldSpace(){return this._reader.readYWorldSpace()}_readX(){return this._reader.readXForDisplay()}_readY(){return this._reader.readYForDisplay()}_readServerCentroid(){return this._reader._readServerCentroid()}readLegacyFeatureForDisplay(){var e;const t=this.readCentroidForDisplay();return{attributes:this.readAttributes(),geometry:this.readLegacyGeometryForDisplay(),centroid:null!==(e=t&&{x:t.coords[0],y:t.coords[1]})&&void 0!==e?e:null}}readLegacyGeometryForDisplay(){const e=this.readGeometryForDisplay();return(0,o.zv)(e,this.geometryType,!1,!1)}readGeometryArea(){var e,t;return this._displayTransform?null!==(e=null===(t=this._reader.readGeometryForDisplayTransformed(this._displayTransform))||void 0===t?void 0:t.area())&&void 0!==e?e:0:this._reader.readGeometryArea()}readGeometryWorldSpace(){return this._reader.readGeometryWorldSpace()}_readGeometry(){return this._reader._readGeometry()}_readAttribute(e,t){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this._reader.field(e)}hasField(e){return this._reader.hasField(e)}setField(e,t){return this._reader.setField(e,t)}keys(){return this._reader.keys()}castToText(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._reader.castToText(e)}}},34429:(e,t,r)=>{r.d(t,{QueueProcessor:()=>d});var s=r(30726),n=r(50346),i=r(59649),o=r(67993),a=r(52394),u=r(75540);class l{constructor(e,t){this.item=e,this.controller=t,this.promise=null}}class d{constructor(e){this._schedule=null,this._deferreds=new o.A,this._controllers=new o.A,this._processingItems=new o.A,this._pausedSignal=(0,u.v)(!1),this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new i.A(e.peeker),this.process=e.process}destroy(){this.clear(),this._schedule=(0,s.xt)(this._schedule)}get updating(){return this.running}get length(){return this._processingItems.size+this._queue.length}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}abort(e){const t=this._controllers.get(e);t&&t.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(t=>e.push(t)),this._controllers.clear(),e.forEach(e=>e.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((t,r)=>e(r))}get(e){const t=this._deferreds.get(e);return t?t.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,t){const r=this.get(e);if(r)return r;const s=new AbortController;let i=null;t&&(i=(0,n.u7)(t,()=>s.abort()));const o=()=>{a.remove(),null!=i&&i.remove(),this._removeItem(e),this._queue.remove(e),this._scheduleNext()},a=(0,n.NY)(s.signal,()=>{const t=this._processingItems.get(e);t&&t.controller.abort(),o(),u.reject((0,n.NK)())}),u=(0,n.Tw)();return this._deferreds.set(e,u),this._controllers.set(e,s),u.promise.then(o,o),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}lastPromise(){const e=this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){var e;const t=this._queue.popLast();return t&&(null!==(e=this._deferreds.get(t))&&void 0!==e&&e.reject((0,n.NK)()),this._removeItem(t)),t}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const t of e)this._queue.push(t.item),t.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}_removeItem(e){this._deferreds.delete(e),this._controllers.delete(e),this._processingItems.delete(e)}_scheduleNext(){this._pausedSignal.value||this._schedule||(this._schedule=(0,a._)(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(t))}_processError(e,t){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(t))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(null==e)return;let t;const r=new AbortController,s=new l(e,r);this._processingItems.set(e,s);try{t=this.process(e,r.signal)}catch(i){this._processError(s,i)}(0,n.$X)(t)?(s.promise=t,t.then(e=>this._processResult(s,e),e=>this._processError(s,e))):this._processResult(s,t)}}},35495:(e,t,r)=>{r.d(t,{o:()=>o});var s=r(97255),n=r(58817);const i=Math.PI/180;class o{static create(e){return new o(e.map(e=>function(e){switch(e.statisticType){case"min":return new u(e);case"max":return new l(e);case"avg":return new _(e);case"avg_angle":return new c(e);case"sum":case"count":return new d(e);case"mode":return new h(e)}}(e)))}constructor(e){this._statistics=e}static get estimatedMemory(){return s.qK+4*s.qK}values(){return this._statistics.values()}insert(e,t){for(const r of this._statistics)r.insert(e,t)}merge(e){for(let t=0;t<this._statistics.length;t++){const r=this._statistics[t],s=e._statistics[t];if(r.field.name!==s.field.name)throw new Error("InternalError: Tried to merge incompatible statistics");r.merge(s)}}clone(){return new o(this._statistics.map(e=>e.clone()))}}class a{constructor(e){this.field=e}insert(e,t){if(!this.field.computed)return;const r=this.field.computed.read(e,t);(0,n.rZ)(r)||this._insertValue(r)}}class u extends a{constructor(){super(...arguments),this.type="min",this.value=Number.MAX_VALUE}_insertValue(e){this.value=Math.min(this.value,e)}merge(e){this.value=Math.min(this.value,e.value)}clone(){const e=new u(this.field);return e.value=this.value,e}}class l extends a{constructor(){super(...arguments),this.type="max",this.value=Number.MIN_VALUE}_insertValue(e){this.value=Math.max(this.value,e)}merge(e){this.value=Math.max(this.value,e.value)}clone(){const e=new l(this.field);return e.value=this.value,e}}class d extends a{constructor(){super(...arguments),this.type="sum",this.value=0}_insertValue(e){this.value+=e}merge(e){this.value+=e.value}clone(){const e=new d(this.field);return e.value=this.value,e}}class _ extends a{constructor(){super(...arguments),this.type="avg",this._total=0,this._count=0}get value(){return this._total/this._count}_insertValue(e){this._total+=e,this._count+=1}merge(e){this._total+=e._total,this._count+=e._count}clone(){const e=new _(this.field);return e._total=this._total,e._count=this._count,e}}class c extends a{constructor(){super(...arguments),this.type="avg_angle",this._x=0,this._y=0,this._count=0}get value(){const e=this._x/this._count,t=this._y/this._count,r=180/Math.PI;return Math.atan2(t,e)*r}_insertValue(e){this._x=this._x+Math.cos(e*i),this._y=this._y+Math.sin(e*i),this._count+=1}merge(e){this._x+=e._x,this._y+=e._y,this._count+=e._count}clone(){const e=new c(this.field);return e._x=this._x,e._y=this._y,e._count=this._count,e}}class h extends a{constructor(){super(...arguments),this._frequencies=new Map}get value(){let e,t=0;for(const[r,s]of this._frequencies.entries())s>t&&(t=s,e=r);return e}_insertValue(e){const t=this._frequencies.get(e);null!=t?this._frequencies.set(e,t+1):this._frequencies.set(e,1)}merge(e){for(const[t,r]of e._frequencies.entries()){const e=this._frequencies.get(t);null!=e?this._frequencies.set(t,e+r):this._frequencies.set(t,r)}}clone(){const e=new h(this.field);return e._frequencies=new Map(this._frequencies),e}}},36794:(e,t,r)=>{r.d(t,{B:()=>s});class s{constructor(e){this._statistics=e}get statistics(){return this._statistics}}},40296:(e,t,r)=>{r.d(t,{F0:()=>u,Vx:()=>_,e2:()=>h,f:()=>f});var s=r(89379),n=r(81806),i=r(53084),o=r(8298),a=r(44460);function u(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?a.Cb:"esriGeometryPolyline"===e?a.yM:a.WR}}}const l=/^[_$a-zA-Z][_$a-zA-Z0-9]*$/;let d=1;function _(e,t){if((0,n.A)("esri-csp-restrictions"))return()=>(0,s.A)({[t]:null},e);try{let r="this".concat(c(t)," = null;");for(const t in e)r+="this".concat(c(t)," = ").concat(JSON.stringify(e[t]),";");const s=new Function("\n      return class AttributesClass$".concat(d++," {\n        constructor() {\n          ").concat(r,";\n        }\n      }\n    "))();return()=>new s}catch(r){return()=>(0,s.A)({[t]:null},e)}}function c(e){return l.test(e)?".".concat(e):'["'.concat(e,'"]')}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"New Feature",description:"",prototype:{attributes:(0,i.o8)(e)}}]}function f(e,t){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!0,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0,supportsAsyncConvert3D:!1},query:o.F,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},queryAttributeBins:o.P,editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}},48068:(e,t,r)=>{r.d(t,{y:()=>n});var s=r(97255);class n{static fromBuffer(e,t){return new n(e,t)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295;const r=new Uint32Array(Math.ceil(e/32));return new n(r,t)}constructor(e,t){this._mask=0,this._buf=e,this._mask=t}_getIndex(e){return Math.floor(e/32)}get usedMemory(){return(0,s.Qf)(this._buf)}has(e){const t=this._mask&e;return!!(this._buf[this._getIndex(t)]&1<<t%32)}hasRange(e,t){let r=e,s=t;for(;r%32&&r!==s;){if(this.has(r))return!0;r++}for(;s%32&&r!==s;){if(this.has(r))return!0;s--}if(r===s)return!1;for(let n=r/32;n!==s/32;n++)if(this._buf[n])return!0;return!1}set(e){const t=this._mask&e,r=this._getIndex(t),s=1<<t%32;this._buf[r]|=s}setRange(e,t){let r=e,s=t;for(;r%32&&r!==s;)this.set(r++);for(;s%32&&r!==s;)this.set(s--);if(r!==s)for(let n=r/32;n!==s/32;n++)this._buf[n]=4294967295}unset(e){const t=this._mask&e,r=this._getIndex(t),s=1<<t%32;this._buf[r]&=4294967295^s}resize(e){const t=this._buf,r=new Uint32Array(Math.ceil(e/32));r.set(t),this._buf=r}or(e){for(let t=0;t<this._buf.length;t++)this._buf[t]|=e._buf[t];return this}and(e){for(let t=0;t<this._buf.length;t++)this._buf[t]&=e._buf[t];return this}xor(e){for(let t=0;t<this._buf.length;t++)this._buf[t]^=e._buf[t];return this}ior(e){for(let t=0;t<this._buf.length;t++)this._buf[t]|=~e._buf[t];return this}iand(e){for(let t=0;t<this._buf.length;t++)this._buf[t]&=~e._buf[t];return this}ixor(e){for(let t=0;t<this._buf.length;t++)this._buf[t]^=~e._buf[t];return this}any(){for(let e=0;e<this._buf.length;e++)if(this._buf[e])return!0;return!1}copy(e){for(let t=0;t<this._buf.length;t++)this._buf[t]=e._buf[t];return this}clone(){return new n(this._buf.slice(),this._mask)}clear(){for(let e=0;e<this._buf.length;e++)this._buf[e]=0;return this}forEachSet(e){for(let t=0;t<this._buf.length;t++){let r=this._buf[t],s=32*t;if(r)for(;r;)1&r&&e(s),r>>>=1,s++}}countSet(){let e=0;return this.forEachSet(t=>{e++}),e}}},55147:(e,t,r)=>{r.d(t,{P:()=>i});var s=r(97255),n=r(48068);class i{constructor(e){this._valid=n.y.create(e),this._data=new Array(e)}get usedMemory(){let e=this._valid.usedMemory;if(this._data.length>0){const t="string"==typeof this._data[0]?64:s.RS;e+=this._data.length*t}return e}has(e){return this._valid.has(e)}set(e,t){this._valid.set(e),this._data[e]=t}get(e){return this._data[e]}}},58817:(e,t,r)=>{r.d(t,{OP:()=>o,V4:()=>n,rZ:()=>i});r(81806);var s=r(76460);function n(e,t,r){var n;if(null==e)return null;const i=t.readArcadeFeature();t.contextTimeZone=null===(n=r.$view)||void 0===n?void 0:n.timeZone;try{return e.evaluate(i,r)}catch(o){return s.A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",o),null}}function i(e){return null==e||e===1/0||e===-1/0||"number"==typeof e&&isNaN(e)}function o(e,t,r,s){var n;if(null==e)return null!=s?s:null;const o=t.readArcadeFeature();t.contextTimeZone=null===(n=r.$view)||void 0===n?void 0:n.timeZone;const a=e.evaluate(o,r);return i(a)?null!=s?s:null:a}},61137:(e,t,r)=>{r.d(t,{j:()=>n});var s=r(3532);class n extends s.K{constructor(e,t,r,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),this._reader=e,this._queryJSON=t,this._page=r,this._end=s,this._fileIndex=n,this.chunkId="".concat(this._fileIndex,".").concat(this._page).concat(this.end?"e":""),this.normalizedChunkId=this.chunkId}get reader(){return this._reader}get first(){return 0===this._page}get end(){return this._end}get queryInfo(){return{type:"snapshot",chunkId:this.chunkId,queryJSON:this._queryJSON,page:this._page,size:this.size(),end:this.end}}get isTiled(){return!1}getTileReader(e){const t=this.queryFeaturesInBounds(e.bounds);return t.setTransformForDisplay(e.transform),t}}},62812:(e,t,r)=>{r.d(t,{L:()=>u});var s=r(89379),n=r(98618),i=r(1484),o=r(36794),a=r(35495);class u extends o.B{static createId(e,t){return"".concat(e,".").concat(t)}static create(e,t,r,s){return new u(e,t,a.o.create(r),s)}constructor(e,t,r,s){super(r),this.gridX=e,this.gridY=t,this._worldUnitsPerCell=s,this._count=0,this._xWorldTotal=0,this._yWorldTotal=0,this._objectIds=new Set}get id(){return u.createId(this.gridX,this.gridY)}get containedObjectIds(){return this._objectIds}get count(){return this._count}get firstObjectId(){return this._objectIds.values().next().value}get centroidXWorld(){return this._xWorldTotal/this._count}get centroidYWorld(){return this._yWorldTotal/this._count}get usedMemory(){return 48}clone(){const e=new u(this.gridX,this.gridY,this._statistics.clone(),this._worldUnitsPerCell);return e._count=this._count,e._xWorldTotal=this._xWorldTotal,e._yWorldTotal=this._yWorldTotal,e._firstFeatureAttributes=this._firstFeatureAttributes,e._objectIds=new Set(this._objectIds),e}insert(e,t,r,s){0===this._count?this._firstFeatureAttributes=e.readAttributes():this._firstFeatureAttributes=null,this._count+=1,this._xWorldTotal+=r,this._yWorldTotal+=s,this._statistics.insert(e,t),this._objectIds.add(e.getObjectId())}merge(e){if(0!==e._count){this._count+=e._count,this._firstFeatureAttributes=e._firstFeatureAttributes,this._xWorldTotal+=e._xWorldTotal,this._yWorldTotal+=e._yWorldTotal,this._statistics.merge(e._statistics);for(const t of e._objectIds.values())this._objectIds.add(t)}}getCentroidX(e){return null==e?this.centroidXWorld:(0,n.IE)(e,this.centroidXWorld)}getCentroidY(e){return null==e?this.centroidYWorld:(0,n.B2)(e,this.centroidYWorld)}getGeometry(e,t){const r=this.gridX*this._worldUnitsPerCell,s=this.gridY*this._worldUnitsPerCell,o=new i.A([4],[r,s,r+this._worldUnitsPerCell,s,r+this._worldUnitsPerCell,s+this._worldUnitsPerCell,r,s+this._worldUnitsPerCell]);if(null!=t){const e=new i.A;return(0,n.Nl)(e,o,!1,!1,"esriGeometryPolygon",t)}return o}getCentroid(e){const t=new i.A([],[this.centroidXWorld,this.centroidYWorld]);if(null!=e){const r=new i.A;return(0,n.Nl)(r,t,!1,!1,"esriGeometryPoint",e)}return t}getGeometricCentroid(e,t){const r=this.gridX*this._worldUnitsPerCell+.5*this._worldUnitsPerCell,s=this.gridY*this._worldUnitsPerCell+.5*this._worldUnitsPerCell,o=new i.A([],[r,s]);if(null!=t){const e=new i.A;return(0,n.Nl)(e,o,!1,!1,"esriGeometryPoint",t)}return o}getAttributes(){const e={aggregateId:this.id};for(const t of this._statistics.values())e[t.field.name]=t.value;return null!=this._firstFeatureAttributes?(0,s.A)((0,s.A)({},e),this._firstFeatureAttributes):e}}},66422:(e,t,r)=>{function s(e,t){let{timeZone:r,timeExtent:s}=t;return{$view:{scale:e,timeZone:r,timeProperties:{currentStart:null===s||void 0===s?void 0:s.start,currentEnd:null===s||void 0===s?void 0:s.end}}}}r.d(t,{N:()=>s})},67103:(e,t,r)=>{r.d(t,{DV:()=>p,Hj:()=>m,hD:()=>g});var s=r(3825),n=r(50076),i=(r(81806),r(34429)),o=r(90534),a=r(28899);let u=null;async function l(){return u||(u=async function(){const e=await Promise.resolve().then(r.bind(r,25655));return await e.default({module_or_path:(0,a.s)("esri/libs/parquet/pkg/bundle_bg.wasm")}),e}()),u}var d=r(25655);const _=new i.QueueProcessor({concurrency:8,process:async e=>{const{data:t}=await(0,s.A)(e.url,e.options);return t}}),c=e=>async function(t,r,s,n){const i=null===e||void 0===e?void 0:e(),o=null!==i&&void 0!==i?i:{};return await _.push({url:t,options:{responseType:"array-buffer",query:o,headers:{range:"bytes=".concat(r,"-").concat(s)}}})},h=e=>async function(t){if((0,o.w8)(t)){const{data:e}=await(0,s.A)(t,{responseType:"blob"});return e.size}const{data:r}=await(0,s.A)(t,{responseType:"native",method:"head",query:null===e||void 0===e?void 0:e()}),n=r.headers.get("Content-Length");if(null==n)throw new Error("Unable to parse content length");return parseInt(n,10)};function f(e,t){var r;const s=e.spatialReference.wkid,i=t.wkid;if(!s||!i)throw new n.A("parquet","Unable to create ParquetFile, in and out wkid must be specified");const o=function(e){switch(e){case"esriGeometryPoint":return d.GeometryType.Point;case"esriGeometryPolygon":return d.GeometryType.Polygon;case"esriGeometryPolyline":return d.GeometryType.Polyline;case"esriGeometryMultipoint":return d.GeometryType.Multipoint;default:throw new n.A("parquet","Found unexpected GeometryType: ".concat(e))}}(e.geometryType),a=function(e){switch(e.encoding.type){case"wkb":return d.PrimaryGeometryField.fromWkb(e.encoding.primaryFieldName);case"location":{const{latitudeFieldName:t,longitudeFieldName:r}=e.encoding;return d.PrimaryGeometryField.fromLocation(t,r)}}}(e),u=[];if("xz"===(null===(r=e.displayOptimization)||void 0===r?void 0:r.mode)){const t=e.displayOptimization.multiscale;for(const e of null!==(l=t.levels)&&void 0!==l?l:[]){var l;const[t,r]=e.transform.translate,[s,n]=e.transform.scale,i=new Float64Array([t,r]),o=new Float64Array([s,n]);u.push(d.MultiscaleGeometryField.new(e.level,e.column,i,o))}}return d.GeometryInfo.new(o,s,i,a,u)}async function p(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ParquetFile:s}=await l(),n=c(r.getCustomParameters),i=h(r.getCustomParameters),o=r.geometryInfo?f(r.geometryInfo,null!==(t=r.outSpatialReference)&&void 0!==t?t:r.geometryInfo.spatialReference):null;return s.fromUrl(e,n,i,o)}function g(e){const t=e.keyValueMetadata("geo");return null!=t?JSON.parse(t):null}function m(e){const t=e.keyValueMetadata("esri");return null!=t?JSON.parse(t):null}},77350:(e,t,r)=>{r.d(t,{n:()=>i});var s=r(5095),n=r(66422);class i{constructor(e){this._options=e}insert(e,t){const r=e.getCursor(),{arcadeContextInfo:s,scale:i}=this._options,o=(0,n.N)(i,s);for(;r.next();)this._insertFeature(r,o,this._options.sqlOptions,t)}_insertFeature(e,t,r,n){const{featureFilter:i}=this._options;if(null!==i&&!i.check(e,r))return;let o=0,a=0;if("esriGeometryPoint"===e.geometryType)o=e.readXWorldSpace(),a=e.readYWorldSpace();else{if(n){const t=e.readCentroidForDisplay();if(null==t)return;const[r,n]=t.coords;if(r<0||r>s.CQ||n<0||n>s.CQ)return}const t=e.readCentroidWorldSpace();if(null==t)return;o=t.coords[0],a=t.coords[1]}this._insert(e,o,a,t)}}},77408:(e,t,r)=>{r.d(t,{i:()=>i});var s=r(13312),n=r(1900);class i{static minimal(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new i({geometryType:e,fieldsIndex:new n.A(r).toJSON(),featureIdInfo:{type:"object-id",fieldName:t},subtypes:null,subtypeField:null,types:null,globalIdField:null,spatialReference:null,outSpatialReference:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null})}static createFeature(e){return new i(e)}constructor(e){var t,r,i,o,a;let u;this._options=e,this._fieldsIndex=n.A.fromJSON(e.fieldsIndex),e.spatialReference&&(e.spatialReference instanceof s.A?this._spatialReference=e.spatialReference:this._spatialReference=s.A.fromJSON(e.spatialReference)),e.outSpatialReference&&(e.outSpatialReference instanceof s.A?this._outSpatialReference=e.outSpatialReference:this._outSpatialReference=s.A.fromJSON(e.outSpatialReference)),"object-id"===e.featureIdInfo.type&&(u=e.featureIdInfo.fieldName),this._arcadeSchema={fields:this.fieldsIndex.fields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,objectIdField:u,globalIdField:this._options.globalIdField,spatialReference:this._spatialReference,timeInfo:this._options.timeInfo,typeIdField:null!==(t=this._options.typeIdField)&&void 0!==t?t:void 0,types:null!==(r=this._options.types)&&void 0!==r?r:void 0,subtypeField:this._options.subtypeField,subtypes:null!==(i=this._options.subtypes)&&void 0!==i?i:void 0,datesInUnknownTimezone:null!==(o=this._options.timeReferenceUnknownClient)&&void 0!==o?o:void 0,dateFieldsTimeZone:null!==(a=this._options.dateFieldsTimeZone)&&void 0!==a?a:void 0}}get fieldsIndex(){return this._fieldsIndex}get geometryType(){return"esriGeometryMultiPatch"===this._options.geometryType?"esriGeometryPolygon":this._options.geometryType}get serviceGeometryType(){return this._options.geometryType}get subtypeField(){return this._options.subtypeField}get timeInfo(){return this._options.timeInfo}get featureIdInfo(){return this._options.featureIdInfo}get globalIdField(){return this._options.globalIdField}get arcadeSchema(){return this._arcadeSchema}get spatialReference(){return this._spatialReference}get outSpatialReference(){return this._outSpatialReference}get timeReferenceUnknownClient(){return this._options.timeReferenceUnknownClient}weakCloneWithAdditionalFields(e){return new i({fieldsIndex:{fields:[...this._fieldsIndex.fields,...e],timeZoneByFieldName:null},geometryType:this.geometryType,globalIdField:this.globalIdField,featureIdInfo:this.featureIdInfo,spatialReference:this.spatialReference,outSpatialReference:this.outSpatialReference,subtypeField:this.subtypeField,subtypes:this._options.subtypes,timeInfo:this.timeInfo,timeReferenceUnknownClient:this.timeReferenceUnknownClient,dateFieldsTimeZone:this._options.dateFieldsTimeZone,typeIdField:this._options.typeIdField,types:this._options.types})}}},77859:(e,t,r)=>{r.d(t,{Z:()=>o});var s,n=r(20176),i=r(88284);class o{getObjectId(e){return e.getObjectId()}getAttributes(e){return e.readAttributes()}getAttribute(e,t){return e.readAttribute(t)}getAttributeAsTimestamp(e,t){return e.readAttributeAsTimestamp(t)}cloneWithGeometry(e,t){const r=e.readAttributes(),s=new n.Om(t,r,null,e.getObjectId(),e.getDisplayId()),o=i.K.fromOptimizedFeatures([s],e.metadata);return o.setIndex(0),o}getGeometry(e){return e.readGeometryWorldSpace()}getCentroid(e,t){return e.readCentroidForDisplay()}}(s=o).Shared=new s},80332:(e,t,r)=>{r.d(t,{HJ:()=>a,Im:()=>_,KN:()=>l});var s=r(89379),n=r(34154),i=r(3532),o=r(88284);class a{static async create(e){const{metadata:t,definitionExpression:r}=e,s=r?await(0,n.GP)(r,t.fieldsIndex):null;return new a(t,s,r)}constructor(e,t,r){this.metadata=e,this._clause=t,this._definitionExpression=r}get hash(){return this._definitionExpression}testFeature(e){return null==this._clause||this._clause.testFeature(e)}}class u{constructor(){this.modified=new Map,this.removed=new Set}modify(e){this.modified.set(e.objectId,e),this.removed.has(e.objectId)&&this.removed.delete(e.objectId)}remove(e){this.modified.delete(e),this.removed.add(e)}get isEmpty(){return 0===this.modified.size&&0===this.removed.size}applyWhereClause(e){const t=new u;for(const[r,s]of this.modified)e.testFeature(s)?t.modified.set(r,s):t.removed.add(s.objectId);for(const r of this.removed)t.removed.add(r);return t}}class l extends i.K{constructor(e){super(),this._reader=e,this.chunkId="override",this.normalizedChunkId="override"}static fromFeatures(e,t){const r=o.K.fromOptimizedFeatures(e,t);return new l(r)}get reader(){return this._reader}get queryInfo(){return{}}get first(){return!1}get end(){return!1}get isTiled(){return!1}getTileReader(e){if(!this._reader.getSize())return null;const t=this.queryFeaturesInBounds(e.bounds);return t.setTransformForDisplay(e.transform),t}}class d{constructor(e,t){this.inner=e,this.isWeak=t,this.lastWeak=null}get isStrong(){return!this.isWeak}}class _{constructor(e){this._parameters=e,this._overrides=new Map,this._update=new u,this._lastCleanup=0}update(e){this._parameters=e}hasOverride(e){return this._overrides.has(e)}onChunkInsert(e){if(this._overrides.size){const n=e.reader.getCursor();for(;n.next();){const e=n.getObjectId(),i=this._overrides.get(e);if(null!==i&&void 0!==i&&i.lastWeak&&(i.lastWeak=null),null!==i&&void 0!==i&&i.isWeak){var t,r;const e=n.readOptimizedFeatureWorldSpace(),o=null!==(t=null===(r=i.inner)||void 0===r?void 0:r.attributes)&&void 0!==t?t:{};e.attributes=(0,s.A)((0,s.A)({},o),e.attributes),i.inner=e,this._update.modify(e),this.invalidate()}}}e.registerOverrides(this)}apply(e,t){const{updateWeak:r,removeWeak:s,update:n,remove:i,release:o}=e.commands;this.invalidate();for(const l of r){const e=new d(l,!0),t=this._overrides.get(l.objectId);null!==t&&void 0!==t&&t.isStrong?t.lastWeak=e:(this._overrides.set(l.objectId,e),this._update.modify(l))}for(const l of n){var a;const e=new d(l,!1),t=this._overrides.get(l.objectId);e.lastWeak=null!==t&&void 0!==t&&t.isWeak?t:null!==(a=null===t||void 0===t?void 0:t.lastWeak)&&void 0!==a?a:null,this._overrides.set(l.objectId,e),this._update.modify(l)}for(const l of s){const e=new d(null,!0),t=this._overrides.get(l);null!==t&&void 0!==t&&t.isStrong?t.lastWeak=e:(this._overrides.set(l,e),this._update.remove(l))}for(const l of i){var u;const e=new d(null,!1),t=this._overrides.get(l);e.lastWeak=null!==t&&void 0!==t&&t.isWeak?t:null!==(u=null===t||void 0===t?void 0:t.lastWeak)&&void 0!==u?u:null,this._overrides.set(l,e),this._update.remove(l)}if(o.length){const e=new Set;for(const t of o){const r=this._overrides.get(t);null!==r&&void 0!==r&&r.lastWeak?(this._overrides.set(t,r.lastWeak),null==r.lastWeak.inner?this._update.remove(t):this._update.modify(r.lastWeak.inner)):r&&!r.isWeak&&(this._overrides.delete(t),e.add(t))}t.forEachUnsafe(t=>{const r=t.getObjectId();e.has(r)&&(this._update.modify(t.readOptimizedFeatureWorldSpace()),e.delete(r))});for(const t of e.values())this._update.remove(t)}}clearWeakOverrides(){for(const[e,t]of this._overrides.entries())t.isWeak&&this._overrides.delete(e);this.invalidate()}cleanup(e){if(this._overrides.size<1e4)return;const t=performance.now();if(t-this._lastCleanup<1e3)return;this._lastCleanup=t;const r=this._getWeakDeletions();if(!(r.size<1e4)){for(const t of e){const e=t.reader.withoutOverrides().getCursor();for(;e.next();){const t=e.getObjectId();r.delete(t)}}for(const e of r)this._overrides.delete(e);r.size&&this.invalidate()}}takeOverrideUpdate(){const e=this._update;return e.isEmpty?null:(this._update=new u,e.applyWhereClause(this._parameters))}asChunk(){const e=this._parameters;if(this._lastOverrideParametersHash!==e.hash&&(this._lastOverrideParametersHash=e.hash,this._chunk=null),!this._chunk){const t=[];for(const r of this._overrides.values())null!=r.inner&&e.testFeature(r.inner)&&t.push(r.inner);this._chunk=l.fromFeatures(t,e.metadata)}return this._chunk}invalidate(){this._chunk=null}putWeakObjectIdsFromGlobalIds(e,t,r){for(const[s,n]of this._overrides.entries()){if(n.isWeak&&null!=n.inner){const i=n.inner.attributes[r];i&&t.has(i)&&!e.has(i)&&e.set(i,s);continue}if(null!=n.lastWeak&&null!=n.lastWeak.inner){const i=n.lastWeak.inner.attributes[r];i&&t.has(i)&&!e.has(i)&&e.set(i,s)}}}_getWeakDeletions(){const e=new Set;for(const[t,r]of this._overrides.entries())r.isWeak&&null==r.inner&&e.add(t);return e}}},88284:(e,t,r)=>{r.d(t,{K:()=>a});var s=r(98618),n=r(20176),i=r(1900),o=r(93210);class a extends o.Y{static fromFeatures(e,t){const{geometryType:r}=t,n=(0,s.Di)([],e,r,!1,!1,t.featureIdInfo);for(let s=0;s<n.length;s++)n[s].displayId=e[s].displayId;return a.fromOptimizedFeatures(n,t)}static fromFeatureSet(e,t){const r=(0,s.q3)(e,t.featureIdInfo);return a.fromOptimizedFeatureSet(r,t)}static fromOptimizedFeatureSet(e,t){const r=a.fromOptimizedFeatures(e.features,t);return r._exceededTransferLimit=e.exceededTransferLimit,r._transform=e.transform,r._fieldsIndex=new i.A(e.fields),r}static fromOptimizedFeatures(e,t,r){const s=new a(e,t);return s._fieldsIndex=t.fieldsIndex,s._transform=r,s}static empty(e){return new a([],e)}constructor(e,t){super(t),this._exceededTransferLimit=!1,this._featureIndex=-1,this._fieldsIndex=null,this._geometryType=t.geometryType,this._features=e}get fields(){return this._fieldsIndex}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}get _current(){return this._features[this._featureIndex]}get usedMemory(){return this._current.usedMemory}getSize(){return this._features.length}getCursor(){return this.copy()}getInTransform(){return this._transform}getAttributeHash(){let e="";for(const t in this._current.attributes)e+=this._current.attributes[t];return e}getIndex(){return this._featureIndex}setIndex(e){this._featureIndex=e}getObjectId(){var e;return null===(e=this._current)||void 0===e?void 0:e.objectId}getDisplayId(){return this._current.displayId}setDisplayId(e){this._current.displayId=e}copy(){const e=new a(this._features,this.metadata);return this.copyInto(e),e}next(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length}readGeometryArea(){return(0,n.N3)(this._current)?(0,s.Rk)(this._current.geometry,2):0}_readX(){return(0,n.N3)(this._current)?this._current.geometry.coords[0]:0}_readY(){return(0,n.N3)(this._current)?this._current.geometry.coords[1]:0}_readGeometry(){var e;return(0,n.N3)(this._current)&&null!==(e=this._current.geometry)&&void 0!==e?e:null}_readServerCentroid(){return this._current.centroid}_readAttribute(e,t){if(!this._fieldsIndex){const t=this._current.attributes[e];if(void 0!==t)return t;const r=e.toLowerCase();for(const e in this._current.attributes)if(e.toLowerCase()===r)return this._current.attributes[e];return}const r=this._fieldsIndex.get(e);if(!r)return;const s=this._current.attributes[r.name];return null==s?s:t&&this.fields.isDateField(e)?new Date(s):s}_readAttributes(){return this._current.attributes}copyInto(e){super.copyInto(e),e._featureIndex=this._featureIndex,e._transform=this._transform,e._fieldsIndex=this._fieldsIndex}}},91996:(e,t,r)=>{r.d(t,{H:()=>l,p:()=>u});var s=r(97255),n=r(31633),i=r(77350),o=r(62812);const a=96;function u(e,t){return(0,n.GA)(e)*n.dy*a/t}class l extends i.n{constructor(e){super(e),this._cells=new Map,this._pixelsPerMapUnit=u(e.spatialReference,e.scale)}get usedMemory(){const e=this._cells.values().next().value;return e?(s.RS+e.usedMemory)*this._cells.size:0}put(e){for(const t of this._cells.values()){const r=e.get(t.id);r?r.merge(t):e.set(t.id,t.clone())}}putBounded(e,t,r){const s=[t.xmin,t.ymin,t.xmax,t.ymax],[n,i,o,a]=s,u=Math.floor(n*this._pixelsPerMapUnit/this._options.cellSize),l=Math.floor(i*this._pixelsPerMapUnit/this._options.cellSize),d=Math.ceil(o*this._pixelsPerMapUnit/this._options.cellSize),_=Math.ceil(a*this._pixelsPerMapUnit/this._options.cellSize);for(let c=l;c<=_;c++)for(let t=u;t<=d;t++){const r="".concat(t,".").concat(c),s=this._cells.get(r);if(!s)continue;const n=e.get(s.id);n?s&&!e.has(s.id)&&n.merge(s):e.set(s.id,s.clone())}}_insert(e,t,r,s){const n=t*this._pixelsPerMapUnit,i=r*this._pixelsPerMapUnit,o=Math.floor(n/this._options.cellSize),a=Math.floor(i/this._options.cellSize);this._getCellOrCreate(o,a).insert(e,s,t,r)}_getCellOrCreate(e,t){const r=o.L.createId(e,t);let s=this._cells.get(r);if(!s){const n=1*this._options.cellSize/this._pixelsPerMapUnit;s=o.L.create(e,t,this._options.fields,n),this._cells.set(r,s)}return s}}},93210:(e,t,r)=>{r.d(t,{Y:()=>D});var s,n,i,o=r(89379),a=r(46405),u=r(81806),l=r(97255),d=r(16503),_=r(14902),c=r(84735),h=r(42294),f=r(19902),p=r(88501),g=r(76279),m=r(90321),y=r(98618),b=r(20176),w=r(1484),v=r(36693),x=r(55147);const I=null!==(s=(0,u.A)("featurelayer-simplify-thresholds"))&&void 0!==s?s:[.5,.5,.5,.5],F=I[0],T=I[1],A=I[2],M=I[3],S=null!==(n=(0,u.A)("featurelayer-simplify-payload-size-factors"))&&void 0!==n?n:[1,2,4],k=S[0],C=S[1],B=S[2],O=null!==(i=(0,u.A)("featurelayer-simplify-mobile-factor"))&&void 0!==i?i:2,W=(0,u.A)("esri-mobile"),G=4294967295;class D{constructor(e){this.metadata=e,this.type="FeatureSetReader",this._overrides=null,this._joined=[],this._objectIdToIndex=null,this._boundsBuffer=[],this._caches=new Map,this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}destroy(){}[Symbol.dispose](){this.destroy()}getAreaSimplificationThreshold(e,t){let r=1;const s=W?O:1;t>4e6?r=B*s:t>1e6?r=C*s:t>5e5?r=k*s:t>1e5&&(r=s);let n=0;return e>4e3?n=M*r:e>2e3?n=A*r:e>100?n=T:e>15&&(n=F),n}getBounds(e){!function(e,t,r){if(!(e.length>t))for(;e.length<=t;)e.push(r)}(this._boundsBuffer,4*this.getIndex()+4,0);const t=this.getBoundsXMin();if(t===G||!isFinite(t))return!1;if(0===this.getBoundsXMin()){const t=this.readGeometryWorldSpace();if(null!==t&&void 0!==t&&t.isPoint&&0===t.coords[0]&&0===t.coords[1])return(0,h.BI)(e,0,0,0,0),!0;if(!t)return this.setBoundsXMin(G),!1;let r=1/0,s=1/0,n=-1/0,i=-1/0;return t.forEachVertex((e,t)=>{r=Math.min(r,e),s=Math.min(s,t),n=Math.max(n,e),i=Math.max(i,t)}),this.setBoundsXMin(r),this.setBoundsYMin(s),this.setBoundsXMax(n),this.setBoundsYMax(i),(0,h.BI)(e,r,s,n,i),!0}const r=this.getBoundsXMin(),s=this.getBoundsYMin(),n=this.getBoundsXMax(),i=this.getBoundsYMax();return(0,h.BI)(e,r,s,n,i),!0}getBoundsXMin(){return this._boundsBuffer[4*this.getIndex()]}setBoundsXMin(e){this._boundsBuffer[4*this.getIndex()]=e}getBoundsYMin(){return this._boundsBuffer[4*this.getIndex()+1]}setBoundsYMin(e){this._boundsBuffer[4*this.getIndex()+1]=e}getBoundsXMax(){return this._boundsBuffer[4*this.getIndex()+2]}setBoundsXMax(e){this._boundsBuffer[4*this.getIndex()+2]=e}getBoundsYMax(){return this._boundsBuffer[4*this.getIndex()+3]}setBoundsYMax(e){this._boundsBuffer[4*this.getIndex()+3]=e}readAttributeAsTimestamp(e){const t=this.readAttribute(e);return"string"==typeof t?new Date(t).getTime():"number"==typeof t||null==t?t:null}readAttribute(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._readAttribute(e,t);if(void 0!==r)return r;for(const s of this._joined){s.setIndex(this.getIndex());const r=s._readAttribute(e,t);if(void 0!==r)return r}}readAttributes(){const e=this._readAttributes();for(const t of this._joined){t.setIndex(this.getIndex());const r=t._readAttributes();for(const t of Object.keys(r))e[t]=r[t]}return e}joinAttributes(e){this._joined.push(e)}registerOverrides(e){this._overrides=e}withoutOverrides(){const e=this.copy();return e._overrides=null,e}readOptimizedFeatureWorldSpace(){const e=this.readGeometryWorldSpace(),t=this.readAttributes(),r=this.readCentroidWorldSpace();return new b.Om(e,t,r,this.getObjectId(),this.getDisplayId())}readLegacyFeatureForDisplay(){var e;const t=this.readCentroidForDisplay();return{attributes:this.readAttributes(),geometry:this.readLegacyGeometryForDisplay(),centroid:null!==(e=t&&{x:t.coords[0],y:t.coords[1]})&&void 0!==e?e:null}}readLegacyFeatureWorldSpace(){var e;const t=this.readCentroidWorldSpace();return{attributes:this.readAttributes(),geometry:this._readLegacyGeometryWorldSpace(),centroid:null!==(e=t&&{x:t.coords[0],y:t.coords[1]})&&void 0!==e?e:null}}readLegacyGeometryForDisplay(){const e=this.readGeometryForDisplay();return(0,y.zv)(e,this.geometryType,!1,!1)}readXForDisplay(){return this._readX()}readYForDisplay(){return this._readY()}readXWorldSpace(){const e=this._readX(),t=this.getInTransform();return null==t?e:e*t.scale[0]+t.translate[0]}readYWorldSpace(){const e=this._readY(),t=this.getInTransform();return null==t?e:t.translate[1]-e*t.scale[1]}readGeometryForDisplay(){const e=this._readGeometryDeltaDecoded(!0);if(!e){const e=this._createDeltaQuantizedGeometryFromServerCentroid();return e?e.deltaDecode():null}return e}readGeometryForDisplayTransformed(e){let t=this.readGeometryForDisplay();if(t&&"esriGeometryPolyline"===this.metadata.geometryType&&(t=(0,y.kz)(new w.A,t,this.hasZ,this.hasM,this.metadata.geometryType,e.scale[0])),t&&(t=(0,y.hK)(t,e,this.metadata.geometryType,this.hasZ,this.hasM)),!t){const t=this.readCentroidForDisplay();if(!t)return null;const r=(0,g.IE)(e,t.coords[0]),s=(0,g.B2)(e,t.coords[1]);return this._createDeltaQuantizedExtrudedGeometry(r,s).deltaDecode()}return t}readGeometryWorldSpace(){let e=this._readGeometry();if(e||(e=this._createDeltaQuantizedGeometryFromServerCentroid()),!e)return null;const t=e.clone(),r=this.getInTransform();return null!=r&&(0,y.Ch)(t,t,this.hasZ,this.hasM,r),t}readCentroidForDisplay(){const e=this.readGeometryForDisplay();return e?this._computeDisplayCentroid(e):this._readServerCentroid()}readCentroidWorldSpace(){const e=this.readGeometryForDisplay(),t=e?this._computeDisplayCentroid(e):this._readServerCentroid();if(!t)return null;const r=t.clone(),s=this.getInTransform();return null!=s&&(0,y.Ch)(r,r,this.hasZ,this.hasM,s),r}setCache(e){let t=this._caches.get(e);null==t&&(t=new x.P(this.getSize()),this._caches.set(e,t)),this._activeCache=t}setCachedValue(e){this._activeCache.set(this.getIndex(),e)}hasCachedValue(){return this._activeCache.has(this.getIndex())}getCachedValue(){return this._activeCache.get(this.getIndex())}get underlyingMemory(){let e=0;e+=(0,l.Qf)(this._boundsBuffer);for(const t of this._caches.values())e+=t.usedMemory;return e}_readGeometryDeltaDecoded(e){const t=this._readGeometry(e);return"esriGeometryPoint"!==this.geometryType&&t&&this.getInTransform()?t.deltaDecode():t}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this.fields.has(e)||this._joined.some(t=>t.hasField(e))}geometry(){const e=this.readGeometryWorldSpace(),t=(0,y.zv)(e,this.geometryType,this.hasZ,this.hasM),r=(0,f.rS)(t);if(r){if(!this.metadata.outSpatialReference)throw new Error("InternalError: Expected spatial reference to be defined");r.spatialReference=this.metadata.outSpatialReference}return r}autocastArcadeDate(e,t){var r;return t&&t instanceof Date?this.isUnknownDateTimeField(e)?a.lY.unknownDateJSToArcadeDate(t):a.lY.dateJSAndZoneToArcadeDate(t,null!==(r=this.contextTimeZone)&&void 0!==r?r:v.qU):t}isUnknownDateTimeField(e){return this.metadata.fieldsIndex.getTimeZone(e)===v.L5}field(e){let t=this.fields.get(e);if(t)switch(t.type){case"date-only":case"esriFieldTypeDateOnly":return d.n.fromReader(this.readAttribute(e,!1));case"time-only":case"esriFieldTypeTimeOnly":return _.k.fromReader(this.readAttribute(e,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return a.lY.fromReaderAsTimeStampOffset(this.readAttribute(e,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(e,this.readAttribute(e,!0));default:return this.readAttribute(e,!1)}for(const r of this._joined)if(r.setIndex(this.getIndex()),t=r.fields.get(e),t)switch(t.type){case"date-only":case"esriFieldTypeDateOnly":return d.n.fromReader(r._readAttribute(e,!1));case"time-only":case"esriFieldTypeTimeOnly":return _.k.fromReader(r._readAttribute(e,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return a.lY.fromReaderAsTimeStampOffset(r._readAttribute(e,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(e,r._readAttribute(e,!0));default:return this.readAttribute(e,!1)}throw new Error("Field ".concat(e," does not exist"))}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this.fields.fields.map(e=>e.name)}isEmpty(){return this.fields.fields.length<=0&&null==this.geometry()}castToText(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return JSON.stringify(this.readLegacyFeatureForDisplay());const e=this.readLegacyFeatureForDisplay();if(!e)return JSON.stringify(null);const t={geometry:e.geometry,attributes:(0,o.A)({},e.attributes)};for(const r in t.attributes){const e=t.attributes[r];e instanceof Date&&(t.attributes[r]=e.getTime())}return JSON.stringify(t)}gdbVersion(){return null}fullSchema(){return this.metadata.arcadeSchema}castAsJson(){var e,t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{attributes:this._readAttributes(),geometry:!0===(null===r||void 0===r?void 0:r.keepGeometryType)?this.geometry():null!==(e=null===(t=this.geometry())||void 0===t?void 0:t.toJSON())&&void 0!==e?e:null}}castAsJsonAsync(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Promise.resolve(this.castAsJson(e))}_getExists(){if(this._overrides){const e=this.getObjectId();return!this._overrides.hasOverride(e)}return!0}_computeDisplayCentroid(e){if(null==this.getInTransform())return(0,m.Q)(new w.A,e,this.hasM,this.hasZ);const t=c.z.fromOptimized(e,this.geometryType);t.yFactor*=-1;const r=(0,p.d)(t);return r?(r[1]*=-1,new w.A([],r)):null}copyInto(e){e._joined=this._joined,e._overrides=this._overrides,e._objectIdToIndex=this._objectIdToIndex,e._boundsBuffer=this._boundsBuffer,e._activeCache=this._activeCache,e._caches=this._caches,e._contextTimeZone=this._contextTimeZone}_readLegacyGeometryWorldSpace(){const e=this.readGeometryWorldSpace();return(0,y.zv)(e,this.geometryType,!1,!1)}_createDeltaQuantizedGeometryFromServerCentroid(){const e=this._readServerCentroid();if(!e)return null;const[t,r]=e.coords;return this._createDeltaQuantizedExtrudedGeometry(t,r)}_createDeltaQuantizedExtrudedGeometry(e,t){return"esriGeometryPolyline"===this.geometryType?this._createDeltaQuantizedExtrudedLine(e,t):this._createDeltaQuantizedExtrudedQuad(e,t)}_createDeltaQuantizedExtrudedQuad(e,t){return new w.A([5],[e-1,t,1,-1,1,1,-1,1,-1,-1])}_createDeltaQuantizedExtrudedLine(e,t){return new w.A([2],[e-1,t+1,1,-1])}}}}]);
//# sourceMappingURL=8079.e784c123.chunk.js.map