"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[6266],{16266:(t,e,n)=>{n.d(e,{K:()=>O,t:()=>M});var i=n(89379),o=(n(81806),n(53084)),s=n(31633),r=n(38983),a=n(86300),l=n(44680),c=n(34761),u=n(13191),d=n(20664),h=n(9392),p=n(5809),v=n(42294),g=n(44815),y=n(38496),f=n(45136),m=n(59883),b=n(86486),_=n(67425),w=n(99057),x=n(24947),S=n(36423),P=n(91217),C=n(7342),E=n(51990),V=n(22955),A=n(80935),D=n(87925),z=n(50468),I=n(17345),L=n(9612),U=n(25672),j=n(37046),k=n(61895);const R=["polygon","extent"];class M extends x.UF{constructor(t,e,n,i){super(t,e,n,i,function(t){var e,n;return 1===(null!==(e=null===(n=t.material)||void 0===n||null===(n=n.color)||void 0===n?void 0:n.a)&&void 0!==e?e:0)}(e)),this.ensureDrapedStatus(!1)}async doLoad(){var t,e;const n=this.symbolLayer,o=null===n||void 0===n?void 0:n.material,s=null===(t=this.symbolLayer.material)||void 0===t||null===(t=t.color)||void 0===t?void 0:t.a,r=this.needsDrivenTransparentPass||null!=s&&1!==s,a=null===o||void 0===o?void 0:o.emissive,l=!this._hasDrivenColorOrOpacity&&(null==s||0===s),c={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,ambient:h.Un,diffuse:h.Un,opacity:l?0:1,layerOpacity:this._getLayerOpacity(),drivenOpacity:r,hasSymbolColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:n.castShadows,emissiveStrength:null!==(e=null===a||void 0===a?void 0:a.strength)&&void 0!==e?e:0,emissiveSource:1,offsetTransparentBackfaces:!0,normalType:1},u=new k.$U(c,this._context),d=new k.$U((0,i.A)((0,i.A)({},c),{},{cullFace:2}),this._context);this._materials[0]=u,this._materials[1]=d,this._updateTransparentDepedentMaterialParameters()}destroy(){super.destroy(),this._materials.length=0}createGraphics3DGraphic(t){const e=t.graphic;if(!this._validateGeometry(e.geometry,R,this.symbolLayer.type))return null;const n=this._getDrivenUInt8ColorWithNaNSupport(t.renderingInfo,this._materialColor,!1);(0,E.K_)(n,n);const i=this.createElevationContextForGraphic(e);return this._createAs3DShape(e,t.renderingInfo,n,i,e.uid)}layerOpacityChanged(t,e){var n,i;const o=this._getLayerOpacity();null!==(n=this._materials[0])&&void 0!==n&&n.setParameters({layerOpacity:o}),null!==(i=this._materials[1])&&void 0!==i&&i.setParameters({layerOpacity:o}),this._updateTransparentDepedentMaterialParameters(),null===t||void 0===t||t.forEach(t=>{var n;return null===(n=e(t))||void 0===n?void 0:n.layerOpacityChanged(o,this._context.isAsync)})}layerScreenSizePerspectiveChanged(){}layerElevationInfoChanged(t,e){return this.updateGraphics3DGraphicElevationInfo(t,e,_.Kf)}slicePlaneEnabledChanged(t,e){var n,i;return null!==(n=this._materials[0])&&void 0!==n&&n.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),null!==(i=this._materials[1])&&void 0!==i&&i.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),null!==t&&void 0!==t&&t.forEach(t=>{const n=e(t);null!=n&&n.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)}),!0}physicalBasedRenderingChanged(){var t,e;const n={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0};return null!==(t=this._materials[0])&&void 0!==t&&t.setParameters(n),null!==(e=this._materials[1])&&void 0!==e&&e.setParameters(n),!0}_getExtrusionSize(t){var e;let n;return n=t.size&&this._drivenProperties.size?null!==(e=(0,b.kg)(t.size,2))&&void 0!==e?e:0:this._getSymbolSize(),n/=this._context.renderCoordsHelper.unitInMeters,n}applyRendererDiff(t,e){return this._drivenPropertiesChanged(e)?0:1}async queryForSnapping(t,e,n,i){var r;const a=this._getExtrusionSize(n)*this._context.renderCoordsHelper.unitInMeters/(0,s.G9)(e),{objectId:l,target:c}=t,u=(0,o.o8)(c);switch(u.z=(null!==(r=u.z)&&void 0!==r?r:0)+a,t.type){case"edge":{var d,h;const{start:e,end:n}=t,i=(0,o.o8)(e),s=(0,o.o8)(n);return i.z=(null!==(d=i.z)&&void 0!==d?d:0)+a,s.z=(null!==(h=s.z)&&void 0!==h?h:0)+a,[(0,m.P)(l,u,1/0,i,s)]}case"vertex":return[(0,m.k)(l,u,1/0),(0,m.P)(l,c,1/0,c,u)];default:return[]}}_getSymbolSize(){var t;return null!==(t=this.symbolLayer.size)&&void 0!==t?t:1}_createAs3DShape(t,e,n,i,o){const s=(0,P.dE)(t.geometry);if(null==s)return null;if(0===s.rings.length||!s.rings.some(t=>t.length>0))return this._logGeometryValidationWarnings(s.rings,"rings","ExtrudeSymbol3DLayer"),null;const m=(0,D.C8)(s,this._context.elevationProvider,this._context.renderCoordsHelper,i);this._logGeometryCreationWarnings(m,s.rings,"rings","ExtrudeSymbol3DLayer");const b=(0,S.W$)(s);if(null==b)return null;const x=new Array,E=new Array,z=(0,v.vt)(),I=(0,u.vt)(),k=(0,h.vt)(),R=1===this._context.renderCoordsHelper.viewingMode;R||this._context.renderCoordsHelper.worldUpAtPosition(null,k),(0,p.l)(s.spatialReference,[b.x,b.y,0],I,this._context.renderCoordsHelper.spatialReference);const M=(0,u.vt)();(0,c.B8)(M,I);const B=(0,l.vt)();(0,a.Ge)(B,M);const{polygons:G,mapPositions:T,position:H}=m,K=new Map,$=this._materials[0];for(const a of G){const t=a.count;if(this._context.clippingExtent&&((0,v.vY)(a.mapPositions,z),!(0,v.KG)(z,this._context.clippingExtent)))continue;const i=(0,r.e)(a.mapPositions,a.holeIndices,3);if(0===i.length)continue;const s=i.length,l=6*t,c=(0,y.my)(l+s),u=(0,y.my)(s),d=(0,g.jh)(3*l),h=(0,g.jh)(3*l),p=(0,g.jh)(3*l),m=(0,g.jh)(l);O(H,T,i,a,d,p,h,m,c,u,this._getExtrusionSize(e),k,R),(0,f.t)(d,d,M);const b=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerViewUid:this._context.layerViewUid}),_=new rt(d,p,(0,U.fA)(h),m),w=F($,c,c.length-u.length,_,n,b),S=t,P=t,C=2*a.count,V=new at(S,P,C,s/3);Z(w,V,I),K.set(w,V),x.push(w,F(this._materials[1],u,0,_,n,b)),E.push(_.heights)}if(0===x.length)return null;const W=new j.B({geometries:x,layerViewUid:this._context.layerViewUid,graphicUid:o,isElevationSource:!0});W.transformation=I;const Y=(0,C.Cc)(this.symbolLayer,{opacity:this._getLayerOpacity()}),N=Y?new w.H(this._materials[0],Y,this._context.slicePlaneEnabled):null,J=new w.Y(this,W,null,(t,e,n,i,o)=>function(t,e,n,i,o,s,r){const a=t.stageObject,l=a.geometries,h=l.length,p="absolute-height"!==e.mode;let v=0;const g=a.transformation,y=(0,c.Qw)((0,u.vt)(),g);for(let c=0;c<h;c+=2){const t=l[c];if(!(0,L.p)(t))continue;const e=t.getMutableAttribute("position").data,u=s[c/2],h=new A.aY(t.mapPositions),f=e.length/3;let m=!1,b=0;{let t=0;for(let s=0;s<f;s++){Q[0]=e[t],Q[1]=e[t+1],Q[2]=e[t+2],i(h,X),p&&(b+=X.sampledElevation),V.b.TESTS_DISABLE_OPTIMIZATIONS?((0,d.j)(q,h.array[h.offset],h.array[h.offset+1],X.z+u[t/3]),null!=n&&o.toRenderCoords(q,n,q),(0,d.t)(q,q,y)):((0,d.j)(q,e[t],e[t+1],e[t+2]),(0,d.t)(q,q,g),o.setAltitude(q,X.z+u[t/3]),(0,d.t)(q,q,y)),e[t]=q[0],e[t+1]=q[1],e[t+2]=q[2];const s=nt/o.unitInMeters;(Math.abs(Q[0]-e[t])>=s||Math.abs(Q[1]-e[t+1])>=s||Math.abs(Q[2]-e[t+2])>=s)&&(m=!0),h.offset+=3,t+=3}}if(m){const e=r.get(t);e&&Z(t,e,g),a.geometryVertexAttributeUpdated(l[c],"normalCompressed"),t.invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l[c],"position"),l[c+1].invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l[c+1],"position")}v+=b/f}return v/h}(t,e,n,i,o,E,K),i,N);return J.alignedSampledElevation=m.sampledElevation,J.needsElevationUpdates=(0,_.Kf)(i.mode),J}get _materialColor(){var t;return null===(t=this.symbolLayer.material)||void 0===t?void 0:t.color}_updateTransparentDepedentMaterialParameters(){const t=this._materials[0];t&&t.setParameters({cullFace:t.transparent?0:2})}}function F(t,e,n,i,o,s){const r=(0,y.EH)(e.length),a=[["position",new z.n(i.positions,e,3,!0)],["normalCompressed",new z.n(i.normals,e,2,!0)],["symbolColor",new z.n(o,r,4,!0)]];return new I.V(t,a,i.elevation,0,s,n)}function O(t,e,n,i,o,s,r,a,l,c,u,h,p){const v=n.length/3;let g=2*i.count;!function(t,e,n,i,o,s,r,a,l,c,u,h,p,v,g,y,f){(0,d.d)(J,y),null!==l&&void 0!==l||(l=[]),null!==c&&void 0!==c||(c=[]),null!==u&&void 0!==u||(u=[]);const m=g>0?1:-1;let b=3*n,_=0,w=3*_,x=i,S=3*x;for(let E=0;E<i;++E){const n=t[b],i=t[b+1],o=t[b+2];f&&(J[0]=n,J[1]=i,J[2]=o,(0,d.n)(J,J)),a[w+0]=n,a[w+1]=i,a[w+2]=o;const s=e[b+0],r=e[b+1],h=e[b+2];l[w+0]=s,l[w+1]=r,l[w+2]=h,c[w+0]=-m*J[0],c[w+1]=-m*J[1],c[w+2]=-m*J[2],u[_]=0,a[S+0]=n+g*J[0],a[S+1]=i+g*J[1],a[S+2]=o+g*J[2],l[S+0]=s,l[S+1]=r,l[S+2]=h,u[x]=g,w+=3,S+=3,b+=3,_+=1,x+=1}b=3*s,w=0,S=3*v;const P=g<0?et:tt,C=g<0?tt:et;for(let d=0;d<r;++d)p[w]=o[b+P[0]],p[w+1]=o[b+P[1]],p[w+2]=o[b+P[2]],h[S]=o[b+C[0]]+i,h[S+1]=o[b+C[1]]+i,h[S+2]=o[b+C[2]]+i,w+=3,S+=3,b+=3}(t,e,i.index,i.count,n,0,v,o,s,r,a,l,c,g,u,h,p);let y=0,f=2*i.count;g=0;const m=i.pathLengths[0];T(o,s,a,r,y,m,i.count,f,l,g,u),f+=4*m,g+=2*m,y+=m;for(let d=1;d<i.pathLengths.length;++d){const t=i.pathLengths[d];T(o,s,a,r,y,t,i.count,f,l,g,u),f+=4*t,g+=2*t,y+=t}}function B(t,e,n,i,o,s,r){i[s]=i[r],r*=3,t[s*=3]=t[r],t[s+1]=t[r+1],t[s+2]=t[r+2],e[s]=e[r],e[s+1]=e[r+1],e[s+2]=e[r+2],n[s]=o[0],n[s+1]=o[1],n[s+2]=o[2]}const G=(0,h.vt)();function T(t,e,n,i,o,s,r,a,l,c,u){null!==e&&void 0!==e||(e=[]),null!==n&&void 0!==n||(n=[]),null!==i&&void 0!==i||(i=[]);let d=o,h=o+1,p=o+r,v=o+r+1,g=a,y=a+1,f=a+2*s,m=a+2*s+1;u<0&&(d=o+r+1,v=o);let b=3*c;for(let _=0;_<s;++_)_===s-1&&(h=o,u>0?v=o+r:d=o+r),N(t,d,h,p,G),B(t,e,i,n,G,g,d),B(t,e,i,n,G,y,h),B(t,e,i,n,G,f,p),B(t,e,i,n,G,m,v),l[b]=g,l[b+1]=f,l[b+2]=m,l[b+3]=g,l[b+4]=m,l[b+5]=y,b+=6,d++,h++,p++,v++,g+=2,y+=2,f+=2,m+=2}const H=(0,h.vt)(),K=(0,h.vt)(),$=(0,h.vt)(),W=(0,h.vt)(),Y=(0,h.vt)();function N(t,e,n,i,o){e*=3,n*=3,i*=3,(0,d.j)(H,t[e++],t[e++],t[e++]),(0,d.j)(K,t[n++],t[n++],t[n++]),(0,d.j)($,t[i++],t[i++],t[i++]),(0,d.e)(W,K,H),(0,d.e)(Y,$,H),(0,d.i)(o,Y,W),(0,d.n)(o,o)}const Q=(0,h.vt)();function Z(t,e,n){const i=t.getMutableAttribute("position"),o=t.getMutableAttribute("normalCompressed").data,s=i.data,r=t.attributes.get("position").indices,{topVertexStart:a,topVertexCount:l,topFaceStart:c,topFaceCount:u}=e,h=c+u,p=a+l,v=it,g=ot,y=st,f=J,m=q;(0,d.j)(m,0,0,0);const b=(t,e)=>{const i=3*t;(0,d.j)(e,s[i+0],s[i+1],s[i+2]),(0,d.t)(e,e,n)};for(let _=c;_<h;++_){const t=3*_;b(r[t+0],v[0]),b(r[t+1],v[1]),b(r[t+2],v[2]),(0,d.a)(g,v[1],v[0]),(0,d.a)(y,v[2],v[0]),(0,d.i)(f,g,y),(0,d.g)(m,m,f)}(0,d.n)(m,m);for(let d=a;d<p;++d){const t=m[0],e=m[1],n=m[2];(0,U.aT)(o,d,t,e,n)}}const q=(0,h.vt)(),J=(0,h.vt)(),X=new _.Uk,tt=[0,2,1],et=[0,1,2],nt=.01,it=[(0,h.vt)(),(0,h.vt)(),(0,h.vt)()],ot=(0,h.vt)(),st=(0,h.vt)();class rt{constructor(t,e,n,i){this.positions=t,this.elevation=e,this.normals=n,this.heights=i}}class at{constructor(t,e,n,i){this.topVertexStart=t,this.topVertexCount=e,this.topFaceStart=n,this.topFaceCount=i}}},59883:(t,e,n)=>{function i(t,e,n){return{objectId:t,target:e,distance:n,type:"vertex"}}function o(t,e,n,i,o){return{objectId:t,target:e,distance:n,type:"edge",start:i,end:o,draped:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}n.d(e,{P:()=>o,k:()=>i})},86486:(t,e,n)=>{n.d(e,{LO:()=>a,kg:()=>l,or:()=>c,vl:()=>r});var i=n(69539),o=n(11687),s=n(15492);function r(t,e){var n;const i=function(t,e){if(null!=t.symbol)return t.symbol;const n=null===e||void 0===e?void 0:e.renderer;return null!=n&&"dot-density"!==n.type?n.getSymbol(t,e):null}(t,e);if(null==i)return null;const r=null===e||void 0===e?void 0:e.renderer,a=new o.$(r,i);if(null==r||!("visualVariables"in r)||!r.visualVariables)return a;const l=null!==(n=(0,s.getVisualVariableValues)(r,t,e))&&void 0!==n?n:[],c=["proportional","proportional","proportional"];for(const{variable:o,value:s}of l)if(null!=s||"size"===o.type&&o.useSymbolValue)switch(o.type){case"color":a.color=null===s||void 0===s?void 0:s.toRgba();break;case"size":if("outline"===o.target)a.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":null!==s&&void 0!==s?s:"proportional";switch(t){case"width":c[0]=e;break;case"depth":c[1]=e;break;case"height":c[2]=e;break;case"width-and-depth":c[0]=c[1]=e;break;default:c[0]=c[1]=c[2]=e}}break;case"opacity":a.opacity=s;break;case"rotation":switch(o.axis){case"tilt":a.tilt=s;break;case"roll":a.roll=s;break;default:a.heading=s}}return"proportional"===c[0]&&"proportional"===c[1]&&"proportional"===c[2]||(a.size=c),a}async function a(t,e){var n;const r=await async function(t,e){var n,i;return null!=t.symbol?t.symbol:null!==(n=null===e||void 0===e||null===(i=e.renderer)||void 0===i?void 0:i.getSymbolAsync(t,e))&&void 0!==n?n:null}(t,e);if(!r)return null;const a=null===e||void 0===e?void 0:e.renderer,l=new o.$(a,r);if(!a||!("visualVariables"in a)||!a.visualVariables)return l;const c=null!==(n=(0,s.getVisualVariableValues)(a,t,e))&&void 0!==n?n:[],u=["proportional","proportional","proportional"];for(const{variable:o,value:s}of c)if("color"===o.type)l.color=i.A.toUnitRGBA(s);else if("size"===o.type)if("outline"===o.target)l.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":s;"width"===t?u[0]=e:"depth"===t?u[1]=e:"height"===t?u[2]=e:u[0]=u[1]="width-and-depth"===t?e:u[2]=e}else"opacity"===o.type?l.opacity=s:"rotation"===o.type&&"tilt"===o.axis?l.tilt=s:"rotation"===o.type&&"roll"===o.axis?l.roll=s:"rotation"===o.type&&(l.heading=s);return(isFinite(u[0])||isFinite(u[1])||isFinite(u[2]))&&(l.size=u),l}function l(t){const e=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0];return"number"==typeof e&&isFinite(e)?e:null}function c(t){for(let e=0;e<3;e++){const n=t[e];if("number"==typeof n)return isFinite(n)?n:0}return 0}},87925:(t,e,n)=>{n.d(e,{AK:()=>c,C8:()=>l});var i=n(45308),o=n(44815),s=n(99785),r=n(67425),a=n(1599);function l(t,e,n,i){const a=(0,s.oR)(t.rings,!!t.hasZ&&"on-the-ground"!==i.mode,1,t.spatialReference),l=(0,o.jh)(a.position.length),c=(0,r.au)(a.position,t.spatialReference,0,l,0,a.position,0,a.position.length/3,e,n,i),h=null!=c;return new y(a.position,l,d(a.polygons,a.position,l),u(a.outlines,a.position,l),h,c)}function c(t,e){const n=(0,s.oR)(t.rings,!1,1),o=(0,i.projectBuffer)(n.position,t.spatialReference,0,n.position,e,0);for(let i=2;i<n.position.length;i+=3)n.position[i]=a.bi;return{position:n.position,polygons:d(n.polygons,n.position),outlines:u(n.outlines,n.position),projectionSuccess:o}}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.filter(t=>{let{count:e}=t;return e>1}).map(t=>{let{index:i,count:s}=t;const r=3*i,a=3*s;return null!=n?new p(i,s,(0,o.l5)(e,r,a),(0,o.l5)(n,r,a)):new h(i,s,(0,o.l5)(e,r,a))})}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new Array;for(const{index:s,count:r,holeIndices:a,pathLengths:l}of t){if(r<=1)continue;const t=3*s,c=3*r,u=a.map(t=>t-s),d=null!=n?new v(s,r,(0,o.l5)(e,3*s,3*r),(0,o.l5)(n,t,c),u,l):new g(s,r,(0,o.l5)(e,3*s,3*r),u,l);i.push(d)}return i}class h{constructor(t,e,n){this.index=t,this.count=e,this.position=n}}class p extends h{constructor(t,e,n,i){super(t,e,n),this.mapPositions=i}}class v extends p{constructor(t,e,n,i,o,s){super(t,e,n,i),this.holeIndices=o,this.pathLengths=s}}class g extends h{constructor(t,e,n,i,o){super(t,e,n),this.holeIndices=i,this.pathLengths=o}}class y{constructor(t,e,n,i,o,s){this.position=t,this.mapPositions=e,this.polygons=n,this.outlines=i,this.projectionSuccess=o,this.sampledElevation=s}}},91217:(t,e,n)=>{n.d(e,{JQ:()=>v,SY:()=>h,a4:()=>d,dE:()=>p,v7:()=>u});var i=n(38983),o=n(76797),s=n(65215),r=n(38496),a=n(10294),l=n(50468),c=n(17345);function u(t,e,n){const o=(e.length>0?e[0]:t.length/3)-1,s=(0,a.S)(t,o,n);if(2!==s){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+s]=t[e+2]}return(0,i.e)(t,e,3)}function d(t){const e=[["position",new l.n(t.attributeData.position,t.indices,3,!0)]],n=(0,r.EH)(t.indices.length);return null!=t.attributeData.colorFeature?e.push(["colorFeatureAttribute",new l.n([t.attributeData.colorFeature],n,1,!0)]):t.attributeData.color&&e.push(["color",new l.n(t.attributeData.color,n,4,!0)]),t.attributeData.uvMapSpace&&e.push(["uvMapSpace",new l.n(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push(["boundingRect",new l.n(t.attributeData.boundingRect,t.indices,9,!0)]),new c.V(t.material,e,t.mapPositions,0,t.attributeData.olidColor)}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[["position",new l.n(t.attributeData.position,t.indices,3,!0)],["uv0",new l.n(t.attributeData.uv0,t.indices,2,!0)]];return new c.V(t.material,n,t.mapPositions,0,e)}function p(t){switch(t.type){case"extent":if(t instanceof o.A)return s.A.fromExtent(t);break;case"polygon":return t}return null}class v{constructor(t,e,n){this.renderData=t,this.layerViewUid=e,this.graphicUid=n,this.outGeometries=new Array}}}}]);
//# sourceMappingURL=6266.d937410a.chunk.js.map