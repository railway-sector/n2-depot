"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[4752],{29201:(e,t,i)=>{i.d(t,{I:()=>x,a:()=>m,b:()=>P});var r,s,o=i(57528),n=i(26917),a=i(59395),c=i(90080),l=i(94192),u=i(80883),p=i(3799),d=i(21390),h=i(86955),v=i(70367),f=i(91911),g=i(31432),_=i(2687);class m extends g.Y{}function P(e){const t=new _.N5,{vertex:i,fragment:g,varyings:m}=t,{output:P,perspectiveInterpolation:x}=e;return(0,p.NB)(i,e),t.include(a.d),t.include(l.Z,e),t.fragment.include(n.HQ,e),t.include(c.g,e),t.include(f.z,e),t.attributes.add("position","vec3"),t.attributes.add("uv0","vec2"),x&&t.attributes.add("perspectiveDivide","float"),i.main.add((0,h.H)(r||(r=(0,o.A)(["\n    vpos = position;\n    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);\n    vTexCoord = uv0;\n    gl_Position = transformPosition(proj, view, vpos);\n    ",""])),(0,h.If)(x,"gl_Position *= perspectiveDivide;"))),m.add("vpos","vec3",{invariant:!0}),m.add("vTexCoord","vec2"),g.include(u.a),g.uniforms.add(new d.m("opacity",e=>e.opacity),new v.N("tex",e=>e.glTexture)).main.add((0,h.H)(s||(s=(0,o.A)(["\n    discardBySlice(vpos);\n    discardByTerrainDepth();\n    ","\n    vec4 finalColor = texture(tex, vTexCoord) * opacity;\n    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);"])),(0,h.If)(10===P,"fragColor = vec4(0, 0, 0, 1); return;"))),t}const x=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:m,build:P},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>D});var r=i(89379),s=i(88105),o=i(34981),n=i(59696),a=i(34812),c=i(45463),l=i(60322),u=i(86994),p=i(82809),d=i(63928),h=i(52757),v=i(16506),f=i(59246),g=i(96643),_=i(86401),m=i(29201),P=i(57162);class x extends f.w{constructor(e,t){super(e,t,new v.$(m.I,()=>i.e(8391).then(i.bind(i,48391))),b(t).locations)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:s,cullFace:n}=e;return(0,P.Ey)({blending:(0,o.RN)(r)?(0,l.Yf)(i,!0):null,culling:(0,P.Xt)(n),depthTest:{func:(0,l.K_)(i)},depthWrite:(0,l.z5)(e),drawBuffers:(0,l.m6)(i,r),colorWrite:P.kn,stencilWrite:s?g.v0:null,stencilTest:s?t?g.a9:g.qh:null,polygonOffset:(0,l.mE)(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}function b(e){let t=_.l5;return e.perspectiveInterpolation&&(t=t.clone().f32("perspectiveDivide")),t}var w=i(6326),y=i(6485),C=i(92656);class T extends C.E{constructor(e){super(),this.draped=e,this.cullFace=0,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.olidColorInstanced=!1,this.snowCover=!1}}(0,w.Cg)([(0,y.W)({count:3})],T.prototype,"cullFace",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"enableOffset",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"writeDepth",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"hasOccludees",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"terrainDepthTest",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"cullAboveTerrain",void 0),(0,w.Cg)([(0,y.W)()],T.prototype,"perspectiveInterpolation",void 0);class D extends d.W{constructor(e){super(e,z),this.supportsEdges=!0,this.produces=new Map([[2,e=>(0,o.CL)(e)],[4,e=>(0,o._o)(e)&&this.parameters.writeDepth],[8,e=>(0,o._o)(e)&&!this.parameters.writeDepth],[18,e=>(0,o._o)(e)||(0,o.CL)(e)]]),this._configuration=new T(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<l.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new I(e)}createBufferWriter(){return new O(b(this.parameters))}}class I extends n.A{constructor(e){super((0,r.A)((0,r.A)({},e),e.material.parameters)),this.parameters=e;const t=this._material.parameters.texture;(0,a.y)(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(x,e)}}class O extends p.Z{write(e,t,i,r,o,n){for(const a of this.layout.fields.keys()){const r=i.get(a);if(r)if("perspectiveDivide"===a){(0,u.vA)(1===r.size);const e=o.getField(a,s.Y$);e&&(0,h.uO)(r,e,n)}else(0,h.Ap)(a,r,e,t,o,n)}return null}}class z extends c.q{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=0,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}},63928:(e,t,i)=>{i.d(t,{W:()=>o});var r=i(45463),s=i(48168);class o extends r.i{intersect(e,t,i,r,o,n){return(0,s.Uy)(e,i,r,o,void 0,n)}intersectDraped(e,t,i,r){return(0,s.gz)(i[0],i[1],e,r)}}},86401:(e,t,i)=>{i.d(t,{Ci:()=>s,KL:()=>a,dB:()=>n,l5:()=>o,wB:()=>c});var r=i(48549);const s=(0,r.BP)().vec3f("position").freeze(),o=(0,r.BP)().vec3f("position").vec2f16("uv0").freeze(),n=(0,r.BP)().vec3f("position").vec4u8("color").freeze(),a=(0,r.BP)().vec3f("position").vec2f("uv0").freeze(),c=(0,r.BP)().vec3f("position").vec2f("uv0").vec4u8("olidColor").freeze()},99809:(e,t,i)=>{function r(){return[1,0,0,1,0,0]}function s(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}i.d(t,{o8:()=>s,vt:()=>r});const o=[1,0,0,1,0,0];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:o,clone:s,create:r,fromValues:function(e,t,i,r,s,o){return[e,t,i,r,s,o]}},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=4752.1c6fb560.chunk.js.map