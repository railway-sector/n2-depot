{"version":3,"file":"static/js/6745.cb503cea.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/libs/basisu/BasisUEncoder.js","../node_modules/@arcgis/core/libs/dxtEncoder/DXTEncoder.js","../node_modules/@arcgis/core/views/support/TextureCompressionWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as i}from\"../../assets.js\";function s(){return t??=(async()=>{const s=await import(\"../../chunks/basis_encoder.js\"),t=await s.default({locateFile:s=>i(`esri/libs/basisu/${s}`)});return t.initializeBasis(),t})(),t}let t;function a(){t=null}export{a as destroyBasisEncoder,s as getBasisEncoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";function e(){return n??=(async()=>{const e=await import(\"../../chunks/dxt_encoder.js\");return await e.default({locateFile:e=>t(`esri/libs/dxtEncoder/${e}`)})})(),n}let n;function r(){n=null}export{r as destroyDXTEncoder,e as getDXTEncoder};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{getBasisEncoder as e,destroyBasisEncoder as t}from\"../../libs/basisu/BasisUEncoder.js\";import{getDXTEncoder as n,destroyDXTEncoder as r}from\"../../libs/dxtEncoder/DXTEncoder.js\";import{CompressedTextureFormat as a}from\"../webgl/enums.js\";let l,s,i=null,o=null;class u{constructor(e,t){this.internalFormat=e,this.compressedTexture=t}}function c(){i=null,l=null,o=null,s=null,t(),r()}async function h(e){let t;t=e.data instanceof ImageBitmap?w(e.data):y(e.data,e.width,e.height,e.components,e.needsFlip);try{if(e.hasS3TC){o||await d();const n=new Uint8Array(t.length);if(o?.encode(t,e.width,e.height,e.preMultiplyAlpha,n)){const e=U(n,!0),t=[n.buffer];return{result:new u(e?.internalFormat??null,e?.textureData??null),transferList:t}}return{result:new u(null,null)}}if(e.hasETC){if(i||await f(),e.preMultiplyAlpha&&!o&&await d(),e.preMultiplyAlpha){const n=new Uint8ClampedArray(t.length);o?.premultiply(new Uint8Array(t),e.width,e.height,n),t=n}const n=p(t,e.width,e.height,e.hasMipmap),r=n?m(n):null,a=r?.compressedTexture?.levels.map(e=>e.buffer)||[];return{result:new u(r?.internalFormat??null,r?.compressedTexture??null),transferList:a}}return{result:new u(null,null)}}finally{t instanceof ImageBitmap&&t.close()}}async function f(){i||(i=await(l??=e()),l=null)}async function d(){o||(o=await(s??=n()),s=null)}function p(e,t,n,r,a=255,l=0,s=!1,o=!1){if(!i)return null;const u=new i.BasisEncoder;u.setPerceptual(!o),u.setCheckForAlpha(!0),u.setForceAlpha(!1),u.setRenormalize(o),u.setMipGen(r),u.setMipSRGB(!o),u.setCreateKTX2File(!0),u.setKTX2SRGBTransferFunc(!o),u.setQualityLevel(a),u.setCompressionLevel(l);const c=new Uint8Array(e.byteLength);u.setSliceSourceImage(0,new Uint8Array(e),t,n,s);const h=u.encode(c),f=new Uint8Array(c.buffer,0,h),d=new i.KTX2File(new Uint8Array(f));return d.isValid()?(u.delete(),f):(d.close(),d.delete(),u.delete(),null)}function m(e){if(!i)return new u(null,null);const t=new i.KTX2File(new Uint8Array(e));t.startTranscoding();const[n,r]=t.getHasAlpha()?[1,a.COMPRESSED_RGBA8_ETC2_EAC]:[0,a.COMPRESSED_RGB8_ETC2],l=t.getLevels(),s=[];for(let a=0;a<l;a++)s.push(new Uint8Array(t.getImageTranscodedSizeInBytes(a,0,0,n))),t.transcodeImage(s[a],a,0,0,n,0,-1,-1);return t.close(),t.delete(),{internalFormat:r,compressedTexture:{type:\"compressed\",levels:s}}}function w(e){const t=new OffscreenCanvas(e.width,e.height),n=t.getContext(\"2d\");n.drawImage(e,0,0);return n.getImageData(0,0,t.width,t.height).data}function y(e,t,n,r,a){const l=new Uint8ClampedArray(e).subarray(0,t*n*r);if(!a)return l;const s=new Uint8ClampedArray(l.length),i=t*r;for(let o=0;o<n;o++){const e=o*i,t=(n-o-1)*i;s.set(l.subarray(e,e+i),t)}return s}const T=31,A=1,g=2,C=3,E=4,S=7,b=21,_=131072;function D(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}const M=D(\"DXT1\"),X=D(\"DXT3\"),R=D(\"DXT5\");function U(e,t){const n=new Int32Array(e.buffer,e.byteOffset,T);let r,l;switch(n[b]){case M:r=8,l=a.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case X:r=16,l=a.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case R:r=16,l=a.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}let s=1,i=n[E],o=n[C];(3&i||3&o)&&(i=i+3&-4,o=o+3&-4);const u=i,c=o;let h,f;n[g]&_&&!1!==t&&(s=Math.max(1,n[S]));let d=e.byteOffset+n[A]+4;const p=[];for(let a=0;a<s;++a)f=(i+3>>2)*(o+3>>2)*r,h=new Uint8Array(e.buffer,d,f),p.push(h),d+=f,i=Math.max(1,i>>1),o=Math.max(1,o>>1);return{textureData:{type:\"compressed\",levels:p},internalFormat:l,width:u,height:c}}export{u as TextureCompressionWorkerOutput,h as compress,p as compressRGBADataToKTX2,m as createTextureDataKTX2,c as destroy,f as initializeBasisEncoder,d as initializeDXTEncoder};\n"],"names":["t","n","l","s","i","o","u","constructor","e","this","internalFormat","compressedTexture","c","async","h","data","ImageBitmap","OffscreenCanvas","width","height","getContext","drawImage","getImageData","w","r","a","Uint8ClampedArray","subarray","length","set","y","components","needsFlip","hasS3TC","_o","d","Uint8Array","encode","preMultiplyAlpha","_e$internalFormat","_e$textureData","Int32Array","buffer","byteOffset","T","b","M","COMPRESSED_RGB_S3TC_DXT1_EXT","X","COMPRESSED_RGBA_S3TC_DXT3_EXT","R","COMPRESSED_RGBA_S3TC_DXT5_EXT","E","C","f","g","_","Math","max","S","A","p","push","textureData","type","levels","U","result","transferList","hasETC","_r$compressedTexture","_r$internalFormat","_r$compressedTexture2","_o2","premultiply","hasMipmap","m","map","close","default","locateFile","concat","initializeBasis","arguments","undefined","BasisEncoder","setPerceptual","setCheckForAlpha","setForceAlpha","setRenormalize","setMipGen","setMipSRGB","setCreateKTX2File","setKTX2SRGBTransferFunc","setQualityLevel","setCompressionLevel","byteLength","setSliceSourceImage","KTX2File","isValid","delete","startTranscoding","getHasAlpha","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_RGB8_ETC2","getLevels","getImageTranscodedSizeInBytes","transcodeImage","D","charCodeAt"],"sourceRoot":""}