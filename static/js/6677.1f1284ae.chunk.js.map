{"version":3,"file":"static/js/6677.1f1284ae.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/locationUtils.js","../node_modules/@arcgis/core/layers/support/ParquetEncodingLocation.js","../node_modules/@arcgis/core/layers/support/ParquetEncodingWkb.js","../node_modules/@arcgis/core/layers/support/parquetEncodingUtils.js","../node_modules/@arcgis/core/layers/support/parquetUtils.js","../node_modules/@arcgis/core/layers/graphics/sources/support/ParquetSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{normalizeFieldName as e}from\"./fieldUtils.js\";function n(n,d,i){d=e(d)?.toLowerCase(),i=e(i)?.toLowerCase();const o=n.map(e=>e.toLowerCase()),a=d?n[o.indexOf(d)]:null,u=i?n[o.indexOf(i)]:null;return{longitudeFieldName:a||n[o.indexOf(t.find(e=>o.includes(e)))],latitudeFieldName:u||n[o.indexOf(l.find(e=>o.includes(e)))]}}const l=[\"lat\",\"lat83\",\"latitude\",\"latitude83\",\"latdecdeg\",\"lat_dd\",\"y\",\"ycenter\",\"point_y\"],t=[\"lon\",\"lng\",\"lng83\",\"long\",\"long83\",\"longitude\",\"longitude83\",\"longdecdeg\",\"long_dd\",\"x\",\"xcenter\",\"point_x\"];export{n as inferLocationInfo,l as latitudeFieldNames,t as longitudeFieldNames};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(o){super(o),this.type=\"location\",this.latitudeFieldName=null,this.longitudeFieldName=null}};o([r({type:[\"location\"],readOnly:!0,json:{write:!0}})],s.prototype,\"type\",void 0),o([r({json:{write:!0}})],s.prototype,\"latitudeFieldName\",void 0),o([r({json:{write:!0}})],s.prototype,\"longitudeFieldName\",void 0),s=o([e(\"esri.layers.support.ParquetEncodingLocation\")],s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import{JSONSupport as o}from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends o{constructor(r){super(r),this.type=\"wkb\",this.primaryFieldName=null}};r([t({type:[\"wkb\"],readOnly:!0,json:{write:!0}})],s.prototype,\"type\",void 0),r([t({json:{write:!0}})],s.prototype,\"orientation\",void 0),r([t({json:{write:!0}})],s.prototype,\"primaryFieldName\",void 0),s=r([e(\"esri.layers.support.ParquetEncodingWkb\")],s);export{s as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport o from\"./ParquetEncodingLocation.js\";import r from\"./ParquetEncodingWkb.js\";function t(t){switch(t.type){case\"wkb\":return r.fromJSON(t);case\"location\":return o.fromJSON(t)}}export{t as fromParquetEncodingJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import t from\"../../core/Error.js\";import{JSONMap as o}from\"../../core/jsonMap.js\";import n from\"../../geometry/SpatialReference.js\";import i from\"./Field.js\";import{inferLocationInfo as r}from\"./locationUtils.js\";import l from\"./ParquetEncodingLocation.js\";import s from\"./ParquetEncodingWkb.js\";import{createParquetFile as a,readGeoMetadata as m,readEsriMetadata as u}from\"../../libs/parquet/parquet.js\";const c=new o({esriGeometryPoint:\"point\",esriGeometryPolygon:\"polygon\",esriGeometryPolyline:\"polyline\",esriGeometryMultipoint:\"multipoint\"});function p(e){return c.toJSON(e)}function f(e){return c.fromJSON(e)}function d(t,o={}){return y({urls:new e(t)},o)}async function y(e,o={}){if(e.geometryType&&e.spatialReference&&e.encoding&&e.fields)return e;if(e.urls.length<1)throw new t(\"parquet:bad-input\",\"At least one url must be specified\",e);const r=await a(e.urls.getItemAt(0),{getCustomParameters:()=>o.customParameters}),l=m(r),s={...e,file:r};null==s.fields&&(s.fields=r.fields().map(e=>i.fromJSON({name:e.name,type:e.type}))),null==s.encoding&&(s.encoding=g(l,s.fields));const c=u(r);if(c)switch(c.mode){case\"z\":s.displayOptimization={mode:\"z\"};break;case\"xz\":{const e=c.multiscale;if(!e)throw new t(\"bad-format\",\"XZ display optimization requires multiscale geometries\");s.displayOptimization={mode:\"xz\",multiscale:e};break}}if(!s.encoding)return s;switch(s.encoding.type){case\"location\":null==s.spatialReference&&(s.spatialReference=n.WGS84),null==s.geometryType&&(s.geometryType=\"point\");break;case\"wkb\":{if(!l)return s;const e=l.primary_column,t=l.columns[e];if(s.geometryType||(s.geometryType=P(t)),s.spatialReference||(s.spatialReference=b(t)),s.fields)for(const o of Object.keys(l.columns))s.fields=s.fields.filter(e=>e.name!==o)}}return s}function g(e,t){if(null!=e){const t=e.primary_column,o=e.columns[t];return new s({primaryFieldName:t,orientation:o.orientation??null})}const o=r(t.map(e=>e.name));return o.latitudeFieldName&&o.longitudeFieldName?new l({latitudeFieldName:o.latitudeFieldName,longitudeFieldName:o.longitudeFieldName}):null}function w(e){switch(e){case\"Point\":return\"point\";case\"Polygon\":case\"MultiPolygon\":return\"polygon\";case\"LineString\":return\"polyline\";case\"MultiPoint\":return\"multipoint\";default:return null}}function P(e){const{geometry_types:o}=e,n=new Set;for(const t of o){const e=w(t);e&&n.add(e)}if(n.size>1)throw new t(\"unsupported\",\"Parquet mixed geometry types are not support\",{geometryTypes:n});return 1===n.size?n.values().next().value:void 0}function b(e){const t=e.crs?.id?.code;return t&&\"number\"==typeof t?new n({wkid:t}):void 0}export{y as completeParquetLayerInfo,f as fromParquetJSONGeometryType,d as getParquetLayerInfo,c as parquetGeometryTypeKebabDict,p as toParquetJSONGeometryType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__addDisposableResource as e,__disposeResources as t}from\"tslib\";import s from\"../../../../core/Collection.js\";import{toConst as r}from\"../../../../core/compilerUtils.js\";import o from\"../../../../core/Error.js\";import has from\"../../../../core/has.js\";import i from\"../../../../core/Logger.js\";import{QueueProcessor as n}from\"../../../../core/QueueProcessor.js\";import a from\"../../../../geometry/SpatialReference.js\";import{set as u,create as p,expandWithRect as l,expandWithAABB as c,negativeInfinity as d,fromRect as f}from\"../../../../geometry/support/aaBoundingBox.js\";import{getQueryResultExtent as m,QueryEngine as y}from\"../../data/QueryEngine.js\";import{QueryEngineResult as h}from\"../../data/QueryEngineResult.js\";import{createDrawingInfo as g}from\"./clientSideDefaults.js\";import _ from\"../../../support/Field.js\";import w from\"../../../support/FieldsIndex.js\";import{collectSQLFieldNames as I}from\"../../../support/fieldUtils.js\";import{fromParquetEncodingJSON as R}from\"../../../support/parquetEncodingUtils.js\";import{completeParquetLayerInfo as x,fromParquetJSONGeometryType as S,toParquetJSONGeometryType as F}from\"../../../support/parquetUtils.js\";import{createParquetFile as q,readGeoMetadata as C}from\"../../../../libs/parquet/parquet.js\";import{FeatureStoreQueryAdapter as b}from\"../../../../views/2d/layers/features/FeatureStoreQueryAdapter.js\";import{FeatureSnapshotSourceChunk as v}from\"../../../../views/2d/layers/features/sources/strategies/chunks/FeatureSnapshotSourceChunk.js\";import{FeatureSourceChunkStore as O}from\"../../../../views/2d/layers/features/sources/strategies/chunks/SourceChunkStore.js\";import{FeatureMetadata as j}from\"../../../../views/2d/layers/features/support/FeatureMetadata.js\";import{FeatureSetReaderParquet as Q}from\"../../../../views/2d/layers/features/support/FeatureSetReaderParquet.js\";const A=new b,E=4,P=8e3,B=\"__OBJECTID\";class T{constructor(){this._fileInfos=new Map,this._queue=new n({concurrency:E,process:(e,t)=>this._executeQuery(e,t)})}async load(r){const n=r.spatialReference?a.fromJSON(r.spatialReference):void 0;if(n&&!n.isWGS84&&!n.isWebMercator)throw new o(\"parquet:unsupported-projection\",\"Only WGS84 and Web Mercator are supported\");const c=await x({urls:new s(r.urls),fields:r.fields?.map(e=>_.fromJSON(e)),encoding:r.encoding?R(r.encoding):r.encoding,geometryType:r.geometryType?S(r.geometryType):null,spatialReference:n},{customParameters:r.customParameters});let f;if(c.geometryType&&c.encoding){if(!c.spatialReference)throw new o(\"parquet:unsupported\",\"SpatialReference must be defined\");if(!c.spatialReference.isGeographic&&!c.spatialReference.isWebMercator)throw new o(\"parquet:unsupported-projection\",\"Only WGS84 and Web Mercator are supported\");c.spatialReference.isGeographic&&!c.spatialReference.isWGS84&&(i.getLogger(\"parquet:unsupported-projection\").warn(\"Found a geographic projection that is not WGS84. Handling as WGS84.\",{spatialReference:c.spatialReference}),c.spatialReference=a.WGS84),f={geometryType:F(c.geometryType),spatialReference:c.spatialReference.toJSON(),encoding:c.encoding.toJSON(),displayOptimization:c.displayOptimization}}this.setCustomParameters(r.customParameters),this._geometryInfo=f;const m=r.urls;for(const e of m){const t=await q(e,{geometryInfo:f,outSpatialReference:null,getCustomParameters:()=>this._customParameters});this._fileInfos.set(e,{index:this._fileInfos.size,file:t})}this._capabilities=N(await this.getFileStatistics());const y=this._fileInfos.values().next().value?.file;if(!y)return{layerDefinition:{},capabilities:N(null)};const{fields:h}=c;if(null==h)throw new o(\"parquet-layer:missing-metadata\",\"Unable to create parquet source: cannot infer fields\",h);h.push(new _({name:B,type:\"oid\",alias:B}));const I={fields:h.map(e=>({...e.toJSON(),column:y.columnForFieldName(e.name)})),timeZoneByFieldName:null},C=w.fromJSON(I);this._fieldsIndex=C;const b=F(c.geometryType??\"point\");if(this._metadata=j.createFeature({fieldsIndex:I,geometryType:b,featureIdInfo:{type:\"object-id\",fieldName:\"rowId\"},subtypes:null,subtypeField:null,types:null,typeIdField:null,globalIdField:null,spatialReference:c.spatialReference,outSpatialReference:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null}),this._queryEngineParams={fieldsIndex:this._metadata.fieldsIndex,geometryType:f?.geometryType??\"esriGeometryPoint\",featureIdInfo:{type:\"object-id\",fieldName:\"rowId\"},hasM:!1,hasZ:!1,spatialReference:f?.spatialReference??{wkid:4326},aggregateAdapter:null,timeInfo:null,definitionExpression:null},c.spatialReference&&(this._fullExtent=k(this._fileInfos.values(),c.spatialReference.toJSON())),null==this._fullExtent&&\"location\"===c.encoding?.type){const{latitudeFieldName:s,longitudeFieldName:r}=c.encoding,o=this._fieldsIndex.get(s)?.column,i=this._fieldsIndex.get(r)?.column,n=u(p(),d);for(const a of this._fileInfos.values())for(const s of a.file.rowGroups()){const r={stack:[],error:void 0,hasError:!1};try{const t=e(r,s.columnDescriptorForAttribute(o),!1),a=e(r,s.columnDescriptorForAttribute(i),!1),u=[a.minValue(),t.minValue(),a.maxValue(),t.maxValue()];l(n,u),s.free()}catch(v){r.error=v,r.hasError=!0}finally{t(r)}}this._fullExtent={xmin:n[0],ymin:n[1],xmax:n[3],ymax:n[4],spatialReference:c.spatialReference?.toJSON()}}return{capabilities:this._capabilities,layerDefinition:{fields:c.fields?.map(e=>e.toJSON()),drawingInfo:g(b),extent:this._fullExtent??void 0,geometryType:b,encoding:c.encoding?.toJSON(),displayOptimization:c.displayOptimization}}}destroy(){for(const e of this._fileInfos.values())e.file.free();this._fileInfos.clear(),this._queue.destroy()}setCustomParameters(e){this._customParameters=e}getFileStatistics(){if(!this._fileInfos.size)return null;const e=Array.from(this._fileInfos.values()).reduce((e,t)=>e+t.file.byteLength(),0);return{featureCount:this._getFeatureCount(),byteLength:e}}async updateFiles(e){const t=new Set(e);for(const[s,r]of this._fileInfos.entries())t.has(s)?t.delete(s):(r.file.free(),this._fileInfos.delete(s));for(const s of t){const e=await q(s,{geometryInfo:this._geometryInfo,outSpatialReference:null,getCustomParameters:()=>this._customParameters});this._fileInfos.set(s,{index:this._fileInfos.size,file:e})}}async queryFeatures(e,t){this._validateQuery(e),z(e)||(e.resultRecordCount=e.resultRecordCount?Math.min(e.resultRecordCount,8e3):8e3,e.resultOffset=e.resultOffset??0),(e.outStatistics||e.returnDistinctValues)&&delete e.returnGeometry;return(await this._enqueueQuery(e,t)).createQueryResponse()}async queryFeatureCount(e,t){if(this._validateQuery(e),!G(e))return this._getFeatureCount();delete e.outFields,delete e.returnGeometry;return(await this._enqueueQuery(e,t)).createQueryResponseForCount()}async queryObjectIds(e,t){if(this._validateQuery(e),!G(e))return Array.from({length:this._getFeatureCount()},(e,t)=>t);e.resultRecordCount=e.resultRecordCount?Math.min(e.resultRecordCount,8e3):8e3,e.resultOffset=e.resultOffset??0,delete e.returnGeometry,delete e.outFields;return(await this._enqueueQuery(e,t)).items.map(e=>e.getObjectId())}async queryExtent(e,t){if(this._validateQuery(e),this._fullExtent&&!G(e))return{count:this._getFeatureCount(),extent:this._fullExtent};const s=r(this._metadata.spatialReference);e.returnGeometry=!0,delete e.outFields;const o=u(p(),d),i=p(),n=await this._enqueueQuery(e,t);let a=0;for(const r of n.items)r.getBounds(i)&&(c(o,i),a+=1);return{count:a,extent:m(o,s,e.outSR?r(e.outSR):s,s,!1)}}_getFeatureCount(){return Array.from(this._fileInfos.values()).reduce((e,t)=>e+t.file.numRows(),0)}_validateQuery(e){if(!this._capabilities.query.supportsStatistics&&e.outStatistics)throw new o(\"parquet:unsupported\",\"Statistics queries are not supported\",{query:e});if(!this._capabilities.query.supportsOrderBy&&e.orderByFields?.length)throw new o(\"parquet:unsupported\",\"Queries using orderBy are not supported\",{query:e});if(!this._capabilities.query.supportsDistinct&&e.returnDistinctValues)throw new o(\"parquet:unsupported\",\"Queries using returnDistinctValues are not supported\",{query:e})}async*_fetchChunks(e,t){for(const s of this._fileInfos.values()){const r=s.file.numRows(),o=Math.ceil(r/P);for(let i=0;i<o;i++){const r=i*P,o=await s.file.readChunk(r,P,e.fields,e.returnGeometry,t);for(const e of o){const t=new Q(this._metadata,this._fieldsIndex,e,0,s.index),r=M([new v(t,null,0,!1)],this._queryEngineParams);yield r}}}}_enqueueQuery(e,t){return this._queue.push(e,t)}async _executeQuery(e,t){const s=await this._getReadParams(e);if(e.objectIds?.length)for(const n of this._fileInfos.values()){const r=[],o=M((await n.file.readChunksByRowId(new Uint32Array(e.objectIds),s.fields,s.returnGeometry,t)).map((e,t)=>new Q(this._metadata,this._fieldsIndex,e,t,n.index)).map((e,t)=>new v(e,null,t,!1)),this._queryEngineParams),i=await o.executeQueryForOpaqueFeatures(e,t);for(const e of i)r.push(e);return new h(r,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:\"rowId\",hasM:!1,hasZ:!1,featureAdapter:A})}let r=e.resultRecordCount??this._getFeatureCount(),o=e.resultOffset??0;delete e.resultRecordCount,delete e.resultOffset;const i=[];for await(const n of this._fetchChunks(s,t)){const s=await n.executeQueryForOpaqueFeatures(e,t);if(s.length>o){const t=s.slice(o,Math.min(o+r,s.length));for(const e of t)i.push(e);if(o=0,r-=t.length,0===r)return new h(i,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:\"rowId\",hasM:!1,hasZ:!1,featureAdapter:A})}else o-=s.length}return new h(i,e,{fieldsIndex:this._fieldsIndex,geometryType:this._metadata.geometryType,spatialReference:this._queryEngineParams.spatialReference,objectIdField:\"rowId\",hasM:!1,hasZ:!1,featureAdapter:A})}async _getReadParams(e){const t=new Set;if(e.where&&await I(t,this._fieldsIndex,e.where),e.outStatistics)for(const s of e.outStatistics)null!=s.onStatisticField&&t.add(s.onStatisticField);if(e.outFields)for(const s of e.outFields)t.add(s);return{fields:this._getAttributeIds(Array.from(t)),returnGeometry:!!e.returnGeometry||!!e.geometry}}_getAttributeIds(e){if(null==e)return new Uint32Array;if(e.includes(\"*\"))return new Uint32Array(this._fieldsIndex.fields.map(e=>e.column).filter(e=>null!=e));const t=[];for(const s of e){const e=this._fieldsIndex.get(s);if(null==e)throw new o(\"unknown-field\",`Field ${s} does not exist`);null==e.column||t.push(e.column)}return new Uint32Array(t)}}function G(e){return Object.keys(e).some(e=>D(e))}function D(e){switch(e){case\"resultOffset\":case\"resultRecordCount\":case\"aggregateIds\":case\"distance\":case\"gdbVersion\":case\"geometry\":case\"having\":case\"timeExtent\":case\"where\":case\"objectIds\":case\"historicMoment\":return!0;default:return!1}}function M(e,t){const s=new O;for(const r of e)s.insert(r);return new y({...t,featureStore:s})}function U(e){switch(e.length){case 4:return f(p(),e);case 6:return e;default:throw new o(\"parquet:protocol-violation\",\"Invalid Geoparquet file. BoundingBox size must be 4 or 6.\",{bbox:e})}}function k(e,t){const s=u(p(),d);for(const r of e){const e=C(r.file);if(!e)return null;const t=e.columns[e.primary_column];if(!t.bbox)return null;const o=U(t.bbox);c(s,o)}return{xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:t}}function N(e){const t=e?.featureCount;let s=!1;return null!=t&&t<has(\"parquetlayer-full-query-feature-count\")&&(s=!0),{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,isBranchVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryBins:!1,supportsQueryPivot:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:8e3,maxRecordCountFactor:void 0,maxUniqueIDCount:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!0,supportsCentroidOnDegeneratedQuantizedGeometry:!1,supportsCurrentUser:!1,supportsDegeneratedQuantizedGeometry:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:s,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:s,supportsPagination:!0,supportsPaginationOnAggregatedQueries:!1,supportsPercentileStatistics:!1,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsReturnMesh:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:s,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,supportsTrueCurve:!1,tileMaxRecordCount:void 0},queryAttributeBins:{supportsDate:!1,supportsFixedInterval:!1,supportsAutoInterval:!1,supportsFixedBoundaries:!1,supportsStackBy:!1,supportsSplitBy:!1,supportsSnapToData:!1,supportsReturnFullIntervalBin:!1,supportsFirstDayOfWeek:!1,supportsNormalization:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1,supportsAsyncApplyEdits:!1,zDefault:void 0}}}function z(e){return!!(e.objectIds?.length||e.outStatistics||e.orderByFields?.length||e.returnDistinctValues)}export{T as default};\n"],"names":["n","d","i","_e","_e2","e","toLowerCase","o","map","a","indexOf","u","longitudeFieldName","t","find","includes","latitudeFieldName","l","s","constructor","super","this","type","r","readOnly","json","write","prototype","primaryFieldName","fromJSON","c","esriGeometryPoint","esriGeometryPolygon","esriGeometryPolyline","esriGeometryMultipoint","p","toJSON","f","async","y","arguments","length","undefined","geometryType","spatialReference","encoding","fields","urls","getItemAt","getCustomParameters","customParameters","m","_objectSpread","file","name","g","mode","displayOptimization","multiscale","WGS84","primary_column","columns","geometry_types","Set","w","add","size","geometryTypes","values","next","value","P","_e$crs","crs","id","code","wkid","b","Object","keys","filter","_o$orientation","orientation","A","B","T","_fileInfos","Map","_queue","concurrency","process","_executeQuery","load","_r$fields","_this$_fileInfos$valu","_c$geometryType","_f$geometryType","_f","_f$spatialReference","_f2","_c$encoding","_c$fields","_this$_fullExtent","_c$encoding2","isWGS84","isWebMercator","x","_","R","S","isGeographic","getLogger","warn","F","setCustomParameters","_geometryInfo","q","geometryInfo","outSpatialReference","_customParameters","set","index","_capabilities","N","getFileStatistics","layerDefinition","capabilities","h","push","alias","I","column","columnForFieldName","timeZoneByFieldName","C","_fieldsIndex","_metadata","j","createFeature","fieldsIndex","featureIdInfo","fieldName","subtypes","subtypeField","types","typeIdField","globalIdField","timeInfo","timeReferenceUnknownClient","dateFieldsTimeZone","_queryEngineParams","hasM","hasZ","aggregateAdapter","definitionExpression","_fullExtent","bbox","U","xmin","ymin","xmax","ymax","k","_this$_fieldsIndex$ge","_this$_fieldsIndex$ge2","_c$spatialReference","get","rowGroups","stack","error","hasError","columnDescriptorForAttribute","minValue","maxValue","free","v","drawingInfo","extent","destroy","clear","Array","from","reduce","byteLength","featureCount","_getFeatureCount","updateFiles","entries","has","delete","queryFeatures","_e$resultOffset","_validateQuery","_e$objectIds2","_e$orderByFields2","objectIds","outStatistics","orderByFields","returnDistinctValues","z","resultRecordCount","Math","min","resultOffset","returnGeometry","_enqueueQuery","createQueryResponse","queryFeatureCount","G","outFields","createQueryResponseForCount","queryObjectIds","_e$resultOffset2","items","getObjectId","queryExtent","count","getBounds","outSR","numRows","_e$orderByFields","query","supportsStatistics","supportsOrderBy","supportsDistinct","_fetchChunks","_this","_wrapAsyncGenerator","ceil","_awaitAsyncGenerator","readChunk","Q","M","_e$objectIds","_e$resultRecordCount","_e$resultOffset3","_getReadParams","readChunksByRowId","Uint32Array","executeQueryForOpaqueFeatures","objectIdField","featureAdapter","_iteratorError","_iteratorAbruptCompletion","_didIteratorError","_step","_iterator","_asyncIterator","done","slice","err","return","where","onStatisticField","_getAttributeIds","geometry","concat","some","D","O","insert","featureStore","analytics","supportsCacheHint","attachment","data","isVersioned","isBranchVersioned","supportsAttachment","supportsM","supportsZ","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryBins","supportsQueryPivot","supportsQueryAnalytics","supportsQueryAttachments","supportsQueryTopFeatures","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","supportsAsyncConvert3D","maxRecordCount","maxRecordCountFactor","maxUniqueIDCount","standardMaxRecordCount","supportsCentroid","supportsCentroidOnDegeneratedQuantizedGeometry","supportsCurrentUser","supportsDegeneratedQuantizedGeometry","supportsDisjointSpatialRelationship","supportsDistance","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPagination","supportsPaginationOnAggregatedQueries","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByAnonymous","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsReturnMesh","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsDefaultSpatialReference","supportsFullTextSearch","supportsCompactGeometry","supportsSqlExpression","supportsTrueCurve","tileMaxRecordCount","queryAttributeBins","supportsDate","supportsFixedInterval","supportsAutoInterval","supportsFixedBoundaries","supportsStackBy","supportsSplitBy","supportsSnapToData","supportsReturnFullIntervalBin","supportsFirstDayOfWeek","supportsNormalization","queryRelated","supportsCount","queryTopFeatures","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUploadWithItemId","supportsUpdateWithoutM","supportsAsyncApplyEdits","zDefault"],"sourceRoot":""}