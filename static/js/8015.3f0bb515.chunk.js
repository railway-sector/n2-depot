"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[8015],{48015:(e,t,i)=>{i.r(t),i.d(t,{Feature:()=>_,convertAttributeToArcadeValue:()=>b,getArcadeVariableForField:()=>g});var n=i(89379),r=i(46405),s=i(9634),l=i(67253),a=i(9861),o=i(43036),u=i(83101),d=i(16503),h=i(14902),c=i(89189),f=i(19902),y=i(98618),m=i(1900),p=i(85632);function g(e){switch(e.type){case"small-integer":case"esriFieldTypeSmallInteger":case"integer":case"esriFieldTypeInteger":case"single":case"esriFieldTypeSingle":case"double":case"esriFieldTypeDouble":case"big-integer":case"esriFieldTypeBigInteger":case"long":case"esriFieldTypeLong":case"oid":case"esriFieldTypeOID":return{name:e.name,type:"number"};case"global-id":case"esriFieldTypeGlobalID":case"guid":case"esriFieldTypeGUID":case"string":case"esriFieldTypeString":return{name:e.name,type:"text"};case"date":case"esriFieldTypeDate":case"timestamp-offset":case"esriFieldTypeTimestampOffset":return{name:e.name,type:"date"};case"date-only":case"esriFieldTypeDateOnly":return{name:e.name,type:"dateOnly"};case"time-only":case"esriFieldTypeTimeOnly":return{name:e.name,type:"time"};default:return null}}function b(e,t,i){if(null==e)return null;switch(t){case"time-only":return(0,o.g)(e)?e:h.k.fromReader(e.toString());case"date-only":return(0,o.f)(e)?e:d.n.fromReader(e.toString());case"timestamp-offset":return(0,o.e)(e)?e:r.lY.fromReaderAsTimeStampOffset(e.toString());case"date":return(0,o.e)(e)?e:(0,p.$P)(e)?r.lY.dateJSAndZoneToArcadeDate(e,i):r.lY.epochToArcadeDate(e,i);case"geometry":return null;default:return e}}class _{constructor(){this.arcadeDeclaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._fieldTypesFixed=!0,this.fieldsIndex=null,this.contextTimeZone=null,this.immutable=!0,this._fieldsToFixDataTypes=null,this.immutable=!0}static createFromGraphic(e,t){const i=new _;return i.contextTimeZone=null!==t&&void 0!==t?t:null,i._geometry=null!=e.geometry?e.geometry:null,void 0===e.attributes||null===e.attributes?i.attributes={}:i.attributes=e.attributes,e._sourceLayer?(i._layer=e._sourceLayer,i._fieldTypesFixed=!1):e._layer?(i._layer=e._layer,i._fieldTypesFixed=!1):e.layer&&"fields"in e.layer?(i._layer=e.layer,i._fieldTypesFixed=!1):e.sourceLayer&&"fields"in e.sourceLayer&&(i._layer=e.sourceLayer,i._fieldTypesFixed=!1),i._layer&&!i._fieldTypesFixed&&(i.fieldsIndex=this.hydrateFieldsIndex(i._layer)),i}static createFromArcadeFeature(e){if(e instanceof _){const t=new _;return t._fieldTypesFixed=e._fieldTypesFixed,t.attributes=e.attributes,t._geometry=e._geometry,t._optimizedGeomDefinition=e._optimizedGeomDefinition,e._layer&&(t._layer=e._layer),t.fieldsIndex=e.fieldsIndex,t.contextTimeZone=e.contextTimeZone,t}const t={};for(const i of e.keys())t[i]=e.field(i);return _.createFromGraphicLikeObject(e.geometry(),t,e.fullSchema(),e.contextTimeZone)}static createFromOptimisedFeature(e,t,i){const n=new _;return n._geometry=e.geometry?{geometry:e.geometry}:null,n._optimizedGeomDefinition=i,n.attributes=e.attributes||{},n._layer=t,n._fieldTypesFixed=!1,n}static createFromArcadeDictionary(e,t){const i=new _;return i.attributes=e.field("attributes"),null!==i.attributes&&i.attributes instanceof l.A?(i.attributes=i.attributes.attributes,null===i.attributes&&(i.attributes={})):i.attributes={},i._geometry=e.field("geometry"),null!==i._geometry&&(i._geometry instanceof l.A?i._geometry=(0,u.E)(i._geometry,t):i._geometry instanceof c.A||(i._geometry=null)),i}static createFromGraphicLikeObject(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;const r=new _;return r.contextTimeZone=null!==n&&void 0!==n?n:null,null===t&&(t={}),r.attributes=t,r._geometry=null!=e?e:null,r._layer=i,r._layer&&(r._fieldTypesFixed=!1,r.fieldsIndex=this.hydrateFieldsIndex(r._layer)),r}static hydrateFieldsIndex(e){var t;return null===e?null:(0,o.m)(e)?e.getFieldsIndex():e.fieldsIndex?e.fieldsIndex:m.A.fromLayerJSON({datesInUnknownTimezone:e.datesInUnknownTimezone,fields:e.fields,timeInfo:e.timeInfo,editFieldsInfo:e.editFieldsInfo,dateFieldsTimeReference:null!==(t=e.dateFieldsTimeReference)&&void 0!==t?t:{timeZone:"UTC",respectsDaylightSaving:!1}})}repurposeFromGraphicLikeObject(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===t&&(t={}),this.attributes=t,this._geometry=null!==e&&void 0!==e?e:null,this._layer=i,this._layer?this._fieldTypesFixed=!1:this._fieldTypesFixed=!0}castToText(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!1===this._fieldTypesFixed&&this._fixFieldTypes();const t=(0,o.c)(this.attributes,{useNumbersForDates:e});return'{"geometry":'+(null===this.geometry()?"null":(0,o.t)(this.geometry()))+',"attributes":'+t+"}"}_fixFieldTypes(){var e;if(this._fieldsToFixDataTypes&&(null===(e=this._fieldsToFixDataTypes)||void 0===e?void 0:e.length)>0)return this._fixAllFields(this._fieldsToFixDataTypes),void(this._fieldTypesFixed=!0);const t=[],i=this._layer.fields;for(let r=0;r<(null!==(n=null===i||void 0===i?void 0:i.length)&&void 0!==n?n:0);r++){var n;const e=i[r],{name:s,type:l}=e;switch(l){case"date":case"esriFieldTypeDate":t.push({field:s,dataType:"date"});break;case"date-only":case"esriFieldTypeDateOnly":t.push({field:s,dataType:"date-only"});break;case"time-only":case"esriFieldTypeTimeOnly":t.push({field:s,dataType:"time-only"});break;case"timestamp-offset":case"esriFieldTypeTimestampOffset":t.push({field:s,dataType:"timestamp-offset"});break;case"geometry":case"esriFieldTypeGeometry":t.push({field:s,dataType:"geometry"})}}this._fieldsToFixDataTypes=t,t.length>0&&this._fixAllFields(t),this._fieldTypesFixed=!0}isUnknownDateTimeField(e){var t;return"unknown"===(null===(t=this.fieldsIndex)||void 0===t?void 0:t.getTimeZone(e))}_fixAllFields(e){var t;this.attributes=(0,n.A)({},this.attributes);const i=null!==(t=this.contextTimeZone)&&void 0!==t?t:"system";for(let n=0;n<e.length;n++){const t=e[n].field,r=e[n].dataType;let s=this.attributes[t];if(void 0===s){for(const e in this.attributes)if(e.toLowerCase()===t.toLowerCase()){s=this.attributes[e],this.attributes[e]=b(s,r,this.isUnknownDateTimeField(e)?"unknown":i);break}}else null!==s&&(this.attributes[t]=b(s,r,this.isUnknownDateTimeField(t)?"unknown":i))}}geometry(){return null===this._geometry||this._geometry instanceof c.A||(this._optimizedGeomDefinition?(this._geometry=(0,f.rS)((0,y.zv)(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM)),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=(0,f.rS)(this._geometry)),this._geometry}field(e){this._fieldTypesFixed||this._fixFieldTypes();const t=this.attributes[e];if(void 0!==t)return t;const i=e.toLowerCase();for(const n in this.attributes)if(n.toLowerCase()===i)return this.attributes[n];if(this._hasFieldDefinition(i))return null;throw new a.D$(null,"FieldNotFound",null,{key:e})}_hasFieldDefinition(e){if(null===this._layer)return!1;for(let t=0;t<this._layer.fields.length;t++)if(this._layer.fields[t].name.toLowerCase()===e)return!0;return!1}setField(e,t){if(this.immutable)throw new a.D$(null,"Immutable",null);if(t instanceof Date&&(t=this.isUnknownDateTimeField(e)?r.lY.unknownDateJSToArcadeDate(t):r.lY.dateJSToArcadeDate(t)),!1===(0,o.d)(t))throw new a.D$(null,"TypeNotAllowedInFeature",null);const i=e.toLowerCase();if(void 0===this.attributes[e]){for(const e in this.attributes)if(e.toLowerCase()===i)return void(this.attributes[e]=t);this.attributes[e]=t}else this.attributes[e]=t}hasField(e){const t=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(const i in this.attributes)if(i.toLowerCase()===t)return!0;return!!this._hasFieldDefinition(t)}keys(){let e=[];const t={};for(const i in this.attributes)e.push(i),t[i.toLowerCase()]=1;if(null!==this._layer)for(let i=0;i<this._layer.fields.length;i++){const n=this._layer.fields[i];1!==t[n.name.toLowerCase()]&&e.push(n.name)}return e=e.sort(),e}isEmpty(){for(const e in this.attributes)return!1;return!(null!=this._layer&&this._layer.fields.length>0)&&null==this.geometry()}static parseAttributesFromDictionary(e){const t={};for(const i in e.attributes){const n=e.attributes[i];if(!(0,o.d)(n))throw new a.D$(null,"InvalidParameter",null);t[i]=n}return t}static fromJson(e,t){let i=null;null!==e.geometry&&void 0!==e.geometry&&(i=(0,f.rS)(e.geometry));const n={};if(null!==e.attributes&&void 0!==e.attributes)for(const r in e.attributes){const t=e.attributes[r];if(null===t)n[r]=t;else{if(!((0,p.Kg)(t)||(0,p.Et)(t)||(0,p.Lm)(t)||(0,o.e)(t)||(0,o.g)(t)||(0,o.f)(t)))throw new a.D$(null,"InvalidParameter",null);n[r]=t}}return _.createFromGraphicLikeObject(i,n,null,null!==t&&void 0!==t?t:null)}fullSchema(){return this._layer}gdbVersion(){var e;if(null===this._layer)return"";const t=this._layer.gdbVersion;return void 0===t?"":""===t&&null!==(e=this._layer.capabilities)&&void 0!==e&&e.isVersioned?"SDE.DEFAULT":t}castAsJson(e){var t,i;const n={attributes:{},geometry:!0===(null===e||void 0===e?void 0:e.keepGeometryType)?this.geometry():null!==(t=null===(i=this.geometry())||void 0===i?void 0:i.toJSON())&&void 0!==t?t:null};for(const r in this.attributes){const t=this.attributes[r];void 0!==t&&(n.attributes[r]=(0,o.a)(t,e))}return n}async castAsJsonAsync(){let e=arguments.length>1?arguments[1]:void 0;return this.castAsJson(e)}}(0,s.y)(_)},83101:(e,t,i)=>{i.d(t,{E:()=>o});var n=i(9861),r=i(43036),s=i(40565),l=i(19247),a=i(19902);function o(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=u(e,!0);if(void 0!==r.hasm&&(r.hasM=r.hasm,delete r.hasm),void 0!==r.hasz&&(r.hasZ=r.hasz,delete r.hasz),void 0!==r.spatialreference&&(r.spatialReference=r.spatialreference,delete r.spatialreference),r.spatialReference||(r.spatialReference=t),void 0!==r.curverings){const e=G(r.curverings,r.hasZ,r.hasM,k);if(null==e)return null;r.curveRings=e.arrays,delete r.curverings,delete r.rings,r.hasZ=e.hasZ,r.hasM=e.hasM}else if(void 0!==r.rings){const e=G(r.rings,r.hasZ,r.hasM,M);if(null==e)return null;r.rings=e.arrays,r.hasZ=e.hasZ,r.hasM=e.hasM}if(void 0!==r.curvepaths){const e=G(r.curvepaths,r.hasZ,r.hasM,k);if(null==e)return null;r.curvePaths=e.arrays,delete r.curvepaths,delete r.paths,r.hasZ=e.hasZ,r.hasM=e.hasM}else if(void 0!==r.paths){const e=G(r.paths,r.hasZ,r.hasM,M);if(null==e)return null;r.paths=e.arrays,r.hasZ=e.hasZ,r.hasM=e.hasM}if(void 0!==r.points){const e=function(e,t,i){const n=h(e);if(n===d)return null;const{hasZ:r,hasM:s}=S(t,i,n);return{array:N(e,M,I(r,s),Z(r,s)),hasZ:r,hasM:s}}(r.points,r.hasZ,r.hasM);if(null==e)return null;r.points=e.array,r.hasZ=e.hasZ,r.hasM=e.hasM}const s=(0,a.rS)(r);if(null!=i&&(null===s||void 0===s?void 0:s.type)!==i)throw new n.D$(null,"InvalidParameter",null);return s}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={};for(const n of e.keys()){const s=t?n.toLowerCase():n,l=e.attributes[n];i[s]=(0,r.n)(l)?u(l):l}return i}const d=Symbol("NoValue");function h(e){return Array.isArray(e)&&e.length>0?e[0]:(0,r.j)(e)&&e.length()>0?e.get(0):d}const c=0;function f(e){var t;return null!==(t=(0,s.GB)(e,c))&&void 0!==t?t:c}function y(e){return"number"==typeof e&&!Number.isNaN(e)}const m=null;function p(e){var t;return null!==(t=(0,s.GB)(e,m))&&void 0!==t?t:m}function g(e){return"number"==typeof e&&!Number.isNaN(e)||null===e}function b(e){return!(e.length<2)&&"number"==typeof e[0]&&!Number.isNaN(e[0])&&"number"==typeof e[1]&&!Number.isNaN(e[1])}function _(e){return b(e)?e.length>2?e.slice(0,2):e:null}function v(e){return b(e)?y(e[2])?e.length>3?e.slice(0,3):e:[e[0],e[1],f(e[2])]:null}function T(e){return b(e)?e.length>=3&&!g(e[2])?[e[0],e[1],p(e[2])]:e.length>3?e.slice(0,3):e:null}function F(e){return b(e)?y(e[2])&&g(e[3])?e.length>4?e.slice(0,4):e:[e[0],e[1],f(e[2]),p(e[3])]:null}function w(e){return[e.x,e.y]}function A(e){var t;return[e.x,e.y,null!==(t=e.z)&&void 0!==t?t:c]}function D(e){var t;return[e.x,e.y,null!==(t=e.m)&&void 0!==t?t:m]}function x(e){var t,i;return[e.x,e.y,null!==(t=e.z)&&void 0!==t?t:c,null!==(i=e.m)&&void 0!==i?i:m]}function Z(e,t){return e?t?F:v:t?T:_}function I(e,t){return e?t?x:A:t?D:w}function M(e,t,i){return Array.isArray(e)?i(e):e instanceof l.A?t(e):(0,r.j)(e)?i(e.toArray()):null}function k(e,t,i){return Array.isArray(e)?i(e):(0,r.n)(e)?e.hasField("c")?function(e,t,i){if((0,r.j)(e)&&(e=e.toArray()),!Array.isArray(e)||2!==e.length)throw new n.D$(null,"InvalidParameter",null);const s=M(e[0],t,i);if(null==s)return null;const l=M(e[1],w,_);return null==l?null:{c:[s,l]}}(e.field("c"),t,i):e.hasField("a")?function(e,t,i){if((0,r.j)(e)&&(e=e.toArray()),!Array.isArray(e)||4!==e.length&&7!==e.length)throw new n.D$(null,"InvalidParameter",null);const s=M(e[0],t,i);if(null==s)return null;const l=M(e[1],w,_);if(null==l)return null;const a=e[2];if(0!==a&&1!==a)throw new n.D$(null,"InvalidParameter",null);const o=e[3];if(0!==o&&1!==o)throw new n.D$(null,"InvalidParameter",null);if(4===e.length)return{a:[s,l,a,o]};const u=e[4];if("number"!=typeof u)throw new n.D$(null,"InvalidParameter",null);if(Number.isNaN(u))return null;const d=e[5];if("number"!=typeof d)throw new n.D$(null,"InvalidParameter",null);if(Number.isNaN(d))return null;const h=e[6];if("number"!=typeof h)throw new n.D$(null,"InvalidParameter",null);return Number.isNaN(h)?null:{a:[s,l,a,o,u,d,h]}}(e.field("a"),t,i):e.hasField("b")?function(e,t,i){if((0,r.j)(e)&&(e=e.toArray()),!Array.isArray(e)||3!==e.length)throw new n.D$(null,"InvalidParameter",null);const s=M(e[0],t,i);if(null==s)return null;const l=M(e[1],w,_);if(null==l)return null;const a=M(e[2],w,_);return null==a?null:{b:[s,l,a]}}(e.field("b"),t,i):null:e instanceof l.A?t(e):(0,r.j)(e)?i(e.toArray()):null}function N(e,t,i,n){const s=[];if(Array.isArray(e))for(const r of e){const e=t(r,i,n);null!=e&&s.push(e)}else if((0,r.j)(e))for(let r=0;r<e.length();r++){const l=t(e.get(r),i,n);null!=l&&s.push(l)}return s}function L(e,t,i){return Array.isArray(e)?e.length>=t:(0,r.j)(e)?e.length()>=t:e instanceof l.A&&e[i]}function S(e,t,i){return void 0===e&&void 0===t?{hasZ:L(i,3,"hasZ"),hasM:L(i,4,"hasM")}:void 0===e?!0===t?{hasZ:L(i,4,"hasZ"),hasM:!0}:{hasZ:L(i,3,"hasZ"),hasM:!1}:void 0===t?!0===e?{hasZ:!0,hasM:L(i,4,"hasM")}:{hasZ:!1,hasM:L(i,3,"hasM")}:{hasZ:!0===e,hasM:!0===t}}function G(e,t,i,n){const s=h(h(e=function(e){const t=h(h(e));return t===d||Array.isArray(t)||(0,r.j)(t)||t instanceof l.A?e:[e]}(e)));if(s===d)return null;const{hasZ:a,hasM:o}=S(t,i,s),u=I(a,o),c=Z(a,o),f=[];if(Array.isArray(e))for(let r=0;r<e.length;r++)f.push(N(e[r],n,u,c));else if((0,r.j)(e))for(let r=0;r<e.length();r++)f.push(N(e.get(r),n,u,c));return{arrays:f,hasZ:a,hasM:o}}}}]);
//# sourceMappingURL=8015.3f0bb515.chunk.js.map