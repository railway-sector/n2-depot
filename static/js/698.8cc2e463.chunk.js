"use strict";(self.webpackChunkn2_depot=self.webpackChunkn2_depot||[]).push([[698,2259,6141],{2259:(e,t,n)=>{n.d(t,{o6:()=>I,extractComponentsEdgeLocationsLayout:()=>k,hx:()=>A,Jb:()=>S});var r=n(77176);function o(e,t,n){const r=t/3,o=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(e,t)=>{e<t?o[e+1]++:i[t+1]++};for(let v=0;v<r;v++){const t=e[3*v],n=e[3*v+1],r=e[3*v+2];s(t,n),s(n,r),s(r,t)}let a=0,c=0;for(let v=0;v<n;v++){const e=o[v+1],t=i[v+1];o[v+1]=a,i[v+1]=c,a+=e,c+=t}const u=new Uint32Array(6*r),f=o[n],l=(e,t,n)=>{if(e<t){const r=o[e+1]++;u[2*r]=t,u[2*r+1]=n}else{const r=i[t+1]++;u[2*f+2*r]=e,u[2*f+2*r+1]=n}};for(let v=0;v<r;v++){const t=e[3*v],n=e[3*v+1],r=e[3*v+2];l(t,n,v),l(n,r,v),l(r,t,v)}const d=(e,t)=>{const n=2*e,r=t-e;for(let o=1;o<r;o++){const e=u[n+2*o],t=u[n+2*o+1];let r=o-1;for(;r>=0&&u[n+2*r]>e;r--)u[n+2*r+2]=u[n+2*r],u[n+2*r+3]=u[n+2*r+1];u[n+2*r+2]=e,u[n+2*r+3]=t}};for(let v=0;v<n;v++)d(o[v],o[v+1]),d(f+i[v],f+i[v+1]);const p=new Int32Array(3*r),g=(t,n)=>t===e[3*n]?0:t===e[3*n+1]?1:t===e[3*n+2]?2:-1,h=(e,t)=>{const n=g(e,t);p[3*t+n]=-1},m=(e,t,n,r)=>{const o=g(e,t);p[3*t+o]=r;const i=g(n,r);p[3*r+i]=t};for(let v=0;v<n;v++){let e=o[v];const t=o[v+1];let n=i[v];const r=i[v+1];for(;e<t&&n<r;){const t=u[2*e],r=u[2*f+2*n];t===r?(m(v,u[2*e+1],r,u[2*f+2*n+1]),e++,n++):t<r?(h(v,u[2*e+1]),e++):(h(r,u[2*f+2*n+1]),n++)}for(;e<t;)h(v,u[2*e+1]),e++;for(;n<r;)h(u[2*f+2*n],u[2*f+2*n+1]),n++}return p}var i=n(48549),s=n(96141),a=n(47249),c=n(20664),u=n(9392),f=n(25672);class l{updateSettings(e){this.settings=e,this._edgeHashFunction=e.reducedPrecision?m:h}write(e,t,n){L.seed=this._edgeHashFunction(n);const r=L.getIntRange(0,255),o=L.getIntRange(0,this.settings.variants-1),i=L.getFloat(),s=255*(.5*function(e,t){return Math.abs(e)**t*Math.sign(e)}(-(1-Math.min(i/.7,1))+Math.max(0,i-.7)/(1-.7),1.2)+.5);e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex),e.variantOffset.set(t,r),e.variantStroke.set(t,o),e.variantExtension.set(t,s)}}const d=new Float32Array(6),p=new Uint32Array(d.buffer),g=new Uint32Array(1);function h(e){return d[0]=e.position0[0],d[1]=e.position0[1],d[2]=e.position0[2],d[3]=e.position1[0],d[4]=e.position1[1],d[5]=e.position1[2],g[0]=31*(31*(31*(31*(31*(166811+p[0])+p[1])+p[2])+p[3])+p[4])+p[5],g[0]}function m(e){const t=d;t[0]=w(e.position0[0]),t[1]=w(e.position0[1]),t[2]=w(e.position0[2]),t[3]=w(e.position1[0]),t[4]=w(e.position1[1]),t[5]=w(e.position1[2]),g[0]=5381;for(let n=0;n<p.length;n++)g[0]=31*g[0]+p[n];return g[0]}const v=1e4;function w(e){return Math.round(e*v)/v}const y=(0,u.vt)(),L=new a.A;var b=n(7150);function I(e){const t=A(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return B.updateSettings(e.writerSettings),U.updateSettings(e.writerSettings),(0,b.K)(t,B,U)}function A(e,t,n,i){if(t){const t=o(n,i,e.count);return new x(n,i,t,e)}const a=(0,r.b)(e.buffer,e.stride/4,{originalIndices:n}),c=o(a.indices,i,a.uniqueCount);return{faces:a.indices,facesLength:a.indices.length,neighbors:c,vertices:s.EdgeInputBufferLayout.createView(a.buffer)}}class x{constructor(e,t,n,r){this.faces=e,this.facesLength=t,this.neighbors=n,this.vertices=r}}const B=new class{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.gr.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n),(0,c.g)(y,n.faceNormal0,n.faceNormal1),(0,c.n)(y,y);const{typedBuffer:r,typedBufferStride:o}=e.normalCompressed;(0,f.aT)(r,t,y[0],y[1],y[2],o)}},U=new class{constructor(){this._commonWriter=new l}updateSettings(e){this._commonWriter.updateSettings(e)}allocate(e){return s.In.createBuffer(e)}write(e,t,n){this._commonWriter.write(e,t,n);{const{typedBuffer:r,typedBufferStride:o}=e.normalCompressed;(0,f.aT)(r,t,n.faceNormal0[0],n.faceNormal0[1],n.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=e.normal2Compressed;(0,f.aT)(r,t,n.faceNormal1[0],n.faceNormal1[1],n.faceNormal1[2],o)}}},S=(0,i.BP)().vec3f("position0").vec3f("position1"),k=(0,i.BP)().vec3f("position0").vec3f("position1").u16("componentIndex")},12580:(e,t,n)=>{n.d(t,{L:()=>o,s:()=>i});var r=n(48549);function o(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:new r.l5(e.layout)}}function i(e){return new r.q3(e.layout).createView(e.buffer)}},50698:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var r=n(12580),o=n(96141),i=n(7150),s=n(2259);class a{async extract(e){const t=c(e),n=(0,s.o6)(t),r=[t.data.buffer];return{result:u(n,r),transferList:r}}async extractComponentsEdgeLocations(e){const t=c(e),n=(0,s.hx)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),o=(0,i.K)(n,l),a=[];return{result:(0,r.L)(o.regular.instancesData,a),transferList:a}}async extractEdgeLocations(e){const t=c(e),n=(0,s.hx)(t.data,t.skipDeduplicate,t.indices,t.indicesLength),o=(0,i.K)(n,f),a=[];return{result:(0,r.L)(o.regular.instancesData,a),transferList:a}}}function c(e){return{data:o.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function u(e,t){return t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:(0,r.L)(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:(0,r.L)(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}const f=new class{allocate(e){return s.Jb.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)}},l=new class{allocate(e){return s.extractComponentsEdgeLocationsLayout.createBuffer(e)}trim(e,t){return e.slice(0,t)}write(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)}}},77176:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(15941),o=n(38496);function i(e,t,n){var i;const f=Array.isArray(e),l=f?e.length/t:e.byteLength/(4*t),d=f?e:new Uint32Array(e,0,l*t),p=null!==(i=null===n||void 0===n?void 0:n.minReduction)&&void 0!==i?i:0,g=(null===n||void 0===n?void 0:n.originalIndices)||null,h=g?g.length:0,m=(null===n||void 0===n?void 0:n.componentOffsets)||null;let v=0;if(m)for(let r=0;r<m.length-1;r++){const e=m[r+1]-m[r];e>v&&(v=e)}else v=l;const w=Math.floor(1.1*v)+1;(null==u||u.length<2*w)&&(u=new Uint32Array((0,r.cU)(2*w)));for(let r=0;r<2*w;r++)u[r]=0;let y=0;const L=!!m&&!!g,b=L?h:l;let I=(0,o.my)(l);const A=new Uint32Array(h),x=1.96;let B=0!==p?Math.ceil(4*x*x/(p*p)*p*(1-p)):b,U=1,S=m?m[1]:b;for(let r=0;r<b;r++){if(r===B){const e=1-y/r;if(e+x*Math.sqrt(e*(1-e)/r)<p)return null;B*=2}if(r===S){for(let e=0;e<2*w;e++)u[e]=0;if(g)for(let e=m[U-1];e<m[U];e++)A[e]=I[g[e]];S=m[++U]}const e=L?g[r]:r,n=e*t,o=c(d,n,t);let i=o%w,a=y;for(;0!==u[2*i+1];){if(u[2*i]===o){const e=u[2*i+1]-1;if(s(d,n,e*t,t)){a=I[e];break}}i++,i>=w&&(i-=w)}a===y&&(u[2*i]=o,u[2*i+1]=e+1,y++),I[e]=a}if(0!==p&&1-y/l<p)return null;if(L){for(let e=m[U-1];e<A.length;e++)A[e]=I[g[e]];I=(0,o.uW)(A)}const k=f?new Array(y):new Uint32Array(y*t);y=0;for(let r=0;r<b;r++)I[r]===y&&(a(d,(L?g[r]:r)*t,k,y*t,t),y++);if(g&&!L){const e=new Uint32Array(h);for(let t=0;t<e.length;t++)e[t]=I[g[t]];I=(0,o.uW)(e)}return{buffer:Array.isArray(k)?k:k.buffer,indices:I,uniqueCount:y}}function s(e,t,n,r){for(let o=0;o<r;o++)if(e[t+o]!==e[n+o])return!1;return!0}function a(e,t,n,r,o){for(let i=0;i<o;i++)n[r+i]=e[t+i]}function c(e,t,n){let r=0;for(let o=0;o<n;o++)r=e[t+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let u=null},96141:(e,t,n)=>{n.d(t,{EdgeInputBufferLayout:()=>s,In:()=>f,g6:()=>p,gr:()=>u,kU:()=>g,lX:()=>l,pz:()=>d,vJ:()=>a,wO:()=>c});var r=n(57481),o=n(48549),i=n(75757);const s=(0,o.BP)().vec3f("position").u16("componentIndex").freeze(),a=(0,o.BP)().vec2u8("sideness").freeze(),c=(0,r.U)(a),u=(0,o.BP)().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),f=(0,o.BP)().vec3f("position0").vec3f("position1").vec2i16("normalCompressed").vec2i16("normal2Compressed").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).freeze(),l=(0,r.U)(u,1),d=(0,r.U)(f,1),p=(0,i._u)([c,l]),g=(0,i._u)([c,d])}}]);
//# sourceMappingURL=698.8cc2e463.chunk.js.map